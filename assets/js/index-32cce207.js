(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rf={},Fp={exports:{}},un={},ge={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),hC=Symbol.for("react.portal"),dC=Symbol.for("react.fragment"),fC=Symbol.for("react.strict_mode"),pC=Symbol.for("react.profiler"),mC=Symbol.for("react.provider"),gC=Symbol.for("react.context"),yC=Symbol.for("react.forward_ref"),vC=Symbol.for("react.suspense"),wC=Symbol.for("react.memo"),SC=Symbol.for("react.lazy"),Ey=Symbol.iterator;function EC(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var Fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vw=Object.assign,Uw={};function oo(t,e,n){this.props=t,this.context=e,this.refs=Uw,this.updater=n||Fw}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bw(){}Bw.prototype=oo.prototype;function Vp(t,e,n){this.props=t,this.context=e,this.refs=Uw,this.updater=n||Fw}var Up=Vp.prototype=new Bw;Up.constructor=Vp;Vw(Up,oo.prototype);Up.isPureReactComponent=!0;var Iy=Array.isArray,jw=Object.prototype.hasOwnProperty,Bp={current:null},zw={key:!0,ref:!0,__self:!0,__source:!0};function qw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)jw.call(e,r)&&!zw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ou,type:t,key:s,ref:o,props:i,_owner:Bp.current}}function IC(t,e){return{$$typeof:ou,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function xC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xy=/\/+/g;function rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xC(""+t.key):e.toString(36)}function cl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ou:case hC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rd(o,0):r,Iy(i)?(n="",t!=null&&(n=t.replace(xy,"$&/")+"/"),cl(i,e,n,"",function(l){return l})):i!=null&&(jp(i)&&(i=IC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Iy(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+rd(s,a);o+=cl(s,e,n,u,i)}else if(u=EC(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+rd(s,a++),o+=cl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mu(t,e,n){if(t==null)return t;var r=[],i=0;return cl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function TC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},hl={transition:null},CC={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:hl,ReactCurrentOwner:Bp};ee.Children={map:Mu,forEach:function(t,e,n){Mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mu(t,function(){e++}),e},toArray:function(t){return Mu(t,function(e){return e})||[]},only:function(t){if(!jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=oo;ee.Fragment=dC;ee.Profiler=pC;ee.PureComponent=Vp;ee.StrictMode=fC;ee.Suspense=vC;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CC;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Bp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)jw.call(e,u)&&!zw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ou,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:gC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mC,_context:t},t.Consumer=t};ee.createElement=qw;ee.createFactory=function(t){var e=qw.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:yC,render:t}};ee.isValidElement=jp;ee.lazy=function(t){return{$$typeof:SC,_payload:{_status:-1,_result:t},_init:TC}};ee.memo=function(t,e){return{$$typeof:wC,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=hl.transition;hl.transition={};try{t()}finally{hl.transition=e}};ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ee.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ee.useContext=function(t){return Ut.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ee.useId=function(){return Ut.current.useId()};ee.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ee.useRef=function(t){return Ut.current.useRef(t)};ee.useState=function(t){return Ut.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return Ut.current.useTransition()};ee.version="18.2.0";(function(t){t.exports=ee})(ge);const ao=cC(ge.exports);var Kw={exports:{}},Gw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,q){var K=N.length;N.push(q);e:for(;0<K;){var ve=K-1>>>1,P=N[ve];if(0<i(P,q))N[ve]=q,N[K]=P,K=ve;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var q=N[0],K=N.pop();if(K!==q){N[0]=K;e:for(var ve=0,P=N.length,M=P>>>1;ve<M;){var L=2*(ve+1)-1,G=N[L],I=L+1,te=N[I];if(0>i(G,K))I<P&&0>i(te,G)?(N[ve]=te,N[I]=K,ve=I):(N[ve]=G,N[L]=K,ve=L);else if(I<P&&0>i(te,K))N[ve]=te,N[I]=K,ve=I;else break e}}return q}function i(N,q){var K=N.sortIndex-q.sortIndex;return K!==0?K:N.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,h=null,d=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=N)r(l),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(l)}}function E(N){if(y=!1,v(N),!p)if(n(u)!==null)p=!0,Ze(T);else{var q=n(l);q!==null&&ze(E,q.startTime-N)}}function T(N,q){p=!1,y&&(y=!1,g($),$=-1),f=!0;var K=d;try{for(v(q),h=n(u);h!==null&&(!(h.expirationTime>q)||N&&!je());){var ve=h.callback;if(typeof ve=="function"){h.callback=null,d=h.priorityLevel;var P=ve(h.expirationTime<=q);q=t.unstable_now(),typeof P=="function"?h.callback=P:h===n(u)&&r(u),v(q)}else r(u);h=n(u)}if(h!==null)var M=!0;else{var L=n(l);L!==null&&ze(E,L.startTime-q),M=!1}return M}finally{h=null,d=K,f=!1}}var _=!1,D=null,$=-1,Z=5,B=-1;function je(){return!(t.unstable_now()-B<Z)}function Le(){if(D!==null){var N=t.unstable_now();B=N;var q=!0;try{q=D(!0,N)}finally{q?He():(_=!1,D=null)}}else _=!1}var He;if(typeof m=="function")He=function(){m(Le)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,ue=Nt.port2;Nt.port1.onmessage=Le,He=function(){ue.postMessage(null)}}else He=function(){w(Le,0)};function Ze(N){D=N,_||(_=!0,He())}function ze(N,q){$=w(function(){N(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Ze(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(N){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var K=d;d=q;try{return N()}finally{d=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var K=d;d=N;try{return q()}finally{d=K}},t.unstable_scheduleCallback=function(N,q,K){var ve=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ve+K:ve):K=ve,N){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=K+P,N={id:c++,callback:q,priorityLevel:N,startTime:K,expirationTime:P,sortIndex:-1},K>ve?(N.sortIndex=K,e(l,N),n(u)===null&&N===n(l)&&(y?(g($),$=-1):y=!0,ze(E,K-ve))):(N.sortIndex=P,e(u,N),p||f||(p=!0,Ze(T))),N},t.unstable_shouldYield=je,t.unstable_wrapCallback=function(N){var q=d;return function(){var K=d;d=q;try{return N.apply(this,arguments)}finally{d=K}}}})(Gw);(function(t){t.exports=Gw})(Kw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww=ge.exports,rn=Kw.exports;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hw=new Set,ya={};function Xi(t,e){Fs(t,e),Fs(t+"Capture",e)}function Fs(t,e){for(ya[t]=e,t=0;t<e.length;t++)Hw.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,kC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ty={},Cy={};function _C(t){return sf.call(Cy,t)?!0:sf.call(Ty,t)?!1:kC.test(t)?Cy[t]=!0:(Ty[t]=!0,!1)}function bC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DC(t,e,n,r){if(e===null||typeof e>"u"||bC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zp=/[\-:]([a-z])/g;function qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zp,qp);St[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zp,qp);St[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zp,qp);St[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kp(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DC(e,n,i,r)&&(n=null),r||i===null?_C(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=Ww.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),ds=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),Qw=Symbol.for("react.provider"),Yw=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),af=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Hp=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),Xw=Symbol.for("react.offscreen"),ky=Symbol.iterator;function ko(t){return t===null||typeof t!="object"?null:(t=ky&&t[ky]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,id;function zo(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var sd=!1;function od(t,e){if(!t||sd)return"";sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function AC(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=od(t.type,!1),t;case 11:return t=od(t.type.render,!1),t;case 1:return t=od(t.type,!0),t;default:return""}}function lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case ds:return"Portal";case of:return"Profiler";case Gp:return"StrictMode";case af:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yw:return(t.displayName||"Context")+".Consumer";case Qw:return(t._context.displayName||"Context")+".Provider";case Wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hp:return e=t.displayName||null,e!==null?e:lf(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return lf(t(e))}catch{}}return null}function NC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lf(e);case 8:return e===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $C(t){var e=Jw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fu(t){t._valueTracker||(t._valueTracker=$C(t))}function Zw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cf(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function _y(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e1(t,e){e=e.checked,e!=null&&Kp(t,"checked",e,!1)}function hf(t,e){e1(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?df(t,e.type,n):e.hasOwnProperty("defaultValue")&&df(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function by(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function df(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qo=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ff(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(qo(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function t1(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ay(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,r1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OC=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){OC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function i1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function s1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=i1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PC=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mf(t,e){if(e){if(PC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function gf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vf=null,bs=null,Ds=null;function Ny(t){if(t=lu(t)){if(typeof vf!="function")throw Error(b(280));var e=t.stateNode;e&&(e=jc(e),vf(t.stateNode,t.type,e))}}function o1(t){bs?Ds?Ds.push(t):Ds=[t]:bs=t}function a1(){if(bs){var t=bs,e=Ds;if(Ds=bs=null,Ny(t),e)for(t=0;t<e.length;t++)Ny(e[t])}}function u1(t,e){return t(e)}function l1(){}var ad=!1;function c1(t,e,n){if(ad)return t(e,n);ad=!0;try{return u1(t,e,n)}finally{ad=!1,(bs!==null||Ds!==null)&&(l1(),a1())}}function wa(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var wf=!1;if(Xn)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){wf=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{wf=!1}function RC(t,e,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Jo=!1,Nl=null,$l=!1,Sf=null,MC={onError:function(t){Jo=!0,Nl=t}};function LC(t,e,n,r,i,s,o,a,u){Jo=!1,Nl=null,RC.apply(MC,arguments)}function FC(t,e,n,r,i,s,o,a,u){if(LC.apply(this,arguments),Jo){if(Jo){var l=Nl;Jo=!1,Nl=null}else throw Error(b(198));$l||($l=!0,Sf=l)}}function Ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $y(t){if(Ji(t)!==t)throw Error(b(188))}function VC(t){var e=t.alternate;if(!e){if(e=Ji(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $y(i),t;if(s===r)return $y(i),e;s=s.sibling}throw Error(b(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function d1(t){return t=VC(t),t!==null?f1(t):null}function f1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f1(t);if(e!==null)return e;t=t.sibling}return null}var p1=rn.unstable_scheduleCallback,Oy=rn.unstable_cancelCallback,UC=rn.unstable_shouldYield,BC=rn.unstable_requestPaint,Ve=rn.unstable_now,jC=rn.unstable_getCurrentPriorityLevel,Yp=rn.unstable_ImmediatePriority,m1=rn.unstable_UserBlockingPriority,Ol=rn.unstable_NormalPriority,zC=rn.unstable_LowPriority,g1=rn.unstable_IdlePriority,Fc=null,Ln=null;function qC(t){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:WC,KC=Math.log,GC=Math.LN2;function WC(t){return t>>>=0,t===0?32:31-(KC(t)/GC|0)|0}var Uu=64,Bu=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ko(a):(s&=o,s!==0&&(r=Ko(s)))}else o=n&~i,o!==0?r=Ko(o):s!==0&&(r=Ko(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function HC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),a=1<<o,u=i[o];u===-1?((a&n)===0||(a&r)!==0)&&(i[o]=HC(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Ef(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y1(){var t=Uu;return Uu<<=1,(Uu&4194240)===0&&(Uu=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function YC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function v1(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var w1,Jp,S1,E1,I1,If=!1,ju=[],xr=null,Tr=null,Cr=null,Sa=new Map,Ea=new Map,mr=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Py(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function bo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lu(e),e!==null&&Jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JC(t,e,n,r,i){switch(e){case"focusin":return xr=bo(xr,t,e,n,r,i),!0;case"dragenter":return Tr=bo(Tr,t,e,n,r,i),!0;case"mouseover":return Cr=bo(Cr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Sa.set(s,bo(Sa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ea.set(s,bo(Ea.get(s)||null,t,e,n,r,i)),!0}return!1}function x1(t){var e=gi(t.target);if(e!==null){var n=Ji(e);if(n!==null){if(e=n.tag,e===13){if(e=h1(n),e!==null){t.blockedOn=e,I1(t.priority,function(){S1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return e=lu(n),e!==null&&Jp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ry(t,e,n){dl(t)&&n.delete(e)}function ZC(){If=!1,xr!==null&&dl(xr)&&(xr=null),Tr!==null&&dl(Tr)&&(Tr=null),Cr!==null&&dl(Cr)&&(Cr=null),Sa.forEach(Ry),Ea.forEach(Ry)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,If||(If=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,ZC)))}function Ia(t){function e(i){return Do(i,t)}if(0<ju.length){Do(ju[0],t);for(var n=1;n<ju.length;n++){var r=ju[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Do(xr,t),Tr!==null&&Do(Tr,t),Cr!==null&&Do(Cr,t),Sa.forEach(e),Ea.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)x1(n),n.blockedOn===null&&mr.shift()}var As=sr.ReactCurrentBatchConfig,Rl=!0;function ek(t,e,n,r){var i=fe,s=As.transition;As.transition=null;try{fe=1,Zp(t,e,n,r)}finally{fe=i,As.transition=s}}function tk(t,e,n,r){var i=fe,s=As.transition;As.transition=null;try{fe=4,Zp(t,e,n,r)}finally{fe=i,As.transition=s}}function Zp(t,e,n,r){if(Rl){var i=xf(t,e,n,r);if(i===null)vd(t,e,r,Ml,n),Py(t,r);else if(JC(i,t,e,n,r))r.stopPropagation();else if(Py(t,r),e&4&&-1<XC.indexOf(t)){for(;i!==null;){var s=lu(i);if(s!==null&&w1(s),s=xf(t,e,n,r),s===null&&vd(t,e,r,Ml,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vd(t,e,r,null,n)}}var Ml=null;function xf(t,e,n,r){if(Ml=null,t=Qp(r),t=gi(t),t!==null)if(e=Ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=h1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ml=t,null}function T1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jC()){case Yp:return 1;case m1:return 4;case Ol:case zC:return 16;case g1:return 536870912;default:return 16}default:return 16}}var Sr=null,em=null,fl=null;function C1(){if(fl)return fl;var t,e=em,n=e.length,r,i="value"in Sr?Sr.value:Sr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return fl=i.slice(t,1<r?1-r:void 0)}function pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function My(){return!1}function ln(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zu:My,this.isPropagationStopped=My,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tm=ln(uo),uu=Ne({},uo,{view:0,detail:0}),nk=ln(uu),ld,cd,Ao,Vc=Ne({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(ld=t.screenX-Ao.screenX,cd=t.screenY-Ao.screenY):cd=ld=0,Ao=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:cd}}),Ly=ln(Vc),rk=Ne({},Vc,{dataTransfer:0}),ik=ln(rk),sk=Ne({},uu,{relatedTarget:0}),hd=ln(sk),ok=Ne({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),ak=ln(ok),uk=Ne({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lk=ln(uk),ck=Ne({},uo,{data:0}),Fy=ln(ck),hk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fk[t])?!!e[t]:!1}function nm(){return pk}var mk=Ne({},uu,{key:function(t){if(t.key){var e=hk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nm,charCode:function(t){return t.type==="keypress"?pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gk=ln(mk),yk=Ne({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vy=ln(yk),vk=Ne({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nm}),wk=ln(vk),Sk=Ne({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ek=ln(Sk),Ik=Ne({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xk=ln(Ik),Tk=[9,13,27,32],rm=Xn&&"CompositionEvent"in window,Zo=null;Xn&&"documentMode"in document&&(Zo=document.documentMode);var Ck=Xn&&"TextEvent"in window&&!Zo,k1=Xn&&(!rm||Zo&&8<Zo&&11>=Zo),Uy=String.fromCharCode(32),By=!1;function _1(t,e){switch(t){case"keyup":return Tk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function kk(t,e){switch(t){case"compositionend":return b1(e);case"keypress":return e.which!==32?null:(By=!0,Uy);case"textInput":return t=e.data,t===Uy&&By?null:t;default:return null}}function _k(t,e){if(ps)return t==="compositionend"||!rm&&_1(t,e)?(t=C1(),fl=em=Sr=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k1&&e.locale!=="ko"?null:e.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bk[t.type]:e==="textarea"}function D1(t,e,n,r){o1(r),e=Ll(e,"onChange"),0<e.length&&(n=new tm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,xa=null;function Dk(t){U1(t,0)}function Uc(t){var e=ys(t);if(Zw(e))return t}function Ak(t,e){if(t==="change")return e}var A1=!1;if(Xn){var dd;if(Xn){var fd="oninput"in document;if(!fd){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),fd=typeof zy.oninput=="function"}dd=fd}else dd=!1;A1=dd&&(!document.documentMode||9<document.documentMode)}function qy(){ea&&(ea.detachEvent("onpropertychange",N1),xa=ea=null)}function N1(t){if(t.propertyName==="value"&&Uc(xa)){var e=[];D1(e,xa,t,Qp(t)),c1(Dk,e)}}function Nk(t,e,n){t==="focusin"?(qy(),ea=e,xa=n,ea.attachEvent("onpropertychange",N1)):t==="focusout"&&qy()}function $k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uc(xa)}function Ok(t,e){if(t==="click")return Uc(e)}function Pk(t,e){if(t==="input"||t==="change")return Uc(e)}function Rk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:Rk;function Ta(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sf.call(e,i)||!An(t[i],e[i]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gy(t,e){var n=Ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function $1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O1(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function im(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mk(t){var e=O1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$1(n.ownerDocument.documentElement,n)){if(r!==null&&im(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gy(n,s);var o=Gy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lk=Xn&&"documentMode"in document&&11>=document.documentMode,ms=null,Tf=null,ta=null,Cf=!1;function Wy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cf||ms==null||ms!==Al(r)||(r=ms,"selectionStart"in r&&im(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&Ta(ta,r)||(ta=r,r=Ll(Tf,"onSelect"),0<r.length&&(e=new tm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function qu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},pd={},P1={};Xn&&(P1=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Bc(t){if(pd[t])return pd[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P1)return pd[t]=e[n];return t}var R1=Bc("animationend"),M1=Bc("animationiteration"),L1=Bc("animationstart"),F1=Bc("transitionend"),V1=new Map,Hy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){V1.set(t,e),Xi(e,[t])}for(var md=0;md<Hy.length;md++){var gd=Hy[md],Fk=gd.toLowerCase(),Vk=gd[0].toUpperCase()+gd.slice(1);Hr(Fk,"on"+Vk)}Hr(R1,"onAnimationEnd");Hr(M1,"onAnimationIteration");Hr(L1,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(F1,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Qy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FC(r,e,void 0,t),t.currentTarget=null}function U1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Qy(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Qy(i,a,l),s=u}}}if($l)throw t=Sf,$l=!1,Sf=null,t}function Ee(t,e){var n=e[Af];n===void 0&&(n=e[Af]=new Set);var r=t+"__bubble";n.has(r)||(B1(e,t,2,!1),n.add(r))}function yd(t,e,n){var r=0;e&&(r|=4),B1(n,t,r,e)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[Ku]){t[Ku]=!0,Hw.forEach(function(n){n!=="selectionchange"&&(Uk.has(n)||yd(n,!1,t),yd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ku]||(e[Ku]=!0,yd("selectionchange",!1,e))}}function B1(t,e,n,r){switch(T1(e)){case 1:var i=ek;break;case 4:i=tk;break;default:i=Zp}n=i.bind(null,e,n,t),i=void 0,!wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vd(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=gi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}c1(function(){var l=s,c=Qp(n),h=[];e:{var d=V1.get(t);if(d!==void 0){var f=tm,p=t;switch(t){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":f=gk;break;case"focusin":p="focus",f=hd;break;case"focusout":p="blur",f=hd;break;case"beforeblur":case"afterblur":f=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ly;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ik;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wk;break;case R1:case M1:case L1:f=ak;break;case F1:f=Ek;break;case"scroll":f=nk;break;case"wheel":f=xk;break;case"copy":case"cut":case"paste":f=lk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Vy}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?d!==null?d+"Capture":null:d;y=[];for(var m=l,v;m!==null;){v=m;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,g!==null&&(E=wa(m,g),E!=null&&y.push(ka(m,E,v)))),w)break;m=m.return}0<y.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:y}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==yf&&(p=n.relatedTarget||n.fromElement)&&(gi(p)||p[Jn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?gi(p):null,p!==null&&(w=Ji(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(y=Ly,E="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Vy,E="onPointerLeave",g="onPointerEnter",m="pointer"),w=f==null?d:ys(f),v=p==null?d:ys(p),d=new y(E,m+"leave",f,n,c),d.target=w,d.relatedTarget=v,E=null,gi(c)===l&&(y=new y(g,m+"enter",p,n,c),y.target=v,y.relatedTarget=w,E=y),w=E,f&&p)t:{for(y=f,g=p,m=0,v=y;v;v=os(v))m++;for(v=0,E=g;E;E=os(E))v++;for(;0<m-v;)y=os(y),m--;for(;0<v-m;)g=os(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=os(y),g=os(g)}y=null}else y=null;f!==null&&Yy(h,d,f,y,!1),p!==null&&w!==null&&Yy(h,w,p,y,!0)}}e:{if(d=l?ys(l):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=Ak;else if(jy(d))if(A1)T=Pk;else{T=$k;var _=Nk}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=Ok);if(T&&(T=T(t,l))){D1(h,T,n,c);break e}_&&_(t,d,l),t==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&df(d,"number",d.value)}switch(_=l?ys(l):window,t){case"focusin":(jy(_)||_.contentEditable==="true")&&(ms=_,Tf=l,ta=null);break;case"focusout":ta=Tf=ms=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Wy(h,n,c);break;case"selectionchange":if(Lk)break;case"keydown":case"keyup":Wy(h,n,c)}var D;if(rm)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else ps?_1(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(k1&&n.locale!=="ko"&&(ps||$!=="onCompositionStart"?$==="onCompositionEnd"&&ps&&(D=C1()):(Sr=c,em="value"in Sr?Sr.value:Sr.textContent,ps=!0)),_=Ll(l,$),0<_.length&&($=new Fy($,t,null,n,c),h.push({event:$,listeners:_}),D?$.data=D:(D=b1(n),D!==null&&($.data=D)))),(D=Ck?kk(t,n):_k(t,n))&&(l=Ll(l,"onBeforeInput"),0<l.length&&(c=new Fy("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:l}),c.data=D))}U1(h,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ll(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wa(t,n),s!=null&&r.unshift(ka(t,s,i)),s=wa(t,e),s!=null&&r.push(ka(t,s,i))),t=t.return}return r}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=wa(n,s),u!=null&&o.unshift(ka(n,u,a))):i||(u=wa(n,s),u!=null&&o.push(ka(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Bk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function Xy(t){return(typeof t=="string"?t:""+t).replace(Bk,`
`).replace(jk,"")}function Gu(t,e,n){if(e=Xy(e),Xy(t)!==e&&n)throw Error(b(425))}function Fl(){}var kf=null,_f=null;function bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Df=typeof setTimeout=="function"?setTimeout:void 0,zk=typeof clearTimeout=="function"?clearTimeout:void 0,Jy=typeof Promise=="function"?Promise:void 0,qk=typeof queueMicrotask=="function"?queueMicrotask:typeof Jy<"u"?function(t){return Jy.resolve(null).then(t).catch(Kk)}:Df;function Kk(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ia(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),On="__reactFiber$"+lo,_a="__reactProps$"+lo,Jn="__reactContainer$"+lo,Af="__reactEvents$"+lo,Gk="__reactListeners$"+lo,Wk="__reactHandles$"+lo;function gi(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zy(t);t!==null;){if(n=t[On])return n;t=Zy(t)}return e}t=n,n=t.parentNode}return null}function lu(t){return t=t[On]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function jc(t){return t[_a]||null}var Nf=[],vs=-1;function Qr(t){return{current:t}}function Ie(t){0>vs||(t.current=Nf[vs],Nf[vs]=null,vs--)}function Se(t,e){vs++,Nf[vs]=t.current,t.current=e}var Mr={},bt=Qr(Mr),Qt=Qr(!1),ki=Mr;function Vs(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(t){return t=t.childContextTypes,t!=null}function Vl(){Ie(Qt),Ie(bt)}function ev(t,e,n){if(bt.current!==Mr)throw Error(b(168));Se(bt,e),Se(Qt,n)}function j1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,NC(t)||"Unknown",i));return Ne({},n,r)}function Ul(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,ki=bt.current,Se(bt,t),Se(Qt,Qt.current),!0}function tv(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=j1(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Ie(Qt),Ie(bt),Se(bt,t)):Ie(Qt),Se(Qt,n)}var Kn=null,zc=!1,Sd=!1;function z1(t){Kn===null?Kn=[t]:Kn.push(t)}function Hk(t){zc=!0,z1(t)}function Yr(){if(!Sd&&Kn!==null){Sd=!0;var t=0,e=fe;try{var n=Kn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,zc=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),p1(Yp,Yr),i}finally{fe=e,Sd=!1}}return null}var ws=[],Ss=0,Bl=null,jl=0,hn=[],dn=0,_i=null,Gn=1,Wn="";function si(t,e){ws[Ss++]=jl,ws[Ss++]=Bl,Bl=t,jl=e}function q1(t,e,n){hn[dn++]=Gn,hn[dn++]=Wn,hn[dn++]=_i,_i=t;var r=Gn;t=Wn;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-bn(e)+i|n<<i|r,Wn=s+t}else Gn=1<<s|n<<i|r,Wn=t}function sm(t){t.return!==null&&(si(t,1),q1(t,1,0))}function om(t){for(;t===Bl;)Bl=ws[--Ss],ws[Ss]=null,jl=ws[--Ss],ws[Ss]=null;for(;t===_i;)_i=hn[--dn],hn[dn]=null,Wn=hn[--dn],hn[dn]=null,Gn=hn[--dn],hn[dn]=null}var tn=null,en=null,Ce=!1,Cn=null;function K1(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,en=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:Gn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,en=null,!0):!1;default:return!1}}function $f(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(Ce){var e=en;if(e){var n=e;if(!nv(t,e)){if($f(t))throw Error(b(418));e=kr(n.nextSibling);var r=tn;e&&nv(t,e)?K1(r,n):(t.flags=t.flags&-4097|2,Ce=!1,tn=t)}}else{if($f(t))throw Error(b(418));t.flags=t.flags&-4097|2,Ce=!1,tn=t}}}function rv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Wu(t){if(t!==tn)return!1;if(!Ce)return rv(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bf(t.type,t.memoizedProps)),e&&(e=en)){if($f(t))throw G1(),Error(b(418));for(;e;)K1(t,e),e=kr(e.nextSibling)}if(rv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=tn?kr(t.stateNode.nextSibling):null;return!0}function G1(){for(var t=en;t;)t=kr(t.nextSibling)}function Us(){en=tn=null,Ce=!1}function am(t){Cn===null?Cn=[t]:Cn.push(t)}var Qk=sr.ReactCurrentBatchConfig;function In(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zl=Qr(null),ql=null,Es=null,um=null;function lm(){um=Es=ql=null}function cm(t){var e=zl.current;Ie(zl),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){ql=t,um=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Gt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(um!==t)if(t={context:t,memoizedValue:e,next:null},Es===null){if(ql===null)throw Error(b(308));Es=t,ql.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var yi=null;function hm(t){yi===null?yi=[t]:yi.push(t)}function W1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(ie&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zn(t,n)}return i=r.interleaved,i===null?(e.next=e,hm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zn(t,n)}function ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xp(t,n)}}function iv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kl(t,e,n,r){var i=t.updateQueue;pr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(d=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ne({},h,d);break e;case 2:pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Di|=o,t.lanes=o,t.memoizedState=h}}function sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var Q1=new Ww.Component().refs;function Rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qc={isMounted:function(t){return(t=t._reactInternals)?Ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Dr(t),s=Qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(Dn(e,t,i,r),ml(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Dr(t),s=Qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(Dn(e,t,i,r),ml(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=Dr(t),i=Qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=_r(t,i,r),e!==null&&(Dn(e,t,r,n),ml(e,t,r))}};function ov(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(i,s):!0}function Y1(t,e,n){var r=!1,i=Mr,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Yt(e)?ki:bt.current,r=e.contextTypes,s=(r=r!=null)?Vs(t,i):Mr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function av(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qc.enqueueReplaceState(e,e.state,null)}function Mf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Q1,dm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Yt(e)?ki:bt.current,i.context=Vs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qc.enqueueReplaceState(i,i.state,null),Kl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Q1&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function Hu(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uv(t){var e=t._init;return e(t._payload)}function X1(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=Ar(g,m),g.index=0,g.sibling=null,g}function s(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,E){return m===null||m.tag!==6?(m=_d(v,g.mode,E),m.return=g,m):(m=i(m,v),m.return=g,m)}function u(g,m,v,E){var T=v.type;return T===fs?c(g,m,v.props.children,E,v.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fr&&uv(T)===m.type)?(E=i(m,v.props),E.ref=No(g,m,v),E.return=g,E):(E=El(v.type,v.key,v.props,null,g.mode,E),E.ref=No(g,m,v),E.return=g,E)}function l(g,m,v,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=bd(v,g.mode,E),m.return=g,m):(m=i(m,v.children||[]),m.return=g,m)}function c(g,m,v,E,T){return m===null||m.tag!==7?(m=Ti(v,g.mode,E,T),m.return=g,m):(m=i(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_d(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Lu:return v=El(m.type,m.key,m.props,null,g.mode,v),v.ref=No(g,null,m),v.return=g,v;case ds:return m=bd(m,g.mode,v),m.return=g,m;case fr:var E=m._init;return h(g,E(m._payload),v)}if(qo(m)||ko(m))return m=Ti(m,g.mode,v,null),m.return=g,m;Hu(g,m)}return null}function d(g,m,v,E){var T=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(g,m,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lu:return v.key===T?u(g,m,v,E):null;case ds:return v.key===T?l(g,m,v,E):null;case fr:return T=v._init,d(g,m,T(v._payload),E)}if(qo(v)||ko(v))return T!==null?null:c(g,m,v,E,null);Hu(g,v)}return null}function f(g,m,v,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(v)||null,a(m,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lu:return g=g.get(E.key===null?v:E.key)||null,u(m,g,E,T);case ds:return g=g.get(E.key===null?v:E.key)||null,l(m,g,E,T);case fr:var _=E._init;return f(g,m,v,_(E._payload),T)}if(qo(E)||ko(E))return g=g.get(v)||null,c(m,g,E,T,null);Hu(m,E)}return null}function p(g,m,v,E){for(var T=null,_=null,D=m,$=m=0,Z=null;D!==null&&$<v.length;$++){D.index>$?(Z=D,D=null):Z=D.sibling;var B=d(g,D,v[$],E);if(B===null){D===null&&(D=Z);break}t&&D&&B.alternate===null&&e(g,D),m=s(B,m,$),_===null?T=B:_.sibling=B,_=B,D=Z}if($===v.length)return n(g,D),Ce&&si(g,$),T;if(D===null){for(;$<v.length;$++)D=h(g,v[$],E),D!==null&&(m=s(D,m,$),_===null?T=D:_.sibling=D,_=D);return Ce&&si(g,$),T}for(D=r(g,D);$<v.length;$++)Z=f(D,g,$,v[$],E),Z!==null&&(t&&Z.alternate!==null&&D.delete(Z.key===null?$:Z.key),m=s(Z,m,$),_===null?T=Z:_.sibling=Z,_=Z);return t&&D.forEach(function(je){return e(g,je)}),Ce&&si(g,$),T}function y(g,m,v,E){var T=ko(v);if(typeof T!="function")throw Error(b(150));if(v=T.call(v),v==null)throw Error(b(151));for(var _=T=null,D=m,$=m=0,Z=null,B=v.next();D!==null&&!B.done;$++,B=v.next()){D.index>$?(Z=D,D=null):Z=D.sibling;var je=d(g,D,B.value,E);if(je===null){D===null&&(D=Z);break}t&&D&&je.alternate===null&&e(g,D),m=s(je,m,$),_===null?T=je:_.sibling=je,_=je,D=Z}if(B.done)return n(g,D),Ce&&si(g,$),T;if(D===null){for(;!B.done;$++,B=v.next())B=h(g,B.value,E),B!==null&&(m=s(B,m,$),_===null?T=B:_.sibling=B,_=B);return Ce&&si(g,$),T}for(D=r(g,D);!B.done;$++,B=v.next())B=f(D,g,$,B.value,E),B!==null&&(t&&B.alternate!==null&&D.delete(B.key===null?$:B.key),m=s(B,m,$),_===null?T=B:_.sibling=B,_=B);return t&&D.forEach(function(Le){return e(g,Le)}),Ce&&si(g,$),T}function w(g,m,v,E){if(typeof v=="object"&&v!==null&&v.type===fs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lu:e:{for(var T=v.key,_=m;_!==null;){if(_.key===T){if(T=v.type,T===fs){if(_.tag===7){n(g,_.sibling),m=i(_,v.props.children),m.return=g,g=m;break e}}else if(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fr&&uv(T)===_.type){n(g,_.sibling),m=i(_,v.props),m.ref=No(g,_,v),m.return=g,g=m;break e}n(g,_);break}else e(g,_);_=_.sibling}v.type===fs?(m=Ti(v.props.children,g.mode,E,v.key),m.return=g,g=m):(E=El(v.type,v.key,v.props,null,g.mode,E),E.ref=No(g,m,v),E.return=g,g=E)}return o(g);case ds:e:{for(_=v.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=i(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=bd(v,g.mode,E),m.return=g,g=m}return o(g);case fr:return _=v._init,w(g,m,_(v._payload),E)}if(qo(v))return p(g,m,v,E);if(ko(v))return y(g,m,v,E);Hu(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,v),m.return=g,g=m):(n(g,m),m=_d(v,g.mode,E),m.return=g,g=m),o(g)):n(g,m)}return w}var Bs=X1(!0),J1=X1(!1),cu={},Fn=Qr(cu),ba=Qr(cu),Da=Qr(cu);function vi(t){if(t===cu)throw Error(b(174));return t}function fm(t,e){switch(Se(Da,e),Se(ba,t),Se(Fn,cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pf(e,t)}Ie(Fn),Se(Fn,e)}function js(){Ie(Fn),Ie(ba),Ie(Da)}function Z1(t){vi(Da.current);var e=vi(Fn.current),n=pf(e,t.type);e!==n&&(Se(ba,t),Se(Fn,n))}function pm(t){ba.current===t&&(Ie(Fn),Ie(ba))}var be=Qr(0);function Gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ed=[];function mm(){for(var t=0;t<Ed.length;t++)Ed[t]._workInProgressVersionPrimary=null;Ed.length=0}var gl=sr.ReactCurrentDispatcher,Id=sr.ReactCurrentBatchConfig,bi=0,Ae=null,Ye=null,tt=null,Wl=!1,na=!1,Aa=0,Yk=0;function xt(){throw Error(b(321))}function gm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function ym(t,e,n,r,i,s){if(bi=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gl.current=t===null||t.memoizedState===null?e_:t_,t=n(r,i),na){s=0;do{if(na=!1,Aa=0,25<=s)throw Error(b(301));s+=1,tt=Ye=null,e.updateQueue=null,gl.current=n_,t=n(r,i)}while(na)}if(gl.current=Hl,e=Ye!==null&&Ye.next!==null,bi=0,tt=Ye=Ae=null,Wl=!1,e)throw Error(b(300));return t}function vm(){var t=Aa!==0;return Aa=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ae.memoizedState=tt=t:tt=tt.next=t,tt}function yn(){if(Ye===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Ae.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(b(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Ae.memoizedState=tt=t:tt=tt.next=t}return tt}function Na(t,e){return typeof e=="function"?e(t):e}function xd(t){var e=yn(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((bi&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,Ae.lanes|=c,Di|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,An(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,Di|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=yn(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eS(){}function tS(t,e){var n=Ae,r=yn(),i=e(),s=!An(r.memoizedState,i);if(s&&(r.memoizedState=i,Gt=!0),r=r.queue,wm(iS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,$a(9,rS.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(b(349));(bi&30)!==0||nS(n,e,i)}return i}function nS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rS(t,e,n,r){e.value=n,e.getSnapshot=r,sS(e)&&oS(t)}function iS(t,e,n){return n(function(){sS(e)&&oS(t)})}function sS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function oS(t){var e=Zn(t,1);e!==null&&Dn(e,t,1,-1)}function lv(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=Zk.bind(null,Ae,t),[e.memoizedState,t]}function $a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aS(){return yn().memoizedState}function yl(t,e,n,r){var i=$n();Ae.flags|=t,i.memoizedState=$a(1|e,n,void 0,r===void 0?null:r)}function Kc(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&gm(r,o.deps)){i.memoizedState=$a(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=$a(1|e,n,s,r)}function cv(t,e){return yl(8390656,8,t,e)}function wm(t,e){return Kc(2048,8,t,e)}function uS(t,e){return Kc(4,2,t,e)}function lS(t,e){return Kc(4,4,t,e)}function cS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hS(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4,4,cS.bind(null,e,t),n)}function Sm(){}function dS(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fS(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pS(t,e,n){return(bi&21)===0?(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n):(An(n,e)||(n=y1(),Ae.lanes|=n,Di|=n,t.baseState=!0),e)}function Xk(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Id.transition;Id.transition={};try{t(!1),e()}finally{fe=n,Id.transition=r}}function mS(){return yn().memoizedState}function Jk(t,e,n){var r=Dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gS(t))yS(e,n);else if(n=W1(t,e,n,r),n!==null){var i=Ft();Dn(n,t,r,i),vS(n,e,r)}}function Zk(t,e,n){var r=Dr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gS(t))yS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,An(a,o)){var u=e.interleaved;u===null?(i.next=i,hm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=W1(t,e,i,r),n!==null&&(i=Ft(),Dn(n,t,r,i),vS(n,e,r))}}function gS(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function yS(t,e){na=Wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vS(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xp(t,n)}}var Hl={readContext:gn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},e_={readContext:gn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:cv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yl(4194308,4,cS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return yl(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Jk.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:lv,useDebugValue:Sm,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=lv(!1),e=t[0];return t=Xk.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=$n();if(Ce){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),rt===null)throw Error(b(349));(bi&30)!==0||nS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cv(iS.bind(null,r,s,t),[t]),r.flags|=2048,$a(9,rS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$n(),e=rt.identifierPrefix;if(Ce){var n=Wn,r=Gn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t_={readContext:gn,useCallback:dS,useContext:gn,useEffect:wm,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:lS,useMemo:fS,useReducer:xd,useRef:aS,useState:function(){return xd(Na)},useDebugValue:Sm,useDeferredValue:function(t){var e=yn();return pS(e,Ye.memoizedState,t)},useTransition:function(){var t=xd(Na)[0],e=yn().memoizedState;return[t,e]},useMutableSource:eS,useSyncExternalStore:tS,useId:mS,unstable_isNewReconciler:!1},n_={readContext:gn,useCallback:dS,useContext:gn,useEffect:wm,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:lS,useMemo:fS,useReducer:Td,useRef:aS,useState:function(){return Td(Na)},useDebugValue:Sm,useDeferredValue:function(t){var e=yn();return Ye===null?e.memoizedState=t:pS(e,Ye.memoizedState,t)},useTransition:function(){var t=Td(Na)[0],e=yn().memoizedState;return[t,e]},useMutableSource:eS,useSyncExternalStore:tS,useId:mS,unstable_isNewReconciler:!1};function zs(t,e){try{var n="",r=e;do n+=AC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Lf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r_=typeof WeakMap=="function"?WeakMap:Map;function wS(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yl||(Yl=!0,Wf=r),Lf(t,e)},n}function SS(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lf(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=y_.bind(null,t,e,n),e.then(t,t))}function dv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fv(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var i_=sr.ReactCurrentOwner,Gt=!1;function $t(t,e,n,r){e.child=t===null?J1(e,null,n,r):Bs(e,t.child,n,r)}function pv(t,e,n,r,i){n=n.render;var s=e.ref;return Ns(e,i),r=ym(t,e,n,r,s,i),n=vm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(Ce&&n&&sm(e),e.flags|=1,$t(t,e,r,i),e.child)}function mv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!bm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ES(t,e,s,r,i)):(t=El(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return er(t,e,i)}return e.flags|=1,t=Ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function ES(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ta(s,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Gt=!0);else return e.lanes=t.lanes,er(t,e,i)}return Ff(t,e,n,r,i)}function IS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(xs,Zt),Zt|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(xs,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(xs,Zt),Zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(xs,Zt),Zt|=r;return $t(t,e,i,n),e.child}function xS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,r,i){var s=Yt(n)?ki:bt.current;return s=Vs(e,s),Ns(e,i),n=ym(t,e,n,r,s,i),r=vm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(Ce&&r&&sm(e),e.flags|=1,$t(t,e,n,i),e.child)}function gv(t,e,n,r,i){if(Yt(n)){var s=!0;Ul(e)}else s=!1;if(Ns(e,i),e.stateNode===null)vl(t,e),Y1(e,n,r),Mf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=gn(l):(l=Yt(n)?ki:bt.current,l=Vs(e,l));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&av(e,o,r,l),pr=!1;var d=e.memoizedState;o.state=d,Kl(e,r,o,i),u=e.memoizedState,a!==r||d!==u||Qt.current||pr?(typeof c=="function"&&(Rf(e,n,c,r),u=e.memoizedState),(a=pr||ov(e,n,a,r,d,u,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H1(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:In(e.type,a),o.props=l,h=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gn(u):(u=Yt(n)?ki:bt.current,u=Vs(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==u)&&av(e,o,r,u),pr=!1,d=e.memoizedState,o.state=d,Kl(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Qt.current||pr?(typeof f=="function"&&(Rf(e,n,f,r),p=e.memoizedState),(l=pr||ov(e,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Vf(t,e,n,r,s,i)}function Vf(t,e,n,r,i,s){xS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tv(e,n,!1),er(t,e,s);r=e.stateNode,i_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bs(e,t.child,null,s),e.child=Bs(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&tv(e,n,!0),e.child}function TS(t){var e=t.stateNode;e.pendingContext?ev(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ev(t,e.context,!1),fm(t,e.containerInfo)}function yv(t,e,n,r,i){return Us(),am(i),e.flags|=256,$t(t,e,n,r),e.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function CS(t,e,n){var r=e.pendingProps,i=be.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(be,i&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hc(o,r,0,null),t=Ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bf(n),e.memoizedState=Uf,t):Em(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return s_(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ar(a,s):(s=Ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Uf,r}return s=t.child,t=s.sibling,r=Ar(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Em(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&am(r),Bs(e,t.child,null,n),t=Em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cd(Error(b(422))),Qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hc({mode:"visible",children:r.children},i,0,null),s=Ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Bs(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=Uf,s);if((e.mode&1)===0)return Qu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(b(419)),r=Cd(s,r,void 0),Qu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gt||a){if(r=rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(t,i),Dn(r,t,i,-1))}return _m(),r=Cd(Error(b(421))),Qu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,en=kr(i.nextSibling),tn=e,Ce=!0,Cn=null,t!==null&&(hn[dn++]=Gn,hn[dn++]=Wn,hn[dn++]=_i,Gn=t.id,Wn=t.overflow,_i=e),e=Em(e,r.children),e.flags|=4096,e)}function vv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pf(t.return,e,n)}function kd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=be.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vv(t,n,e);else if(t.tag===19)vv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(be,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Gl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Gl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kd(e,!0,n,null,s);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vl(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o_(t,e,n){switch(e.tag){case 3:TS(e),Us();break;case 5:Z1(e);break;case 1:Yt(e.type)&&Ul(e);break;case 4:fm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(be,be.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?CS(t,e,n):(Se(be,be.current&1),t=er(t,e,n),t!==null?t.sibling:null);Se(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return kS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,IS(t,e,n)}return er(t,e,n)}var _S,jf,bS,DS;_S=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jf=function(){};bS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vi(Fn.current);var s=null;switch(n){case"input":i=cf(t,i),r=cf(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=ff(t,i),r=ff(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}mf(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ya.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ya.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ee("scroll",t),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};DS=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function a_(t,e,n){var r=e.pendingProps;switch(om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return Yt(e.type)&&Vl(),Tt(e),null;case 3:return r=e.stateNode,js(),Ie(Qt),Ie(bt),mm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Cn!==null&&(Yf(Cn),Cn=null))),jf(t,e),Tt(e),null;case 5:pm(e);var i=vi(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)bS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return Tt(e),null}if(t=vi(Fn.current),Wu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[_a]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<Go.length;i++)Ee(Go[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":_y(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":Dy(r,s),Ee("invalid",r)}mf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),i=["children",""+a]):ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Fu(r),by(r,s,!0);break;case"textarea":Fu(r),Ay(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[_a]=r,_S(t,e,!1,!1),e.stateNode=t;e:{switch(o=gf(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Go.length;i++)Ee(Go[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":_y(t,r),i=cf(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Dy(t,r),i=ff(t,r),Ee("invalid",t);break;default:i=r}mf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?s1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&r1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&va(t,u):typeof u=="number"&&va(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ya.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ee("scroll",t):u!=null&&Kp(t,s,u,o))}switch(n){case"input":Fu(t),by(t,r,!1);break;case"textarea":Fu(t),Ay(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_s(t,!!r.multiple,s,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tt(e),null;case 6:if(t&&e.stateNode!=null)DS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=vi(Da.current),vi(Fn.current),Wu(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:Gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return Tt(e),null;case 13:if(Ie(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&en!==null&&(e.mode&1)!==0&&(e.flags&128)===0)G1(),Us(),e.flags|=98560,s=!1;else if(s=Wu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[On]=e}else Us(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Tt(e),s=!1}else Cn!==null&&(Yf(Cn),Cn=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(be.current&1)!==0?Xe===0&&(Xe=3):_m())),e.updateQueue!==null&&(e.flags|=4),Tt(e),null);case 4:return js(),jf(t,e),t===null&&Ca(e.stateNode.containerInfo),Tt(e),null;case 10:return cm(e.type._context),Tt(e),null;case 17:return Yt(e.type)&&Vl(),Tt(e),null;case 19:if(Ie(be),s=e.memoizedState,s===null)return Tt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$o(s,!1);else{if(Xe!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Gl(t),o!==null){for(e.flags|=128,$o(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(be,be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>qs&&(e.flags|=128,r=!0,$o(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return Tt(e),null}else 2*Ve()-s.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,$o(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=be.current,Se(be,r?n&1|2:n&1),e):(Tt(e),null);case 22:case 23:return km(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Zt&1073741824)!==0&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function u_(t,e){switch(om(e),e.tag){case 1:return Yt(e.type)&&Vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),Ie(Qt),Ie(bt),mm(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return pm(e),null;case 13:if(Ie(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(be),null;case 4:return js(),null;case 10:return cm(e.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var Yu=!1,kt=!1,l_=typeof WeakSet=="function"?WeakSet:Set,F=null;function Is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function zf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var wv=!1;function c_(t,e){if(kf=Rl,t=O1(),im(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(_f={focusedElem:t,selectionRange:n},Rl=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:In(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(E){Oe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return p=wv,wv=!1,p}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zf(e,n,s)}i=i.next}while(i!==r)}}function Gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function AS(t){var e=t.alternate;e!==null&&(t.alternate=null,AS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[_a],delete e[Af],delete e[Gk],delete e[Wk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}function Gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}var ft=null,Tn=!1;function cr(t,e,n){for(n=n.child;n!==null;)$S(t,e,n),n=n.sibling}function $S(t,e,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:kt||Is(n,e);case 6:var r=ft,i=Tn;ft=null,cr(t,e,n),ft=r,Tn=i,ft!==null&&(Tn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Tn?(t=ft,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),Ia(t)):wd(ft,n.stateNode));break;case 4:r=ft,i=Tn,ft=n.stateNode.containerInfo,Tn=!0,cr(t,e,n),ft=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&zf(n,e,o),i=i.next}while(i!==r)}cr(t,e,n);break;case 1:if(!kt&&(Is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,cr(t,e,n),kt=r):cr(t,e,n);break;default:cr(t,e,n)}}function Ev(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new l_),e.forEach(function(r){var i=w_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Tn=!1;break e;case 3:ft=a.stateNode.containerInfo,Tn=!0;break e;case 4:ft=a.stateNode.containerInfo,Tn=!0;break e}a=a.return}if(ft===null)throw Error(b(160));$S(s,o,i),ft=null,Tn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Oe(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OS(e,t),e=e.sibling}function OS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),Nn(t),r&4){try{ra(3,t,t.return),Gc(3,t)}catch(y){Oe(t,t.return,y)}try{ra(5,t,t.return)}catch(y){Oe(t,t.return,y)}}break;case 1:En(e,t),Nn(t),r&512&&n!==null&&Is(n,n.return);break;case 5:if(En(e,t),Nn(t),r&512&&n!==null&&Is(n,n.return),t.flags&32){var i=t.stateNode;try{va(i,"")}catch(y){Oe(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&e1(i,s),gf(a,o);var l=gf(a,s);for(o=0;o<u.length;o+=2){var c=u[o],h=u[o+1];c==="style"?s1(i,h):c==="dangerouslySetInnerHTML"?r1(i,h):c==="children"?va(i,h):Kp(i,c,h,l)}switch(a){case"input":hf(i,s);break;case"textarea":t1(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?_s(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?_s(i,!!s.multiple,s.defaultValue,!0):_s(i,!!s.multiple,s.multiple?[]:"",!1))}i[_a]=s}catch(y){Oe(t,t.return,y)}}break;case 6:if(En(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(b(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Oe(t,t.return,y)}}break;case 3:if(En(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ia(e.containerInfo)}catch(y){Oe(t,t.return,y)}break;case 4:En(e,t),Nn(t);break;case 13:En(e,t),Nn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Tm=Ve())),r&4&&Ev(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(l=kt)||c,En(e,t),kt=l):En(e,t),Nn(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(F=t,c=t.child;c!==null;){for(h=F=c;F!==null;){switch(d=F,f=d.child,d.tag){case 0:case 11:case 14:case 15:ra(4,d,d.return);break;case 1:Is(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Oe(r,n,y)}}break;case 5:Is(d,d.return);break;case 22:if(d.memoizedState!==null){xv(h);continue}}f!==null?(f.return=d,F=f):xv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=i1("display",o))}catch(y){Oe(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Oe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:En(e,t),Nn(t),r&4&&Ev(t);break;case 21:break;default:En(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(va(i,""),r.flags&=-33);var s=Sv(t);Gf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Sv(t);Kf(t,a,o);break;default:throw Error(b(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h_(t,e,n){F=t,PS(t)}function PS(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var i=F,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||kt;a=Yu;var l=kt;if(Yu=o,(kt=u)&&!l)for(F=i;F!==null;)o=F,u=o.child,o.tag===22&&o.memoizedState!==null?Tv(i):u!==null?(u.return=o,F=u):Tv(i);for(;s!==null;)F=s,PS(s),s=s.sibling;F=i,Yu=a,kt=l}Iv(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,F=s):Iv(t)}}function Iv(t){for(;F!==null;){var e=F;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:kt||Gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ia(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}kt||e.flags&512&&qf(e)}catch(d){Oe(e,e.return,d)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function xv(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function Tv(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gc(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Oe(e,i,u)}}var s=e.return;try{qf(e)}catch(u){Oe(e,s,u)}break;case 5:var o=e.return;try{qf(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var d_=Math.ceil,Ql=sr.ReactCurrentDispatcher,Im=sr.ReactCurrentOwner,mn=sr.ReactCurrentBatchConfig,ie=0,rt=null,Ke=null,yt=0,Zt=0,xs=Qr(0),Xe=0,Oa=null,Di=0,Wc=0,xm=0,ia=null,Kt=null,Tm=0,qs=1/0,qn=null,Yl=!1,Wf=null,br=null,Xu=!1,Er=null,Xl=0,sa=0,Hf=null,wl=-1,Sl=0;function Ft(){return(ie&6)!==0?Ve():wl!==-1?wl:wl=Ve()}function Dr(t){return(t.mode&1)===0?1:(ie&2)!==0&&yt!==0?yt&-yt:Qk.transition!==null?(Sl===0&&(Sl=y1()),Sl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:T1(t.type)),t)}function Dn(t,e,n,r){if(50<sa)throw sa=0,Hf=null,Error(b(185));au(t,n,r),((ie&2)===0||t!==rt)&&(t===rt&&((ie&2)===0&&(Wc|=n),Xe===4&&gr(t,yt)),Xt(t,r),n===1&&ie===0&&(e.mode&1)===0&&(qs=Ve()+500,zc&&Yr()))}function Xt(t,e){var n=t.callbackNode;QC(t,e);var r=Pl(t,t===rt?yt:0);if(r===0)n!==null&&Oy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oy(n),e===1)t.tag===0?Hk(Cv.bind(null,t)):z1(Cv.bind(null,t)),qk(function(){(ie&6)===0&&Yr()}),n=null;else{switch(v1(r)){case 1:n=Yp;break;case 4:n=m1;break;case 16:n=Ol;break;case 536870912:n=g1;break;default:n=Ol}n=jS(n,RS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RS(t,e){if(wl=-1,Sl=0,(ie&6)!==0)throw Error(b(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=Pl(t,t===rt?yt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Jl(t,r);else{e=r;var i=ie;ie|=2;var s=LS();(rt!==t||yt!==e)&&(qn=null,qs=Ve()+500,xi(t,e));do try{m_();break}catch(a){MS(t,a)}while(1);lm(),Ql.current=s,ie=i,Ke!==null?e=0:(rt=null,yt=0,e=Xe)}if(e!==0){if(e===2&&(i=Ef(t),i!==0&&(r=i,e=Qf(t,i))),e===1)throw n=Oa,xi(t,0),gr(t,r),Xt(t,Ve()),n;if(e===6)gr(t,r);else{if(i=t.current.alternate,(r&30)===0&&!f_(i)&&(e=Jl(t,r),e===2&&(s=Ef(t),s!==0&&(r=s,e=Qf(t,s))),e===1))throw n=Oa,xi(t,0),gr(t,r),Xt(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:oi(t,Kt,qn);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=Tm+500-Ve(),10<e)){if(Pl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Df(oi.bind(null,t,Kt,qn),e);break}oi(t,Kt,qn);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d_(r/1960))-r,10<r){t.timeoutHandle=Df(oi.bind(null,t,Kt,qn),r);break}oi(t,Kt,qn);break;case 5:oi(t,Kt,qn);break;default:throw Error(b(329))}}}return Xt(t,Ve()),t.callbackNode===n?RS.bind(null,t):null}function Qf(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(xi(t,e).flags|=256),t=Jl(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Yf(e)),t}function Yf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function f_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!An(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~xm,e&=~Wc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function Cv(t){if((ie&6)!==0)throw Error(b(327));$s();var e=Pl(t,0);if((e&1)===0)return Xt(t,Ve()),null;var n=Jl(t,e);if(t.tag!==0&&n===2){var r=Ef(t);r!==0&&(e=r,n=Qf(t,r))}if(n===1)throw n=Oa,xi(t,0),gr(t,e),Xt(t,Ve()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oi(t,Kt,qn),Xt(t,Ve()),null}function Cm(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(qs=Ve()+500,zc&&Yr())}}function Ai(t){Er!==null&&Er.tag===0&&(ie&6)===0&&$s();var e=ie;ie|=1;var n=mn.transition,r=fe;try{if(mn.transition=null,fe=1,t)return t()}finally{fe=r,mn.transition=n,ie=e,(ie&6)===0&&Yr()}}function km(){Zt=xs.current,Ie(xs)}function xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zk(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(om(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vl();break;case 3:js(),Ie(Qt),Ie(bt),mm();break;case 5:pm(r);break;case 4:js();break;case 13:Ie(be);break;case 19:Ie(be);break;case 10:cm(r.type._context);break;case 22:case 23:km()}n=n.return}if(rt=t,Ke=t=Ar(t.current,null),yt=Zt=e,Xe=0,Oa=null,xm=Wc=Di=0,Kt=ia=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}yi=null}return t}function MS(t,e){do{var n=Ke;try{if(lm(),gl.current=Hl,Wl){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wl=!1}if(bi=0,tt=Ye=Ae=null,na=!1,Aa=0,Im.current=null,n===null||n.return===null){Xe=1,Oa=e,Ke=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=yt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=dv(o);if(f!==null){f.flags&=-257,fv(f,o,a,s,e),f.mode&1&&hv(s,l,e),e=f,u=l;var p=e.updateQueue;if(p===null){var y=new Set;y.add(u),e.updateQueue=y}else p.add(u);break e}else{if((e&1)===0){hv(s,l,e),_m();break e}u=Error(b(426))}}else if(Ce&&a.mode&1){var w=dv(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),fv(w,o,a,s,e),am(zs(u,a));break e}}s=u=zs(u,a),Xe!==4&&(Xe=2),ia===null?ia=[s]:ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=wS(s,u,e);iv(s,g);break e;case 1:a=u;var m=s.type,v=s.stateNode;if((s.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(br===null||!br.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=SS(s,a,e);iv(s,E);break e}}s=s.return}while(s!==null)}VS(n)}catch(T){e=T,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function LS(){var t=Ql.current;return Ql.current=Hl,t===null?Hl:t}function _m(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),rt===null||(Di&268435455)===0&&(Wc&268435455)===0||gr(rt,yt)}function Jl(t,e){var n=ie;ie|=2;var r=LS();(rt!==t||yt!==e)&&(qn=null,xi(t,e));do try{p_();break}catch(i){MS(t,i)}while(1);if(lm(),ie=n,Ql.current=r,Ke!==null)throw Error(b(261));return rt=null,yt=0,Xe}function p_(){for(;Ke!==null;)FS(Ke)}function m_(){for(;Ke!==null&&!UC();)FS(Ke)}function FS(t){var e=BS(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?VS(t):Ke=e,Im.current=null}function VS(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=a_(n,e,Zt),n!==null){Ke=n;return}}else{if(n=u_(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Ke=null;return}}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Xe===0&&(Xe=5)}function oi(t,e,n){var r=fe,i=mn.transition;try{mn.transition=null,fe=1,g_(t,e,n,r)}finally{mn.transition=i,fe=r}return null}function g_(t,e,n,r){do $s();while(Er!==null);if((ie&6)!==0)throw Error(b(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YC(t,s),t===rt&&(Ke=rt=null,yt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Xu||(Xu=!0,jS(Ol,function(){return $s(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=mn.transition,mn.transition=null;var o=fe;fe=1;var a=ie;ie|=4,Im.current=null,c_(t,n),OS(n,t),Mk(_f),Rl=!!kf,_f=kf=null,t.current=n,h_(n),BC(),ie=a,fe=o,mn.transition=s}else t.current=n;if(Xu&&(Xu=!1,Er=t,Xl=i),s=t.pendingLanes,s===0&&(br=null),qC(n.stateNode),Xt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,t=Wf,Wf=null,t;return(Xl&1)!==0&&t.tag!==0&&$s(),s=t.pendingLanes,(s&1)!==0?t===Hf?sa++:(sa=0,Hf=t):sa=0,Yr(),null}function $s(){if(Er!==null){var t=v1(Xl),e=mn.transition,n=fe;try{if(mn.transition=null,fe=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Xl=0,(ie&6)!==0)throw Error(b(331));var i=ie;for(ie|=4,F=t.current;F!==null;){var s=F,o=s.child;if((F.flags&16)!==0){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(F=l;F!==null;){var c=F;switch(c.tag){case 0:case 11:case 15:ra(8,c,s)}var h=c.child;if(h!==null)h.return=c,F=h;else for(;F!==null;){c=F;var d=c.sibling,f=c.return;if(AS(c),c===l){F=null;break}if(d!==null){d.return=f,F=d;break}F=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}F=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,F=o;else e:for(;F!==null;){if(s=F,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:ra(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,F=g;break e}F=s.return}}var m=t.current;for(F=m;F!==null;){o=F;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,F=v;else e:for(o=m;F!==null;){if(a=F,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Gc(9,a)}}catch(T){Oe(a,a.return,T)}if(a===o){F=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,F=E;break e}F=a.return}}if(ie=i,Yr(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Fc,t)}catch{}r=!0}return r}finally{fe=n,mn.transition=e}}return!1}function kv(t,e,n){e=zs(n,e),e=wS(t,e,1),t=_r(t,e,1),e=Ft(),t!==null&&(au(t,1,e),Xt(t,e))}function Oe(t,e,n){if(t.tag===3)kv(t,t,n);else for(;e!==null;){if(e.tag===3){kv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=zs(n,t),t=SS(e,t,1),e=_r(e,t,1),t=Ft(),e!==null&&(au(e,1,t),Xt(e,t));break}}e=e.return}}function y_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(yt&n)===n&&(Xe===4||Xe===3&&(yt&130023424)===yt&&500>Ve()-Tm?xi(t,0):xm|=n),Xt(t,e)}function US(t,e){e===0&&((t.mode&1)===0?e=1:(e=Bu,Bu<<=1,(Bu&130023424)===0&&(Bu=4194304)));var n=Ft();t=Zn(t,e),t!==null&&(au(t,e,n),Xt(t,n))}function v_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),US(t,n)}function w_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),US(t,n)}var BS;BS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Gt=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Gt=!1,o_(t,e,n);Gt=(t.flags&131072)!==0}else Gt=!1,Ce&&(e.flags&1048576)!==0&&q1(e,jl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vl(t,e),t=e.pendingProps;var i=Vs(e,bt.current);Ns(e,n),i=ym(null,e,r,t,i,n);var s=vm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(s=!0,Ul(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dm(e),i.updater=qc,e.stateNode=i,i._reactInternals=e,Mf(e,r,t,n),e=Vf(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&sm(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=E_(r),t=In(r,t),i){case 0:e=Ff(null,e,r,t,n);break e;case 1:e=gv(null,e,r,t,n);break e;case 11:e=pv(null,e,r,t,n);break e;case 14:e=mv(null,e,r,In(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Ff(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),gv(t,e,r,i,n);case 3:e:{if(TS(e),t===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,H1(t,e),Kl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zs(Error(b(423)),e),e=yv(t,e,r,n,i);break e}else if(r!==i){i=zs(Error(b(424)),e),e=yv(t,e,r,n,i);break e}else for(en=kr(e.stateNode.containerInfo.firstChild),tn=e,Ce=!0,Cn=null,n=J1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===i){e=er(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return Z1(e),t===null&&Of(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,bf(r,i)?o=null:s!==null&&bf(r,s)&&(e.flags|=32),xS(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Of(e),null;case 13:return CS(t,e,n);case 4:return fm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bs(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),pv(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(zl,r._currentValue),r._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===i.children&&!Qt.current){e=er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Qn(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Pf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(b(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ns(e,n),i=gn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=In(r,e.pendingProps),i=In(r.type,i),mv(t,e,r,i,n);case 15:return ES(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),vl(t,e),e.tag=1,Yt(r)?(t=!0,Ul(e)):t=!1,Ns(e,n),Y1(e,r,i),Mf(e,r,i,n),Vf(null,e,r,!0,t,n);case 19:return kS(t,e,n);case 22:return IS(t,e,n)}throw Error(b(156,e.tag))};function jS(t,e){return p1(t,e)}function S_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new S_(t,e,n,r)}function bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E_(t){if(typeof t=="function")return bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wp)return 11;if(t===Hp)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")bm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fs:return Ti(n.children,i,s,e);case Gp:o=8,i|=8;break;case of:return t=fn(12,n,e,i|2),t.elementType=of,t.lanes=s,t;case af:return t=fn(13,n,e,i),t.elementType=af,t.lanes=s,t;case uf:return t=fn(19,n,e,i),t.elementType=uf,t.lanes=s,t;case Xw:return Hc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qw:o=10;break e;case Yw:o=9;break e;case Wp:o=11;break e;case Hp:o=14;break e;case fr:o=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ti(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Hc(t,e,n,r){return t=fn(22,t,r,e),t.elementType=Xw,t.lanes=n,t.stateNode={isHidden:!1},t}function _d(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dm(t,e,n,r,i,s,o,a,u){return t=new I_(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(s),t}function x_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zS(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ji(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Yt(n))return j1(t,n,e)}return e}function qS(t,e,n,r,i,s,o,a,u){return t=Dm(n,r,!0,t,i,s,o,a,u),t.context=zS(null),n=t.current,r=Ft(),i=Dr(n),s=Qn(r,i),s.callback=e!=null?e:null,_r(n,s,i),t.current.lanes=i,au(t,i,r),Xt(t,r),t}function Qc(t,e,n,r){var i=e.current,s=Ft(),o=Dr(i);return n=zS(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_r(i,e,o),t!==null&&(Dn(t,i,o,s),ml(t,i,o)),o}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _v(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Am(t,e){_v(t,e),(t=t.alternate)&&_v(t,e)}function T_(){return null}var KS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nm(t){this._internalRoot=t}Yc.prototype.render=Nm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));Qc(t,e,null,null)};Yc.prototype.unmount=Nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){Qc(null,t,null,null)}),e[Jn]=null}};function Yc(t){this._internalRoot=t}Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&x1(t)}};function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bv(){}function C_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Zl(o);s.call(l)}}var o=qS(e,r,t,0,null,!1,!1,"",bv);return t._reactRootContainer=o,t[Jn]=o.current,Ca(t.nodeType===8?t.parentNode:t),Ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Zl(u);a.call(l)}}var u=Dm(t,0,!1,null,null,!1,!1,"",bv);return t._reactRootContainer=u,t[Jn]=u.current,Ca(t.nodeType===8?t.parentNode:t),Ai(function(){Qc(e,u,n,r)}),u}function Jc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Zl(o);a.call(u)}}Qc(e,o,t,i)}else o=C_(n,e,t,i,r);return Zl(o)}w1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ko(e.pendingLanes);n!==0&&(Xp(e,n|1),Xt(e,Ve()),(ie&6)===0&&(qs=Ve()+500,Yr()))}break;case 13:Ai(function(){var r=Zn(t,1);if(r!==null){var i=Ft();Dn(r,t,1,i)}}),Am(t,1)}};Jp=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=Ft();Dn(e,t,134217728,n)}Am(t,134217728)}};S1=function(t){if(t.tag===13){var e=Dr(t),n=Zn(t,e);if(n!==null){var r=Ft();Dn(n,t,e,r)}Am(t,e)}};E1=function(){return fe};I1=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};vf=function(t,e,n){switch(e){case"input":if(hf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jc(r);if(!i)throw Error(b(90));Zw(r),hf(r,i)}}}break;case"textarea":t1(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};u1=Cm;l1=Ai;var k_={usingClientEntryPoint:!1,Events:[lu,ys,jc,o1,a1,Cm]},Oo={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},__={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d1(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||T_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Fc=Ju.inject(__),Ln=Ju}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(e))throw Error(b(200));return x_(t,e,null,n)};un.createRoot=function(t,e){if(!$m(t))throw Error(b(299));var n=!1,r="",i=KS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dm(t,1,!1,null,null,n,!1,r,i),t[Jn]=e.current,Ca(t.nodeType===8?t.parentNode:t),new Nm(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=d1(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return Ai(t)};un.hydrate=function(t,e,n){if(!Xc(e))throw Error(b(200));return Jc(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!$m(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=KS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qS(e,null,t,1,n!=null?n:null,i,!1,s,o),t[Jn]=e.current,Ca(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yc(e)};un.render=function(t,e,n){if(!Xc(e))throw Error(b(200));return Jc(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!Xc(t))throw Error(b(40));return t._reactRootContainer?(Ai(function(){Jc(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};un.unstable_batchedUpdates=Cm;un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xc(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return Jc(t,e,n,!1,r)};un.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=un})(Fp);var Dv=Fp.exports;rf.createRoot=Dv.createRoot,rf.hydrateRoot=Dv.hydrateRoot;var GS={exports:{}},WS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=ge.exports;function b_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var D_=typeof Object.is=="function"?Object.is:b_,A_=Ks.useState,N_=Ks.useEffect,$_=Ks.useLayoutEffect,O_=Ks.useDebugValue;function P_(t,e){var n=e(),r=A_({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return $_(function(){i.value=n,i.getSnapshot=e,Dd(i)&&s({inst:i})},[t,n,e]),N_(function(){return Dd(i)&&s({inst:i}),t(function(){Dd(i)&&s({inst:i})})},[t]),O_(n),n}function Dd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!D_(t,n)}catch{return!0}}function R_(t,e){return e()}var M_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?R_:P_;WS.useSyncExternalStore=Ks.useSyncExternalStore!==void 0?Ks.useSyncExternalStore:M_;(function(t){t.exports=WS})(GS);var HS={exports:{}},QS={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=ge.exports,L_=GS.exports;function F_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var V_=typeof Object.is=="function"?Object.is:F_,U_=L_.useSyncExternalStore,B_=Zc.useRef,j_=Zc.useEffect,z_=Zc.useMemo,q_=Zc.useDebugValue;QS.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=B_(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=z_(function(){function u(f){if(!l){if(l=!0,c=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return h=p}return h=f}if(p=h,V_(c,f))return p;var y=r(f);return i!==void 0&&i(p,y)?p:(c=f,h=y)}var l=!1,c,h,d=n===void 0?null:n;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,n,r,i]);var a=U_(t,s[0],s[1]);return j_(function(){o.hasValue=!0,o.value=a},[a]),q_(a),a};(function(t){t.exports=QS})(HS);function K_(t){t()}let YS=K_;const G_=t=>YS=t,W_=()=>YS,Lr=ao.createContext(null);function XS(){return ge.exports.useContext(Lr)}const H_=()=>{throw new Error("uSES not initialized!")};let JS=H_;const Q_=t=>{JS=t},Y_=(t,e)=>t===e;function X_(t=Lr){const e=t===Lr?XS:()=>ge.exports.useContext(t);return function(r,i=Y_){const{store:s,subscription:o,getServerState:a}=e(),u=JS(o.addNestedSub,s.getState,a||s.getState,r,i);return ge.exports.useDebugValue(u),u}}const J_=X_();var ZS={exports:{}},pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at=typeof Symbol=="function"&&Symbol.for,Om=at?Symbol.for("react.element"):60103,Pm=at?Symbol.for("react.portal"):60106,eh=at?Symbol.for("react.fragment"):60107,th=at?Symbol.for("react.strict_mode"):60108,nh=at?Symbol.for("react.profiler"):60114,rh=at?Symbol.for("react.provider"):60109,ih=at?Symbol.for("react.context"):60110,Rm=at?Symbol.for("react.async_mode"):60111,sh=at?Symbol.for("react.concurrent_mode"):60111,oh=at?Symbol.for("react.forward_ref"):60112,ah=at?Symbol.for("react.suspense"):60113,Z_=at?Symbol.for("react.suspense_list"):60120,uh=at?Symbol.for("react.memo"):60115,lh=at?Symbol.for("react.lazy"):60116,eb=at?Symbol.for("react.block"):60121,tb=at?Symbol.for("react.fundamental"):60117,nb=at?Symbol.for("react.responder"):60118,rb=at?Symbol.for("react.scope"):60119;function cn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Om:switch(t=t.type,t){case Rm:case sh:case eh:case nh:case th:case ah:return t;default:switch(t=t&&t.$$typeof,t){case ih:case oh:case lh:case uh:case rh:return t;default:return e}}case Pm:return e}}}function eE(t){return cn(t)===sh}pe.AsyncMode=Rm;pe.ConcurrentMode=sh;pe.ContextConsumer=ih;pe.ContextProvider=rh;pe.Element=Om;pe.ForwardRef=oh;pe.Fragment=eh;pe.Lazy=lh;pe.Memo=uh;pe.Portal=Pm;pe.Profiler=nh;pe.StrictMode=th;pe.Suspense=ah;pe.isAsyncMode=function(t){return eE(t)||cn(t)===Rm};pe.isConcurrentMode=eE;pe.isContextConsumer=function(t){return cn(t)===ih};pe.isContextProvider=function(t){return cn(t)===rh};pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Om};pe.isForwardRef=function(t){return cn(t)===oh};pe.isFragment=function(t){return cn(t)===eh};pe.isLazy=function(t){return cn(t)===lh};pe.isMemo=function(t){return cn(t)===uh};pe.isPortal=function(t){return cn(t)===Pm};pe.isProfiler=function(t){return cn(t)===nh};pe.isStrictMode=function(t){return cn(t)===th};pe.isSuspense=function(t){return cn(t)===ah};pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eh||t===sh||t===nh||t===th||t===ah||t===Z_||typeof t=="object"&&t!==null&&(t.$$typeof===lh||t.$$typeof===uh||t.$$typeof===rh||t.$$typeof===ih||t.$$typeof===oh||t.$$typeof===tb||t.$$typeof===nb||t.$$typeof===rb||t.$$typeof===eb)};pe.typeOf=cn;(function(t){t.exports=pe})(ZS);var Mm=ZS.exports,ib={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sb={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ob={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Lm={};Lm[Mm.ForwardRef]=ob;Lm[Mm.Memo]=tE;function Av(t){return Mm.isMemo(t)?tE:Lm[t.$$typeof]||ib}var ab=Object.defineProperty,ub=Object.getOwnPropertyNames,Nv=Object.getOwnPropertySymbols,lb=Object.getOwnPropertyDescriptor,cb=Object.getPrototypeOf,$v=Object.prototype;function nE(t,e,n){if(typeof e!="string"){if($v){var r=cb(e);r&&r!==$v&&nE(t,r,n)}var i=ub(e);Nv&&(i=i.concat(Nv(e)));for(var s=Av(t),o=Av(e),a=0;a<i.length;++a){var u=i[a];if(!sb[u]&&!(n&&n[u])&&!(o&&o[u])&&!(s&&s[u])){var l=lb(e,u);try{ab(t,u,l)}catch{}}}}return t}var hb=nE,Fm={exports:{}},me={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=Symbol.for("react.element"),Um=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),fh=Symbol.for("react.provider"),ph=Symbol.for("react.context"),db=Symbol.for("react.server_context"),mh=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),vh=Symbol.for("react.memo"),wh=Symbol.for("react.lazy"),fb=Symbol.for("react.offscreen"),rE;rE=Symbol.for("react.module.reference");function wn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Vm:switch(t=t.type,t){case ch:case dh:case hh:case gh:case yh:return t;default:switch(t=t&&t.$$typeof,t){case db:case ph:case mh:case wh:case vh:case fh:return t;default:return e}}case Um:return e}}}me.ContextConsumer=ph;me.ContextProvider=fh;me.Element=Vm;me.ForwardRef=mh;me.Fragment=ch;me.Lazy=wh;me.Memo=vh;me.Portal=Um;me.Profiler=dh;me.StrictMode=hh;me.Suspense=gh;me.SuspenseList=yh;me.isAsyncMode=function(){return!1};me.isConcurrentMode=function(){return!1};me.isContextConsumer=function(t){return wn(t)===ph};me.isContextProvider=function(t){return wn(t)===fh};me.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vm};me.isForwardRef=function(t){return wn(t)===mh};me.isFragment=function(t){return wn(t)===ch};me.isLazy=function(t){return wn(t)===wh};me.isMemo=function(t){return wn(t)===vh};me.isPortal=function(t){return wn(t)===Um};me.isProfiler=function(t){return wn(t)===dh};me.isStrictMode=function(t){return wn(t)===hh};me.isSuspense=function(t){return wn(t)===gh};me.isSuspenseList=function(t){return wn(t)===yh};me.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ch||t===dh||t===hh||t===gh||t===yh||t===fb||typeof t=="object"&&t!==null&&(t.$$typeof===wh||t.$$typeof===vh||t.$$typeof===fh||t.$$typeof===ph||t.$$typeof===mh||t.$$typeof===rE||t.getModuleId!==void 0)};me.typeOf=wn;(function(t){t.exports=me})(Fm);function pb(){const t=W_();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const Ov={notify(){},get:()=>[]};function mb(t,e){let n,r=Ov;function i(h){return u(),r.subscribe(h)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return Boolean(n)}function u(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=pb())}function l(){n&&(n(),n=void 0,r.clear(),r=Ov)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const gb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yb=gb?ge.exports.useLayoutEffect:ge.exports.useEffect;var Sh={exports:{}},Eh={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=ge.exports,wb=Symbol.for("react.element"),Sb=Symbol.for("react.fragment"),Eb=Object.prototype.hasOwnProperty,Ib=vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xb={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Eb.call(e,r)&&!xb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wb,type:t,key:s,ref:o,props:i,_owner:Ib.current}}Eh.Fragment=Sb;Eh.jsx=iE;Eh.jsxs=iE;(function(t){t.exports=Eh})(Sh);const hu=Sh.exports.Fragment,J=Sh.exports.jsx,Yn=Sh.exports.jsxs;function Tb({store:t,context:e,children:n,serverState:r}){const i=ge.exports.useMemo(()=>{const a=mb(t);return{store:t,subscription:a,getServerState:r?()=>r:void 0}},[t,r]),s=ge.exports.useMemo(()=>t.getState(),[t]);return yb(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==t.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]),J((e||Lr).Provider,{value:i,children:n})}function sE(t=Lr){const e=t===Lr?XS:()=>ge.exports.useContext(t);return function(){const{store:r}=e();return r}}const Cb=sE();function kb(t=Lr){const e=t===Lr?Cb:sE(t);return function(){return e().dispatch}}const _b=kb();Q_(HS.exports.useSyncExternalStoreWithSelector);G_(Fp.exports.unstable_batchedUpdates);function kn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fr(t){return!!t&&!!t[Te]}function tr(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===Mb}(t)||Array.isArray(t)||!!t[Uv]||!!t.constructor[Uv]||Bm(t)||jm(t))}function Ni(t,e,n){n===void 0&&(n=!1),co(t)===0?(n?Object.keys:Ps)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function co(t){var e=t[Te];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Bm(t)?2:jm(t)?3:0}function Os(t,e){return co(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function bb(t,e){return co(t)===2?t.get(e):t[e]}function oE(t,e,n){var r=co(t);r===2?t.set(e,n):r===3?(t.delete(e),t.add(n)):t[e]=n}function aE(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Bm(t){return Pb&&t instanceof Map}function jm(t){return Rb&&t instanceof Set}function ai(t){return t.o||t.t}function zm(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=lE(t);delete e[Te];for(var n=Ps(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function qm(t,e){return e===void 0&&(e=!1),Km(t)||Fr(t)||!tr(t)||(co(t)>1&&(t.set=t.add=t.clear=t.delete=Db),Object.freeze(t),e&&Ni(t,function(n,r){return qm(r,!0)},!0)),t}function Db(){kn(2)}function Km(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Vn(t){var e=ep[t];return e||kn(18,t),e}function Ab(t,e){ep[t]||(ep[t]=e)}function Xf(){return Pa}function Ad(t,e){e&&(Vn("Patches"),t.u=[],t.s=[],t.v=e)}function ec(t){Jf(t),t.p.forEach(Nb),t.p=null}function Jf(t){t===Pa&&(Pa=t.l)}function Pv(t){return Pa={p:[],l:Pa,h:t,m:!0,_:0}}function Nb(t){var e=t[Te];e.i===0||e.i===1?e.j():e.O=!0}function Nd(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.g||Vn("ES5").S(e,t,r),r?(n[Te].P&&(ec(e),kn(4)),tr(t)&&(t=tc(e,t),e.l||nc(e,t)),e.u&&Vn("Patches").M(n[Te].t,t,e.u,e.s)):t=tc(e,n,[]),ec(e),e.u&&e.v(e.u,e.s),t!==uE?t:void 0}function tc(t,e,n){if(Km(e))return e;var r=e[Te];if(!r)return Ni(e,function(s,o){return Rv(t,r,e,s,o,n)},!0),e;if(r.A!==t)return e;if(!r.P)return nc(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=zm(r.k):r.o;Ni(r.i===3?new Set(i):i,function(s,o){return Rv(t,r,i,s,o,n)}),nc(t,i,!1),n&&t.u&&Vn("Patches").R(r,n,t.u,t.s)}return r.o}function Rv(t,e,n,r,i,s){if(Fr(i)){var o=tc(t,i,s&&e&&e.i!==3&&!Os(e.D,r)?s.concat(r):void 0);if(oE(n,r,o),!Fr(o))return;t.m=!1}if(tr(i)&&!Km(i)){if(!t.h.F&&t._<1)return;tc(t,i),e&&e.A.l||nc(t,i)}}function nc(t,e,n){n===void 0&&(n=!1),t.h.F&&t.m&&qm(e,n)}function $d(t,e){var n=t[Te];return(n?ai(n):t)[e]}function Mv(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function yr(t){t.P||(t.P=!0,t.l&&yr(t.l))}function Od(t){t.o||(t.o=zm(t.t))}function Zf(t,e,n){var r=Bm(e)?Vn("MapSet").N(e,n):jm(e)?Vn("MapSet").T(e,n):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Xf(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Ra;o&&(u=[a],l=Wo);var c=Proxy.revocable(u,l),h=c.revoke,d=c.proxy;return a.k=d,a.j=h,d}(e,n):Vn("ES5").J(e,n);return(n?n.A:Xf()).p.push(r),r}function $b(t){return Fr(t)||kn(22,t),function e(n){if(!tr(n))return n;var r,i=n[Te],s=co(n);if(i){if(!i.P&&(i.i<4||!Vn("ES5").K(i)))return i.t;i.I=!0,r=Lv(n,s),i.I=!1}else r=Lv(n,s);return Ni(r,function(o,a){i&&bb(i.t,o)===a||oE(r,o,e(a))}),s===3?new Set(r):r}(t)}function Lv(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return zm(t)}function Ob(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Te];return Ra.get(u,s)},set:function(u){var l=this[Te];Ra.set(l,s,u)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Te];if(!a.P)switch(a.i){case 5:r(a)&&yr(a);break;case 4:n(a)&&yr(a)}}}function n(s){for(var o=s.t,a=s.k,u=Ps(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Te){var h=o[c];if(h===void 0&&!Os(o,c))return!0;var d=a[c],f=d&&d[Te];if(f?f.t!==h:!aE(d,h))return!0}}var p=!!o[Te];return u.length!==Ps(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Ab("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,h){if(c){for(var d=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(d,""+f,t(f,!0));return d}var p=lE(h);delete p[Te];for(var y=Ps(p),w=0;w<y.length;w++){var g=y[w];p[g]=t(g,c||!!p[g].enumerable)}return Object.create(Object.getPrototypeOf(h),p)}(a,s),l={i:a?5:4,A:o?o.A:Xf(),P:!1,I:!1,D:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,Te,{value:l,writable:!0}),u},S:function(s,o,a){a?Fr(o)&&o[Te].A===s&&e(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Te];if(c){var h=c.t,d=c.k,f=c.D,p=c.i;if(p===4)Ni(d,function(v){v!==Te&&(h[v]!==void 0||Os(h,v)?f[v]||u(d[v]):(f[v]=!0,yr(c)))}),Ni(h,function(v){d[v]!==void 0||Os(d,v)||(f[v]=!1,yr(c))});else if(p===5){if(r(c)&&(yr(c),f.length=!0),d.length<h.length)for(var y=d.length;y<h.length;y++)f[y]=!1;else for(var w=h.length;w<d.length;w++)f[w]=!0;for(var g=Math.min(d.length,h.length),m=0;m<g;m++)d.hasOwnProperty(m)||(f[m]=!0),f[m]===void 0&&u(d[m])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Fv,Pa,Gm=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Pb=typeof Map<"u",Rb=typeof Set<"u",Vv=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",uE=Gm?Symbol.for("immer-nothing"):((Fv={})["immer-nothing"]=!0,Fv),Uv=Gm?Symbol.for("immer-draftable"):"__$immer_draftable",Te=Gm?Symbol.for("immer-state"):"__$immer_state",Mb=""+Object.prototype.constructor,Ps=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,lE=Object.getOwnPropertyDescriptors||function(t){var e={};return Ps(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},ep={},Ra={get:function(t,e){if(e===Te)return t;var n=ai(t);if(!Os(n,e))return function(i,s,o){var a,u=Mv(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!tr(r)?r:r===$d(t.t,e)?(Od(t),t.o[e]=Zf(t.A.h,r,t)):r},has:function(t,e){return e in ai(t)},ownKeys:function(t){return Reflect.ownKeys(ai(t))},set:function(t,e,n){var r=Mv(ai(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=$d(ai(t),e),s=i==null?void 0:i[Te];if(s&&s.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(aE(n,i)&&(n!==void 0||Os(t.t,e)))return!0;Od(t),yr(t)}return t.o[e]===n&&typeof n!="number"&&(n!==void 0||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return $d(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,Od(t),yr(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ai(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){kn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){kn(12)}},Wo={};Ni(Ra,function(t,e){Wo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Wo.deleteProperty=function(t,e){return Wo.set.call(this,t,e,void 0)},Wo.set=function(t,e,n){return Ra.set.call(this,t[0],e,n,t[0])};var Lb=function(){function t(n){var r=this;this.g=Vv,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(y){var w=this;y===void 0&&(y=a);for(var g=arguments.length,m=Array(g>1?g-1:0),v=1;v<g;v++)m[v-1]=arguments[v];return u.produce(y,function(E){var T;return(T=s).call.apply(T,[w,E].concat(m))})}}var l;if(typeof s!="function"&&kn(6),o!==void 0&&typeof o!="function"&&kn(7),tr(i)){var c=Pv(r),h=Zf(r,i,void 0),d=!0;try{l=s(h),d=!1}finally{d?ec(c):Jf(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(y){return Ad(c,o),Nd(y,c)},function(y){throw ec(c),y}):(Ad(c,o),Nd(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===uE&&(l=void 0),r.F&&qm(l,!0),o){var f=[],p=[];Vn("Patches").M(i,l,f,p),o(f,p)}return l}kn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,h=Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];return r.produceWithPatches(l,function(f){return i.apply(void 0,[f].concat(h))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){tr(n)||kn(8),Fr(n)&&(n=$b(n));var r=Pv(this),i=Zf(this,n,void 0);return i[Te].C=!0,Jf(r),i},e.finishDraft=function(n,r){var i=n&&n[Te],s=i.A;return Ad(s,r),Nd(void 0,s)},e.setAutoFreeze=function(n){this.F=n},e.setUseProxies=function(n){n&&!Vv&&kn(20),this.g=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Vn("Patches").$;return Fr(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),sn=new Lb,cE=sn.produce;sn.produceWithPatches.bind(sn);sn.setAutoFreeze.bind(sn);sn.setUseProxies.bind(sn);sn.applyPatches.bind(sn);sn.createDraft.bind(sn);sn.finishDraft.bind(sn);function Fb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bv(Object(n),!0).forEach(function(r){Fb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ct(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var zv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Pd=function(){return Math.random().toString(36).substring(7).split("").join(".")},rc={INIT:"@@redux/INIT"+Pd(),REPLACE:"@@redux/REPLACE"+Pd(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pd()}};function Vb(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function hE(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ct(1));return n(hE)(t,e)}if(typeof t!="function")throw new Error(Ct(2));var i=t,s=e,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ct(3));return s}function h(y){if(typeof y!="function")throw new Error(Ct(4));if(u)throw new Error(Ct(5));var w=!0;return l(),a.push(y),function(){if(!!w){if(u)throw new Error(Ct(6));w=!1,l();var m=a.indexOf(y);a.splice(m,1),o=null}}}function d(y){if(!Vb(y))throw new Error(Ct(7));if(typeof y.type>"u")throw new Error(Ct(8));if(u)throw new Error(Ct(9));try{u=!0,s=i(s,y)}finally{u=!1}for(var w=o=a,g=0;g<w.length;g++){var m=w[g];m()}return y}function f(y){if(typeof y!="function")throw new Error(Ct(10));i=y,d({type:rc.REPLACE})}function p(){var y,w=h;return y={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(Ct(11));function v(){m.next&&m.next(c())}v();var E=w(v);return{unsubscribe:E}}},y[zv]=function(){return this},y}return d({type:rc.INIT}),r={dispatch:d,subscribe:h,getState:c,replaceReducer:f},r[zv]=p,r}function Ub(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:rc.INIT});if(typeof r>"u")throw new Error(Ct(12));if(typeof n(void 0,{type:rc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function Bb(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{Ub(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,h={},d=0;d<s.length;d++){var f=s[d],p=n[f],y=u[f],w=p(y,l);if(typeof w>"u")throw l&&l.type,new Error(Ct(14));h[f]=w,c=c||w!==y}return c=c||s.length!==Object.keys(u).length,c?h:u}}function ic(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function jb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ct(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(u){return u(o)});return s=ic.apply(void 0,a)(i.dispatch),jv(jv({},i),{},{dispatch:s})}}}function dE(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var fE=dE();fE.withExtraArgument=dE;const qv=fE;var zb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__generator;var sc=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},qb=Object.defineProperty,Kv=Object.getOwnPropertySymbols,Kb=Object.prototype.hasOwnProperty,Gb=Object.prototype.propertyIsEnumerable,Gv=function(t,e,n){return e in t?qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Ma=function(t,e){for(var n in e||(e={}))Kb.call(e,n)&&Gv(t,n,e[n]);if(Kv)for(var r=0,i=Kv(e);r<i.length;r++){var n=i[r];Gb.call(e,n)&&Gv(t,n,e[n])}return t},Wb=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ic:ic.apply(null,arguments)};function Hb(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var Qb=function(t){zb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,sc([void 0],n[0].concat(this)))):new(e.bind.apply(e,sc([void 0],n.concat(this))))},e}(Array);function tp(t){return tr(t)?cE(t,function(){}):t}function Yb(t){return typeof t=="boolean"}function Xb(){return function(e){return Jb(e)}}function Jb(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new Qb;return n&&(Yb(n)?r.push(qv):r.push(qv.withExtraArgument(n.extraArgument))),r}var Zb=!0;function eD(t){var e=Xb(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,h=n.enhancers,d=h===void 0?void 0:h,f;if(typeof i=="function")f=i;else if(Hb(i))f=Bb(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var y=jb.apply(void 0,p),w=ic;u&&(w=Wb(Ma({trace:!Zb},typeof u=="object"&&u)));var g=[y];Array.isArray(d)?g=sc([y],d):typeof d=="function"&&(g=d(g));var m=w.apply(void 0,g);return hE(f,c,m)}function La(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Ma(Ma({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function pE(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function tD(t){return typeof t=="function"}function nD(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?pE(e):[e,n,r],s=i[0],o=i[1],a=i[2],u;if(tD(t))u=function(){return tp(t())};else{var l=tp(t);u=function(){return l}}function c(h,d){h===void 0&&(h=u());var f=sc([s[d.type]],o.filter(function(p){var y=p.matcher;return y(d)}).map(function(p){var y=p.reducer;return y}));return f.filter(function(p){return!!p}).length===0&&(f=[a]),f.reduce(function(p,y){if(y)if(Fr(p)){var w=p,g=y(w,d);return g===void 0?p:g}else{if(tr(p))return cE(p,function(m){return y(m,d)});var g=y(p,d);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return p},h)}return c.getInitialState=u,c}function rD(t,e){return t+"/"+e}function du(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:tp(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var h=r[c],d=rD(e,c),f,p;"reducer"in h?(f=h.reducer,p=h.prepare):f=h,s[c]=f,o[d]=f,a[c]=p?La(d,p):La(d)});function u(){var c=typeof t.extraReducers=="function"?pE(t.extraReducers):[t.extraReducers],h=c[0],d=h===void 0?{}:h,f=c[1],p=f===void 0?[]:f,y=c[2],w=y===void 0?void 0:y,g=Ma(Ma({},d),o);return nD(n,g,p,w)}var l;return{name:e,reducer:function(c,h){return l||(l=u()),l(c,h)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Wm="listenerMiddleware";La(Wm+"/add");La(Wm+"/removeAll");La(Wm+"/remove");Ob();const $i=[{name:"SNES",url:"../SearchImages/pierre-roussel-snes-phone2-pal.jpg",heroes:[{name:"Red Ranger",found:!1,image:"../HeroImages/red-ranger-power.png"},{name:"Donatello",found:!1,image:"../HeroImages/Donnyboy.webp"},{name:"Bogyy B",found:!1,image:"../HeroImages/bogyy-b.png"}]},{name:"Wii",url:"../SearchImages/wii.jpg",heroes:[{name:"Bowser",found:!1,image:"../HeroImages/Bowser.png"},{name:"Luigi",found:!1,image:"../HeroImages/Luigi.webp"},{name:"Rabbid",found:!1,image:"../HeroImages/Rabbid.webp"}]},{name:"PS2",url:"../SearchImages/ps2.jpg",heroes:[{name:"Okami",found:!1,image:"../HeroImages/okami-wolf.webp"},{name:"Legolas",found:!1,image:"../HeroImages/Legolas.webp"},{name:"Kratos",found:!1,image:"../HeroImages/kratos.png"}]}],iD={value:$i[0].heroes},mE=du({name:"heroes",initialState:iD,reducers:{setHeroes:(t,e)=>{t.value=e.payload}}}),{setHeroes:Hm}=mE.actions,sD=mE.reducer,oD={time:new Date().toISOString(),isCounting:!1,resultTime:0},gE=du({name:"timer",initialState:oD,reducers:{setTime:(t,e)=>{t.time=e.payload},setIsCounting:(t,e)=>{t.isCounting=e.payload}}}),{setIsCounting:yE,setTime:vE}=gE.actions,aD=gE.reducer,uD={searchImage:$i[0].name,currentSearchImageURL:"",rightCoordinates:[]},wE=du({name:"searchImage",initialState:uD,reducers:{setCurrentSearchImage:(t,e)=>{t.searchImage=e.payload},setRightCoordinates:(t,e)=>{t.rightCoordinates=e.payload},setCurrentSearchImageURL:(t,e)=>{t.currentSearchImageURL=e.payload}}}),{setCurrentSearchImage:lD,setRightCoordinates:cD,setCurrentSearchImageURL:oc}=wE.actions,hD=wE.reducer,dD={currentLeaderboardData:[],allLeaderboardData:[[]]},SE=du({name:"leaderboard",initialState:dD,reducers:{setCurrentLeaderboardData:(t,e)=>{t.currentLeaderboardData=e.payload},setAllLeaderboardData:(t,e)=>{t.allLeaderboardData=e.payload}}}),{setCurrentLeaderboardData:EE,setAllLeaderboardData:fD}=SE.actions,pD=SE.reducer,mD={wasClicked:!1,crosshairCoordinateX:0,crosshairCoordinateY:0},IE=du({name:"crosshair",initialState:mD,reducers:{setWasClicked:t=>{t.wasClicked=!t.wasClicked},setCrosshairCoordinateX:(t,e)=>{t.crosshairCoordinateX=e.payload},setCrosshairCoordinateY:(t,e)=>{t.crosshairCoordinateY=e.payload}}}),{setWasClicked:Wv,setCrosshairCoordinateX:gD,setCrosshairCoordinateY:yD}=IE.actions,vD=IE.reducer,wD=eD({reducer:{currentSearchImage:hD,heroes:sD,time:aD,leaderboard:pD,crosshair:vD}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ED={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;u||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();const d=s<<2|a>>4;if(r.push(d),l!==64){const f=a<<4&240|l>>2;if(r.push(f),h!==64){const p=l<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ID=function(t){const e=xE(t);return ED.encodeByteArray(e,!0)},ac=function(t){return ID(t).replace(/\./g,"")};function uc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xD(n)||(t[n]=uc(t[n],e[n]));return t}function xD(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ac(JSON.stringify(n)),ac(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function _D(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bD(){return typeof self=="object"&&self.self===self}function DD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ND(){return Oi().indexOf("Electron/")>=0}function $D(){const t=Oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OD(){return Oi().indexOf("MSAppHost/")>=0}function PD(){return!_D()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){return typeof indexedDB=="object"}function RD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="FirebaseError";class Zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MD,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zi(i,a,r)}}function LD(t,e){return t.replace(FD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function np(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qv(s)&&Qv(o)){if(!np(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qv(t){return t!==null&&typeof t=="object"}function VD(t,e){const n=new UD(t,e);return n.subscribe.bind(n)}class UD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rd),i.error===void 0&&(i.error=Rd),i.complete===void 0&&(i.complete=Rd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qD(e))try{this.getOrInitializeService({instanceIdentifier:ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ui){return this.instances.has(e)}getOptions(e=ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ui){return this.component?this.component.multipleInstances?e:ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zD(t){return t===ui?void 0:t}function qD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=[];var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const CE={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},GD=ae.INFO,WD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},HD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ym{constructor(e){this.name=e,this._logLevel=GD,this._logHandler=HD,this._userLogHandler=null,Qm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}function QD(t){Qm.forEach(e=>{e.setLogLevel(t)})}function YD(t,e){for(const n of Qm){let r=null;e&&e.level&&(r=CE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:ae[s].toLowerCase(),message:a,args:o,type:i.name})}}}const XD=(t,e)=>e.some(n=>t instanceof n);let Yv,Xv;function JD(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZD(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,rp=new WeakMap,_E=new WeakMap,Md=new WeakMap,Xm=new WeakMap;function eA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Nr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kE.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function tA(t){if(rp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rp.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_E.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nA(t){ip=t(ip)}function rA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ld(this),e,...n);return _E.set(r,e.sort?e.sort():[e]),Nr(r)}:ZD().includes(t)?function(...e){return t.apply(Ld(this),e),Nr(kE.get(this))}:function(...e){return Nr(t.apply(Ld(this),e))}}function iA(t){return typeof t=="function"?rA(t):(t instanceof IDBTransaction&&tA(t),XD(t,JD())?new Proxy(t,ip):t)}function Nr(t){if(t instanceof IDBRequest)return eA(t);if(Md.has(t))return Md.get(t);const e=iA(t);return e!==t&&(Md.set(t,e),Xm.set(e,t)),e}const Ld=t=>Xm.get(t);function sA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Nr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Nr(o.result),u.oldVersion,u.newVersion,Nr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const oA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],Fd=new Map;function Jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fd.get(e))return Fd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oA.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Fd.set(e,s),s}nA(t=>({...t,get:(e,n,r)=>Jv(e,n)||t.get(e,n,r),has:(e,n)=>!!Jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",Zv="0.7.31";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Ym("@firebase/app"),cA="@firebase/app-compat",hA="@firebase/analytics-compat",dA="@firebase/analytics",fA="@firebase/app-check-compat",pA="@firebase/app-check",mA="@firebase/auth",gA="@firebase/auth-compat",yA="@firebase/database",vA="@firebase/database-compat",wA="@firebase/functions",SA="@firebase/functions-compat",EA="@firebase/installations",IA="@firebase/installations-compat",xA="@firebase/messaging",TA="@firebase/messaging-compat",CA="@firebase/performance",kA="@firebase/performance-compat",_A="@firebase/remote-config",bA="@firebase/remote-config-compat",DA="@firebase/storage",AA="@firebase/storage-compat",NA="@firebase/firestore",$A="@firebase/firestore-compat",OA="firebase",PA="9.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]",RA={[sp]:"fire-core",[cA]:"fire-core-compat",[dA]:"fire-analytics",[hA]:"fire-analytics-compat",[pA]:"fire-app-check",[fA]:"fire-app-check-compat",[mA]:"fire-auth",[gA]:"fire-auth-compat",[yA]:"fire-rtdb",[vA]:"fire-rtdb-compat",[wA]:"fire-fn",[SA]:"fire-fn-compat",[EA]:"fire-iid",[IA]:"fire-iid-compat",[xA]:"fire-fcm",[TA]:"fire-fcm-compat",[CA]:"fire-perf",[kA]:"fire-perf-compat",[_A]:"fire-rc",[bA]:"fire-rc-compat",[DA]:"fire-gcs",[AA]:"fire-gcs-compat",[NA]:"fire-fst",[$A]:"fire-fst-compat","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Map,Fa=new Map;function lc(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bE(t,e){t.container.addOrOverwriteComponent(e)}function Gs(t){const e=t.name;if(Fa.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Fa.set(e,t);for(const n of Vr.values())lc(n,t);return!0}function DE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function MA(t,e,n=Mi){DE(t,e).clearInstance(n)}function LA(){Fa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ur=new Ih("app","Firebase",FA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=PA;function AE(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Mi,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ur.create("bad-app-name",{appName:String(r)});const i=Vr.get(r);if(i){if(np(t,i.options)&&np(n,i.config))return i;throw Ur.create("duplicate-app",{appName:r})}const s=new KD(r);for(const a of Fa.values())s.addComponent(a);const o=new VA(t,n,s);return Vr.set(r,o),o}function UA(t=Mi){const e=Vr.get(t);if(!e)throw Ur.create("no-app",{appName:t});return e}function BA(){return Array.from(Vr.values())}async function NE(t){const e=t.name;Vr.has(e)&&(Vr.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function $r(t,e,n){var r;let i=(r=RA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(a.join(" "));return}Gs(new Pi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function $E(t,e){if(t!==null&&typeof t!="function")throw Ur.create("invalid-log-argument");YD(t,e)}function OE(t){QD(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebase-heartbeat-database",zA=1,Va="firebase-heartbeat-store";let Vd=null;function PE(){return Vd||(Vd=sA(jA,zA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Va)}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Vd}async function qA(t){var e;try{return(await PE()).transaction(Va).objectStore(Va).get(RE(t))}catch(n){if(n instanceof Zi)Ri.warn(n.message);else{const r=Ur.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});Ri.warn(r.message)}}}async function e0(t,e){var n;try{const i=(await PE()).transaction(Va,"readwrite");return await i.objectStore(Va).put(e,RE(t)),i.done}catch(r){if(r instanceof Zi)Ri.warn(r.message);else{const i=Ur.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});Ri.warn(i.message)}}}function RE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,GA=30*24*60*60*1e3;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=t0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=GA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=t0(),{heartbeatsToSend:n,unsentEntries:r}=HA(this._heartbeatsCache.heartbeats),i=ac(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function t0(){return new Date().toISOString().substring(0,10)}function HA(t,e=KA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),n0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),n0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?RD().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await qA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function n0(t){return ac(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){Gs(new Pi("platform-logger",e=>new uA(e),"PRIVATE")),Gs(new Pi("heartbeat",e=>new WA(e),"PRIVATE")),$r(sp,Zv,t),$r(sp,Zv,"esm2017"),$r("fire-js","")}YA("");const XA=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Jm,_DEFAULT_ENTRY_NAME:Mi,_addComponent:lc,_addOrOverwriteComponent:bE,_apps:Vr,_clearComponents:LA,_components:Fa,_getProvider:DE,_registerComponent:Gs,_removeServiceInstance:MA,deleteApp:NE,getApp:UA,getApps:BA,initializeApp:AE,onLog:$E,registerVersion:$r,setLogLevel:OE,FirebaseError:Zi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this._delegate=e,this.firebase=n,lc(e,new Pi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),NE(this._delegate)))}_getService(e,n=Mi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Mi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){lc(this._delegate,e)}_addOrOverwriteComponent(e){bE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},r0=new Ih("app-compat","Firebase",ZA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:$r,setLogLevel:OE,onLog:$E,apps:null,SDK_VERSION:Jm,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:XA}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function i(l){if(l=l||Mi,!Hv(e,l))throw r0.create("no-app",{appName:l});return e[l]}i.App=t;function s(l,c={}){const h=AE(l,c);if(Hv(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const c=l.name,h=c.replace("-compat","");if(Gs(l)&&l.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw r0.create("invalid-app-argument",{appName:c});return f[h]()};l.serviceProps!==void 0&&uc(d,l.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[h]:null}function u(l,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){const t=eN(JA);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:ME,extendNamespace:e,createSubscribe:VD,ErrorFactory:Ih,deepExtend:uc});function e(n){uc(t,n)}return t}const tN=ME();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Ym("@firebase/app-compat"),nN="@firebase/app-compat",rN="0.1.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){$r(nN,rN,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(bD()&&self.firebase!==void 0){i0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&i0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const xh=tN;iN();var sN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,Zm=Zm||{},W=sN||self;function cc(){}function op(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oN(t){return Object.prototype.hasOwnProperty.call(t,Ud)&&t[Ud]||(t[Ud]=++aN)}var Ud="closure_uid_"+(1e9*Math.random()>>>0),aN=0;function uN(t,e,n){return t.call.apply(t.bind,arguments)}function lN(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function vt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?vt=uN:vt=lN,vt.apply(null,arguments)}function Zu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Et(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Xr(){this.s=this.s,this.o=this.o}var cN=0;Xr.prototype.s=!1;Xr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),cN!=0)&&oN(this)};Xr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const LE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},FE=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function hN(t){e:{var e=n$;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function s0(t){return Array.prototype.concat.apply([],arguments)}function eg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function hc(t){return/^[\s\xa0]*$/.test(t)}var o0=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Rt(t,e){return t.indexOf(e)!=-1}function Bd(t,e){return t<e?-1:t>e?1:0}var Mt;e:{var a0=W.navigator;if(a0){var u0=a0.userAgent;if(u0){Mt=u0;break e}}Mt=""}function tg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function VE(t){const e={};for(const n in t)e[n]=t[n];return e}var l0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UE(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<l0.length;s++)n=l0[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ng(t){return ng[" "](t),t}ng[" "]=cc;function dN(t){var e=mN;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var fN=Rt(Mt,"Opera"),Ws=Rt(Mt,"Trident")||Rt(Mt,"MSIE"),BE=Rt(Mt,"Edge"),ap=BE||Ws,jE=Rt(Mt,"Gecko")&&!(Rt(Mt.toLowerCase(),"webkit")&&!Rt(Mt,"Edge"))&&!(Rt(Mt,"Trident")||Rt(Mt,"MSIE"))&&!Rt(Mt,"Edge"),pN=Rt(Mt.toLowerCase(),"webkit")&&!Rt(Mt,"Edge");function zE(){var t=W.document;return t?t.documentMode:void 0}var dc;e:{var jd="",zd=function(){var t=Mt;if(jE)return/rv:([^\);]+)(\)|;)/.exec(t);if(BE)return/Edge\/([\d\.]+)/.exec(t);if(Ws)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(pN)return/WebKit\/(\S+)/.exec(t);if(fN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zd&&(jd=zd?zd[1]:""),Ws){var qd=zE();if(qd!=null&&qd>parseFloat(jd)){dc=String(qd);break e}}dc=jd}var mN={};function gN(){return dN(function(){let t=0;const e=o0(String(dc)).split("."),n=o0("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Bd(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Bd(i[2].length==0,s[2].length==0)||Bd(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var up;if(W.document&&Ws){var c0=zE();up=c0||parseInt(dc,10)||void 0}else up=void 0;var yN=up,vN=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{W.addEventListener("test",cc,e),W.removeEventListener("test",cc,e)}catch{}return t}();function _t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};function Ua(t,e){if(_t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(jE){e:{try{ng(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ua.Z.h.call(this)}}Et(Ua,_t);var wN={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pu="closure_listenable_"+(1e6*Math.random()|0),SN=0;function EN(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++SN,this.ca=this.fa=!1}function Th(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ch(t){this.src=t,this.g={},this.h=0}Ch.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=cp(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new EN(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function lp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=LE(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Th(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cp(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var rg="closure_lm_"+(1e6*Math.random()|0),Kd={};function qE(t,e,n,r,i){if(r&&r.once)return GE(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qE(t,e[s],n,r,i);return null}return n=og(n),t&&t[pu]?t.N(e,n,fu(r)?!!r.capture:!!r,i):KE(t,e,n,!1,r,i)}function KE(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=fu(i)?!!i.capture:!!i,a=sg(t);if(a||(t[rg]=a=new Ch(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=IN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vN||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(HE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function IN(){function t(n){return e.call(t.src,t.listener,n)}var e=xN;return t}function GE(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)GE(t,e[s],n,r,i);return null}return n=og(n),t&&t[pu]?t.O(e,n,fu(r)?!!r.capture:!!r,i):KE(t,e,n,!0,r,i)}function WE(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)WE(t,e[s],n,r,i);else r=fu(r)?!!r.capture:!!r,n=og(n),t&&t[pu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=cp(s,n,r,i),-1<n&&(Th(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cp(e,n,r,i)),(n=-1<t?e[t]:null)&&ig(n))}function ig(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[pu])lp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(HE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sg(e))?(lp(n,t),n.h==0&&(n.src=null,e[rg]=null)):Th(t)}}}function HE(t){return t in Kd?Kd[t]:Kd[t]="on"+t}function xN(t,e){if(t.ca)t=!0;else{e=new Ua(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ig(t),t=n.call(r,e)}return t}function sg(t){return t=t[rg],t instanceof Ch?t:null}var Gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function og(t){return typeof t=="function"?t:(t[Gd]||(t[Gd]=function(e){return t.handleEvent(e)}),t[Gd])}function ot(){Xr.call(this),this.i=new Ch(this),this.P=this,this.I=null}Et(ot,Xr);ot.prototype[pu]=!0;ot.prototype.removeEventListener=function(t,e,n,r){WE(this,t,e,n,r)};function wt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new _t(e,t);else if(e instanceof _t)e.target=e.target||t;else{var i=e;e=new _t(r,t),UE(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=el(o,r,!0,e)&&i}if(o=e.g=t,i=el(o,r,!0,e)&&i,i=el(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=el(o,r,!1,e)&&i}ot.prototype.M=function(){if(ot.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Th(n[r]);delete t.g[e],t.h--}}this.I=null};ot.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function el(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&lp(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var ag=W.JSON.stringify;function TN(){var t=YE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class CN{constructor(){this.h=this.g=null}add(e,n){const r=QE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var QE=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new kN,t=>t.reset());class kN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _N(t){W.setTimeout(()=>{throw t},0)}function ug(t,e){hp||bN(),dp||(hp(),dp=!0),YE.add(t,e)}var hp;function bN(){var t=W.Promise.resolve(void 0);hp=function(){t.then(DN)}}var dp=!1,YE=new CN;function DN(){for(var t;t=TN();){try{t.h.call(t.g)}catch(n){_N(n)}var e=QE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}dp=!1}function kh(t,e){ot.call(this),this.h=t||1,this.g=e||W,this.j=vt(this.kb,this),this.l=Date.now()}Et(kh,ot);V=kh.prototype;V.da=!1;V.S=null;V.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wt(this,"tick"),this.da&&(lg(this),this.start()))}};V.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function lg(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}V.M=function(){kh.Z.M.call(this),lg(this),delete this.g};function cg(t,e,n){if(typeof t=="function")n&&(t=vt(t,n));else if(t&&typeof t.handleEvent=="function")t=vt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:W.setTimeout(t,e||0)}function XE(t){t.g=cg(()=>{t.g=null,t.i&&(t.i=!1,XE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AN extends Xr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XE(this)}M(){super.M(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ba(t){Xr.call(this),this.h=t,this.g={}}Et(Ba,Xr);var h0=[];function JE(t,e,n,r){Array.isArray(n)||(n&&(h0[0]=n.toString()),n=h0);for(var i=0;i<n.length;i++){var s=qE(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ZE(t){tg(t.g,function(e,n){this.g.hasOwnProperty(n)&&ig(e)},t),t.g={}}Ba.prototype.M=function(){Ba.Z.M.call(this),ZE(this)};Ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _h(){this.g=!0}_h.prototype.Aa=function(){this.g=!1};function NN(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function $N(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ts(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+PN(t,n)+(r?" "+r:"")})}function ON(t,e){t.info(function(){return"TIMEOUT: "+e})}_h.prototype.info=function(){};function PN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return ag(n)}catch{return e}}var es={},d0=null;function bh(){return d0=d0||new ot}es.Ma="serverreachability";function eI(t){_t.call(this,es.Ma,t)}Et(eI,_t);function ja(t){const e=bh();wt(e,new eI(e))}es.STAT_EVENT="statevent";function tI(t,e){_t.call(this,es.STAT_EVENT,t),this.stat=e}Et(tI,_t);function Lt(t){const e=bh();wt(e,new tI(e,t))}es.Na="timingevent";function nI(t,e){_t.call(this,es.Na,t),this.size=e}Et(nI,_t);function mu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){t()},e)}var Dh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},rI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hg(){}hg.prototype.h=null;function f0(t){return t.h||(t.h=t.i())}function iI(){}var gu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dg(){_t.call(this,"d")}Et(dg,_t);function fg(){_t.call(this,"c")}Et(fg,_t);var fp;function Ah(){}Et(Ah,hg);Ah.prototype.g=function(){return new XMLHttpRequest};Ah.prototype.i=function(){return{}};fp=new Ah;function yu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ba(this),this.P=RN,t=ap?125:void 0,this.W=new kh(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sI}function sI(){this.i=null,this.g="",this.h=!1}var RN=45e3,pp={},fc={};V=yu.prototype;V.setTimeout=function(t){this.P=t};function mp(t,e,n){t.K=1,t.v=$h(nr(e)),t.s=n,t.U=!0,oI(t,null)}function oI(t,e){t.F=Date.now(),vu(t),t.A=nr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),fI(n.h,"t",r),t.C=0,n=t.l.H,t.h=new sI,t.g=OI(t.l,n?e:null,!t.s),0<t.O&&(t.L=new AN(vt(t.Ia,t,t.g),t.O)),JE(t.V,t.g,"readystatechange",t.gb),e=t.H?VE(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ja(),NN(t.j,t.u,t.A,t.m,t.X,t.s)}V.gb=function(t){t=t.target;const e=this.L;e&&Hn(t)==3?e.l():this.Ia(t)};V.Ia=function(t){try{if(t==this.g)e:{const c=Hn(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||ap||this.g&&(this.h.h||this.g.ga()||y0(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?ja(3):ja(2)),Nh(this);var n=this.g.ba();this.N=n;t:if(aI(this)){var r=y0(this.g);t="";var i=r.length,s=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),oa(this);var o="";break t}this.h.i=new W.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,$N(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hc(a)){var l=a;break t}}l=null}if(n=l)Ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gp(this,n);else{this.i=!1,this.o=3,Lt(12),wi(this),oa(this);break e}}this.U?(uI(this,c,o),ap&&this.i&&c==3&&(JE(this.V,this.W,"tick",this.fb),this.W.start())):(Ts(this.j,this.m,o,null),gp(this,o)),c==4&&wi(this),this.i&&!this.I&&(c==4?DI(this.l,this):(this.i=!1,vu(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Lt(12)):(this.o=0,Lt(13)),wi(this),oa(this)}}}catch{}finally{}};function aI(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function uI(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=MN(t,n),i==fc){e==4&&(t.o=4,Lt(14),r=!1),Ts(t.j,t.m,null,"[Incomplete Response]");break}else if(i==pp){t.o=4,Lt(15),Ts(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ts(t.j,t.m,i,null),gp(t,i);aI(t)&&i!=fc&&i!=pp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Lt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ig(e),e.L=!0,Lt(11))):(Ts(t.j,t.m,n,"[Invalid Chunked Response]"),wi(t),oa(t))}V.fb=function(){if(this.g){var t=Hn(this.g),e=this.g.ga();this.C<e.length&&(Nh(this),uI(this,t,e),this.i&&t!=4&&vu(this))}};function MN(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?fc:(n=Number(e.substring(n,r)),isNaN(n)?pp:(r+=1,r+n>e.length?fc:(e=e.substr(r,n),t.C=r+n,e)))}V.cancel=function(){this.I=!0,wi(this)};function vu(t){t.Y=Date.now()+t.P,lI(t,t.P)}function lI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=mu(vt(t.eb,t),e)}function Nh(t){t.B&&(W.clearTimeout(t.B),t.B=null)}V.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ON(this.j,this.A),this.K!=2&&(ja(),Lt(17)),wi(this),this.o=2,oa(this)):lI(this,this.Y-t)};function oa(t){t.l.G==0||t.I||DI(t.l,t)}function wi(t){Nh(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,lg(t.W),ZE(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function gp(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||yp(n.i,t))){if(n.I=t.N,!t.J&&yp(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)yc(n),Rh(n);else break e;Eg(n),Lt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=mu(vt(n.ab,n),6e3));if(1>=gI(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Si(n,11)}else if((t.J||n.g==t)&&yc(n),!hc(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.U=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.J=l[1],n.la=l[2];const c=l[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=l[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(Rt(p,"spdy")||Rt(p,"quic")||Rt(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(gg(s,s.h),s.h=null))}if(r.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.sa=y,ke(r.F,r.D,y))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=$I(r,r.H?r.la:null,r.W),o.J){yI(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Nh(a),vu(a)),r.g=o}else _I(r);0<n.l.length&&Mh(n)}else l[0]!="stop"&&l[0]!="close"||Si(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Si(n,7):Sg(n):l[0]!="noop"&&n.j&&n.j.wa(l),n.A=0)}}ja(4)}catch{}}function LN(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(op(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pg(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(op(t)||typeof t=="string")FE(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(op(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=LN(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ho(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ho)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}V=ho.prototype;V.R=function(){mg(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};V.T=function(){return mg(this),this.g.concat()};function mg(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Li(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Li(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}V.get=function(t,e){return Li(this.h,t)?this.h[t]:e};V.set=function(t,e){Li(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};V.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Li(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var cI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function FN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Fi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Fi){this.g=e!==void 0?e:t.g,pc(this,t.j),this.s=t.s,mc(this,t.i),gc(this,t.m),this.l=t.l,e=t.h;var n=new za;n.i=e.i,e.g&&(n.g=new ho(e.g),n.h=e.h),p0(this,n),this.o=t.o}else t&&(n=String(t).match(cI))?(this.g=!!e,pc(this,n[1]||"",!0),this.s=aa(n[2]||""),mc(this,n[3]||"",!0),gc(this,n[4]),this.l=aa(n[5]||"",!0),p0(this,n[6]||"",!0),this.o=aa(n[7]||"")):(this.g=!!e,this.h=new za(null,this.g))}Fi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ho(e,m0,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ho(e,m0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Ho(n,n.charAt(0)=="/"?zN:jN,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ho(n,KN)),t.join("")};function nr(t){return new Fi(t)}function pc(t,e,n){t.j=n?aa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mc(t,e,n){t.i=n?aa(e,!0):e}function gc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function p0(t,e,n){e instanceof za?(t.h=e,GN(t.h,t.g)):(n||(e=Ho(e,qN)),t.h=new za(e,t.g))}function ke(t,e,n){t.h.set(e,n)}function $h(t){return ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function VN(t){return t instanceof Fi?nr(t):new Fi(t,void 0)}function UN(t,e,n,r){var i=new Fi(null,void 0);return t&&pc(i,t),e&&mc(i,e),n&&gc(i,n),r&&(i.l=r),i}function aa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ho(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,BN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var m0=/[#\/\?@]/g,jN=/[#\?:]/g,zN=/[#\?]/g,qN=/[#\?@]/g,KN=/#/g;function za(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jr(t){t.g||(t.g=new ho,t.h=0,t.i&&FN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=za.prototype;V.add=function(t,e){Jr(this),this.i=null,t=fo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function hI(t,e){Jr(t),e=fo(t,e),Li(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Li(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&mg(t)))}function dI(t,e){return Jr(t),e=fo(t,e),Li(t.g.h,e)}V.forEach=function(t,e){Jr(this),this.g.forEach(function(n,r){FE(n,function(i){t.call(e,i,r,this)},this)},this)};V.T=function(){Jr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};V.R=function(t){Jr(this);var e=[];if(typeof t=="string")dI(this,t)&&(e=s0(e,this.g.get(fo(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=s0(e,t[n])}return e};V.set=function(t,e){return Jr(this),this.i=null,t=fo(this,t),dI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function fI(t,e,n){hI(t,e),0<n.length&&(t.i=null,t.g.set(fo(t,e),eg(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function fo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function GN(t,e){e&&!t.j&&(Jr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hI(this,r),fI(this,i,n))},t)),t.j=e}var WN=class{constructor(t,e){this.h=t,this.g=e}};function pI(t){this.l=t||HN,W.PerformanceNavigationTiming?(t=W.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(W.g&&W.g.Ea&&W.g.Ea()&&W.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HN=10;function mI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function gI(t){return t.h?1:t.g?t.g.size:0}function yp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function gg(t,e){t.g?t.g.add(e):t.h=e}function yI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}pI.prototype.cancel=function(){if(this.i=vI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function vI(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return eg(t.i)}function yg(){}yg.prototype.stringify=function(t){return W.JSON.stringify(t,void 0)};yg.prototype.parse=function(t){return W.JSON.parse(t,void 0)};function QN(){this.g=new yg}function YN(t,e,n){const r=n||"";try{pg(t,function(i,s){let o=i;fu(i)&&(o=ag(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function XN(t,e){const n=new _h;if(W.Image){const r=new Image;r.onload=Zu(tl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zu(tl,n,r,"TestLoadImage: error",!1,e),r.onabort=Zu(tl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zu(tl,n,r,"TestLoadImage: timeout",!1,e),W.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function tl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function wu(t){this.l=t.$b||null,this.j=t.ib||!1}Et(wu,hg);wu.prototype.g=function(){return new Oh(this.l,this.j)};wu.prototype.i=function(t){return function(){return t}}({});function Oh(t,e){ot.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Et(Oh,ot);var vg=0;V=Oh.prototype;V.open=function(t,e){if(this.readyState!=vg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qa(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||W).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Su(this)),this.readyState=vg};V.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wI(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function wI(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}V.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Su(this):qa(this),this.readyState==3&&wI(this)}};V.Ua=function(t){this.g&&(this.response=this.responseText=t,Su(this))};V.Ta=function(t){this.g&&(this.response=t,Su(this))};V.ha=function(){this.g&&Su(this)};function Su(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qa(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function qa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Oh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var JN=W.JSON.parse;function We(t){ot.call(this),this.headers=new ho,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=SI,this.K=this.L=!1}Et(We,ot);var SI="",ZN=/^https?$/i,e$=["POST","PUT"];V=We.prototype;V.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fp.g(),this.C=this.u?f0(this.u):f0(fp),this.g.onreadystatechange=vt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){g0(this,s);return}t=n||"";const i=new ho(this.headers);r&&pg(r,function(s,o){i.set(o,s)}),r=hN(i.T()),n=W.FormData&&t instanceof W.FormData,!(0<=LE(e$,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xI(this),0<this.B&&((this.K=t$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vt(this.pa,this)):this.A=cg(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){g0(this,s)}};function t$(t){return Ws&&gN()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function n$(t){return t.toLowerCase()=="content-type"}V.pa=function(){typeof Zm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wt(this,"timeout"),this.abort(8))};function g0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,EI(t),Ph(t)}function EI(t){t.D||(t.D=!0,wt(t,"complete"),wt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wt(this,"complete"),wt(this,"abort"),Ph(this))};V.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ph(this,!0)),We.Z.M.call(this)};V.Fa=function(){this.s||(this.F||this.v||this.l?II(this):this.cb())};V.cb=function(){II(this)};function II(t){if(t.h&&typeof Zm<"u"&&(!t.C[1]||Hn(t)!=4||t.ba()!=2)){if(t.v&&Hn(t)==4)cg(t.Fa,0,t);else if(wt(t,"readystatechange"),Hn(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(cI)[1]||null;if(!i&&W.self&&W.self.location){var s=W.self.location.protocol;i=s.substr(0,s.length-1)}r=!ZN.test(i?i.toLowerCase():"")}n=r}if(n)wt(t,"complete"),wt(t,"success");else{t.m=6;try{var o=2<Hn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",EI(t)}}finally{Ph(t)}}}}function Ph(t,e){if(t.g){xI(t);const n=t.g,r=t.C[0]?cc:null;t.g=null,t.C=null,e||wt(t,"ready");try{n.onreadystatechange=r}catch{}}}function xI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(W.clearTimeout(t.A),t.A=null)}function Hn(t){return t.g?t.g.readyState:0}V.ba=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}};V.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),JN(e)}};function y0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case SI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}V.Da=function(){return this.m};V.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function r$(t){let e="";return tg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function wg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=r$(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ke(t,e,n))}function Po(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function TI(t){this.za=0,this.l=[],this.h=new _h,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Po("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Po("baseRetryDelayMs",5e3,t),this.$a=Po("retryDelaySeedMs",1e4,t),this.Ya=Po("forwardChannelMaxRetries",2,t),this.ra=Po("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new pI(t&&t.concurrentRequestLimit),this.Ca=new QN,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}V=TI.prototype;V.ma=8;V.G=1;function Sg(t){if(CI(t),t.G==3){var e=t.V++,n=nr(t.F);ke(n,"SID",t.J),ke(n,"RID",e),ke(n,"TYPE","terminate"),Eu(t,n),e=new yu(t,t.h,e,void 0),e.K=2,e.v=$h(nr(n)),n=!1,W.navigator&&W.navigator.sendBeacon&&(n=W.navigator.sendBeacon(e.v.toString(),"")),!n&&W.Image&&(new Image().src=e.v,n=!0),n||(e.g=OI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),vu(e)}NI(t)}V.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Rh(t){t.g&&(Ig(t),t.g.cancel(),t.g=null)}function CI(t){Rh(t),t.u&&(W.clearTimeout(t.u),t.u=null),yc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&W.clearTimeout(t.m),t.m=null)}function Wd(t,e){t.l.push(new WN(t.Za++,e)),t.G==3&&Mh(t)}function Mh(t){mI(t.i)||t.m||(t.m=!0,ug(t.Ha,t),t.C=0)}function i$(t,e){return gI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=mu(vt(t.Ha,t,e),AI(t,t.C)),t.C++,!0)}V.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new yu(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=VE(s),UE(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kI(this,i,e),n=nr(this.F),ke(n,"RID",t),ke(n,"CVER",22),this.D&&ke(n,"X-HTTP-Session-Id",this.D),Eu(this,n),this.o&&s&&wg(n,this.o,s),gg(this.i,i),this.Ra&&ke(n,"TYPE","init"),this.ja?(ke(n,"$req",e),ke(n,"SID","null"),i.$=!0,mp(i,n,null)):mp(i,n,e),this.G=2}}else this.G==3&&(t?v0(this,t):this.l.length==0||mI(this.i)||v0(this))};function v0(t,e){var n;e?n=e.m:n=t.V++;const r=nr(t.F);ke(r,"SID",t.J),ke(r,"RID",n),ke(r,"AID",t.U),Eu(t,r),t.o&&t.s&&wg(r,t.o,t.s),n=new yu(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=kI(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),gg(t.i,n),mp(n,r,e)}function Eu(t,e){t.j&&pg({},function(n,r){ke(e,r,n)})}function kI(t,e,n){n=Math.min(t.l.length,n);var r=t.j?vt(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].h;const c=i[u].g;if(l-=s,0>l)s=Math.max(0,i[u].h-100),a=!1;else try{YN(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function _I(t){t.g||t.u||(t.Y=1,ug(t.Ga,t),t.A=0)}function Eg(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=mu(vt(t.Ga,t),AI(t,t.A)),t.A++,!0)}V.Ga=function(){if(this.u=null,bI(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=mu(vt(this.bb,this),t)}};V.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Lt(10),Rh(this),bI(this))};function Ig(t){t.B!=null&&(W.clearTimeout(t.B),t.B=null)}function bI(t){t.g=new yu(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=nr(t.oa);ke(e,"RID","rpc"),ke(e,"SID",t.J),ke(e,"CI",t.N?"0":"1"),ke(e,"AID",t.U),Eu(t,e),ke(e,"TYPE","xmlhttp"),t.o&&t.s&&wg(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=$h(nr(e)),n.s=null,n.U=!0,oI(n,t)}V.ab=function(){this.v!=null&&(this.v=null,Rh(this),Eg(this),Lt(19))};function yc(t){t.v!=null&&(W.clearTimeout(t.v),t.v=null)}function DI(t,e){var n=null;if(t.g==e){yc(t),Ig(t),t.g=null;var r=2}else if(yp(t.i,e))n=e.D,yI(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=bh(),wt(r,new nI(r,n)),Mh(t)}else _I(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&i$(t,e)||r==2&&Eg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Si(t,5);break;case 4:Si(t,10);break;case 3:Si(t,6);break;default:Si(t,2)}}}function AI(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Si(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=vt(t.jb,t);n||(n=new Fi("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||pc(n,"https"),$h(n)),XN(n.toString(),r)}else Lt(2);t.G=0,t.j&&t.j.va(e),NI(t),CI(t)}V.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Lt(2)):(this.h.info("Failed to ping google.com"),Lt(1))};function NI(t){t.G=0,t.I=-1,t.j&&((vI(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,eg(t.l),t.l.length=0),t.j.ua())}function $I(t,e,n){let r=VN(n);if(r.i!="")e&&mc(r,e+"."+r.i),gc(r,r.m);else{const i=W.location;r=UN(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&tg(t.aa,function(i,s){ke(r,s,i)}),e=t.D,n=t.sa,e&&n&&ke(r,e,n),ke(r,"VER",t.ma),Eu(t,r),r}function OI(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new We(new wu({ib:!0})):new We(t.qa),e.L=t.H,e}function PI(){}V=PI.prototype;V.xa=function(){};V.wa=function(){};V.va=function(){};V.ua=function(){};V.Oa=function(){};function vc(){if(Ws&&!(10<=Number(yN)))throw Error("Environmental error: no available transport.")}vc.prototype.g=function(t,e){return new on(t,e)};function on(t,e){ot.call(this),this.g=new TI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!hc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hc(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new po(this)}Et(on,ot);on.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ug(vt(t.hb,t,e))),Lt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=$I(t,null,t.W),Mh(t)};on.prototype.close=function(){Sg(this.g)};on.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Wd(this.g,e)}else this.v?(e={},e.__data__=ag(t),Wd(this.g,e)):Wd(this.g,t)};on.prototype.M=function(){this.g.j=null,delete this.j,Sg(this.g),delete this.g,on.Z.M.call(this)};function RI(t){dg.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Et(RI,dg);function MI(){fg.call(this),this.status=1}Et(MI,fg);function po(t){this.g=t}Et(po,PI);po.prototype.xa=function(){wt(this.g,"a")};po.prototype.wa=function(t){wt(this.g,new RI(t))};po.prototype.va=function(t){wt(this.g,new MI)};po.prototype.ua=function(){wt(this.g,"b")};vc.prototype.createWebChannel=vc.prototype.g;on.prototype.send=on.prototype.u;on.prototype.open=on.prototype.m;on.prototype.close=on.prototype.close;Dh.NO_ERROR=0;Dh.TIMEOUT=8;Dh.HTTP_ERROR=6;rI.COMPLETE="complete";iI.EventType=gu;gu.OPEN="a";gu.CLOSE="b";gu.ERROR="c";gu.MESSAGE="d";ot.prototype.listen=ot.prototype.N;We.prototype.listenOnce=We.prototype.O;We.prototype.getLastError=We.prototype.La;We.prototype.getLastErrorCode=We.prototype.Da;We.prototype.getStatus=We.prototype.ba;We.prototype.getResponseJson=We.prototype.Qa;We.prototype.getResponseText=We.prototype.ga;We.prototype.send=We.prototype.ea;var s$=function(){return new vc},o$=function(){return bh()},Hd=Dh,a$=rI,u$=es,w0={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},l$=wu,nl=iI,c$=We;const S0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Ym("@firebase/firestore");function vp(){return Br.logLevel}function h$(t){Br.setLogLevel(t)}function k(t,...e){if(Br.logLevel<=ae.DEBUG){const n=e.map(xg);Br.debug(`Firestore (${mo}): ${t}`,...n)}}function Ue(t,...e){if(Br.logLevel<=ae.ERROR){const n=e.map(xg);Br.error(`Firestore (${mo}): ${t}`,...n)}}function Hs(t,...e){if(Br.logLevel<=ae.WARN){const n=e.map(xg);Br.warn(`Firestore (${mo}): ${t}`,...n)}}function xg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw Ue(e),new Error(e)}function z(t,e){t||U()}function d$(t,e){t||U()}function R(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends Zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class p${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m${constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new it;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new it,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new it)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new LI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new nt(e)}}class g${constructor(e,n,r){this.type="FirstParty",this.user=nt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class y${constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new g$(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w${constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(z(typeof n.token=="string"),this.p=n.token,new v$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=S$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Q(t,e){return t<e?-1:t>e?1:0}function Qs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function VI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new _e(0,0))}static max(){return new j(new _e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&U(),r===void 0?r=e.length-n:r>e.length-n&&U(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class re extends Ka{construct(e,n,r){return new re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new C(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new re(n)}static emptyPath(){return new re([])}}const E$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Ka{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return E$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new C(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new C(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new C(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(re.fromString(e))}static fromName(e){return new A(re.fromString(e).popFirst(5))}static empty(){return new A(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function wp(t){return t.fields.find(e=>e.kind===2)}function li(t){return t.fields.filter(e=>e.kind!==2)}UI.UNKNOWN_ID=-1;class I${constructor(e,n){this.fieldPath=e,this.kind=n}}class wc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new wc(0,an.min())}}function BI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new an(i,A.empty(),e)}function jI(t){return new an(t.readTime,t.key,-1)}class an{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new an(j.min(),A.empty(),-1)}static max(){return new an(j.max(),A.empty(),-1)}}function Tg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==zI)throw t;k("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,r)=>{n(e)})}static reject(e){return new S((n,r)=>{r(e)})}static waitFor(e){return new S((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=S.resolve(!1);for(const r of e)n=n.next(i=>i?S.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new S((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new S((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.T=new it,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{n.error?this.T.reject(new ua(e,n.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Cg(r.target.error);this.T.reject(new ua(e,i))}}static open(e,n,r,i){try{return new Lh(n,e.transaction(i,r))}catch(s){throw new ua(n,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new T$(n)}}class _n{constructor(e,n,r){this.name=e,this.version=n,this.P=r,_n.v(Oi())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),hi(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!TE())return!1;if(_n.S())return!0;const e=Oi(),n=_n.v(e),r=0<n&&n<10,i=_n.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.C)==="YES"}static N(e,n){return e.store(n)}static v(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async k(e){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ua(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new C(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new C(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ua(e,o))},i.onupgradeneeded=s=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.P.M(o,i.transaction,s.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.O&&(this.db.onversionchange=n=>this.O(n)),this.db}F(e){this.O=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Lh.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.R(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),await a.A,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&o<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class x${constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return hi(this.$.delete())}}class ua extends C{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ei(t){return t.name==="IndexedDbTransactionError"}class T${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(k("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),hi(this.store.add(e))}get(e){return hi(this.store.get(e)).next(n=>(n===void 0&&(n=null),k("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),hi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),hi(this.store.count())}K(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new S((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new S((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}W(e,n){k("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Y(e){const n=this.cursor({});return new S((r,i)=>{n.onerror=s=>{const o=Cg(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new S((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new x$(a),l=n(a.primaryKey,a.value,u);if(l instanceof S){const c=l.catch(h=>(u.done(),S.reject(h)));r.push(c)}u.isDone?i():u.U===null?a.continue():a.continue(u.U)}}).next(()=>S.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function hi(t){return new S((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Cg(r.target.error);n(i)}})}let E0=!1;function Cg(t){const e=_n.v(Oi());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new C("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return E0||(E0=!0,setTimeout(()=>{throw r},0)),r}}return t}class C${constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}Z(e){k("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{k("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(n){ei(n)?k("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Zr(n)}await this.Z(1)})}}class k${constructor(e,n){this.localStore=e,this.persistence=n}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.et(n,e))}et(e,n){const r=new Set;let i=n,s=!0;return S.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return k("IndexBackiller",`Processing collection: ${o}`),this.nt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}nt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.st(i,s)).next(a=>(k("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}st(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=jI(s);Tg(o,r)>0&&(r=o)}),new an(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.ot=-1;class Re{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:pt.RED,this.left=i!=null?i:pt.EMPTY,this.right=s!=null?s:pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();const e=this.left.check();if(e!==this.right.check())throw U();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(t,e,n,r,i){return this}insert(t,e,n){return new pt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ye(this.comparator);return n.data=e,n}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function as(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new nn([])}unionWith(e){let n=new ye(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Je(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const b$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(z(!!t),typeof t=="string"){let e=0;const n=b$.exec(t);if(z(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vi(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function GI(t){const e=t.mapValue.fields.__previous_value__;return kg(e)?GI(e):e}function Ga(t){const e=jr(t.mapValue.fields.__local_write_time__.timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class rr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return t==null}function Wa(t){return t===0&&1/t==-1/0}function WI(t){return typeof t=="number"&&Number.isInteger(t)&&!Wa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Il={nullValue:"NULL_VALUE"};function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kg(t)?4:HI(t)?9007199254740991:10:U()}function jn(t,e){if(t===e)return!0;const n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ga(t).isEqual(Ga(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=jr(r.timestampValue),o=jr(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Vi(r.bytesValue).isEqual(Vi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Pe(r.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(r.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pe(r.integerValue)===Pe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Pe(r.doubleValue),o=Pe(i.doubleValue);return s===o?Wa(s)===Wa(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(I0(s)!==I0(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!jn(s[a],o[a])))return!1;return!0}(t,e);default:return U()}}function Ha(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function zr(t,e){if(t===e)return 0;const n=Ui(t),r=Ui(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Pe(i.integerValue||i.doubleValue),a=Pe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return T0(t.timestampValue,e.timestampValue);case 4:return T0(Ga(t),Ga(e));case 5:return Q(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Vi(i),a=Vi(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=Q(o[u],a[u]);if(l!==0)return l}return Q(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Q(Pe(i.latitude),Pe(s.latitude));return o!==0?o:Q(Pe(i.longitude),Pe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=zr(o[u],a[u]);if(l)return l}return Q(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ir.mapValue&&s===Ir.mapValue)return 0;if(i===Ir.mapValue)return 1;if(s===Ir.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const h=Q(a[c],l[c]);if(h!==0)return h;const d=zr(o[a[c]],u[l[c]]);if(d!==0)return d}return Q(a.length,l.length)}(t.mapValue,e.mapValue);default:throw U()}}function T0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);const n=jr(t),r=jr(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function Rs(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=jr(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,A.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Sp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Sp(r.fields[a])}`;return s+"}"}(t.mapValue):U();var e,n}function Bi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ep(t){return!!t&&"integerValue"in t}function Qa(t){return!!t&&"arrayValue"in t}function C0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xl(t){return!!t&&"mapValue"in t}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=la(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function A$(t){return"nullValue"in t?Il:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Bi(rr.empty(),A.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:U()}function N$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Bi(rr.empty(),A.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ir:U()}function _0(t,e){const n=zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function b0(t,e){const n=zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=la(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mt(la(this.value))}}function QI(t){const e=[];return ts(t.fields,(n,r)=>{const i=new Be([n]);if(xl(r)){const s=QI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new we(e,0,j.min(),j.min(),mt.empty(),0)}static newFoundDocument(e,n,r){return new we(e,1,n,j.min(),r,0)}static newNoDocument(e,n){return new we(e,2,n,j.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new we(e,3,n,j.min(),mt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof we&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new we(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function D0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $$(t,e,n,r,i,s,o)}function ji(t){const e=R(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Rs(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Iu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.ut=n}return e.ut}function O$(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Rs(r.value)}`;var r}).join(", ")}]`),Iu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Rs(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Rs(n)).join(",")),`Target(${e})`}function xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!B$(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!jn(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!O0(t.startAt,e.startAt)&&O0(t.endAt,e.endAt)}function Sc(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ec(t,e){return t.filters.filter(n=>n instanceof gt&&n.field.isEqual(e))}function A0(t,e,n){let r=Il,i=!0;for(const s of Ec(t,e)){let o=Il,a=!0;switch(s.op){case"<":case"<=":o=A$(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Il}_0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function N0(t,e,n){let r=Ir,i=!0;for(const s of Ec(t,e)){let o=Ir,a=!0;switch(s.op){case">=":case">":o=N$(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ir}b0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];b0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class gt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new P$(e,n,r):n==="array-contains"?new L$(e,r):n==="in"?new F$(e,r):n==="not-in"?new V$(e,r):n==="array-contains-any"?new U$(e,r):new gt(e,n,r)}static ct(e,n,r){return n==="in"?new R$(e,r):new M$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(zr(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.at(zr(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return U()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class P$ extends gt{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.at(n)}}class R$ extends gt{constructor(e,n){super(e,"in",n),this.keys=YI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class M$ extends gt{constructor(e,n){super(e,"not-in",n),this.keys=YI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class L$ extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qa(n)&&Ha(n.arrayValue,this.value)}}class F$ extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ha(this.value.arrayValue,n)}}class V$ extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ha(this.value.arrayValue,n)}}class U$ extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ha(this.value.arrayValue,r))}}class qr{constructor(e,n){this.position=e,this.inclusive=n}}class Ms{constructor(e,n="asc"){this.field=e,this.dir=n}}function B$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function $0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=A.comparator(A.fromName(o.referenceValue),n.key):r=zr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function O0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}}function XI(t,e,n,r,i,s,o,a){return new or(t,e,n,r,i,s,o,a)}function go(t){return new or(t)}function P0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _g(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bg(t){for(const e of t.filters)if(e.ht())return e.field;return null}function Dg(t){return t.collectionGroup!==null}function Ys(t){const e=R(t);if(e.lt===null){e.lt=[];const n=bg(e),r=_g(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new Ms(n)),e.lt.push(new Ms(Be.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ms(Be.keyField(),s))}}}return e.lt}function Jt(t){const e=R(t);if(!e.ft)if(e.limitType==="F")e.ft=D0(e.path,e.collectionGroup,Ys(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ys(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Ms(s.field,o))}const r=e.endAt?new qr(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new qr(e.startAt.position,e.startAt.inclusive):null;e.ft=D0(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function Ic(t,e,n){return new or(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tu(t,e){return xu(Jt(t),Jt(e))&&t.limitType===e.limitType}function JI(t){return`${ji(Jt(t))}|lt:${t.limitType}`}function Ip(t){return`Query(target=${O$(Jt(t))}; limitType=${t.limitType})`}function Ag(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):A.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=$0(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ys(n),r)||n.endAt&&!function(i,s,o){const a=$0(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ys(n),r))}(t,e)}function ZI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ex(t){return(e,n)=>{let r=!1;for(const i of Ys(t)){const s=j$(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function j$(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?zr(a,u):U()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return U()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function nx(t){return{integerValue:""+t}}function rx(t,e){return WI(e)?nx(e):tx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function z$(t,e,n){return t instanceof Xs?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof zi?sx(t,e):t instanceof qi?ox(t,e):function(r,i){const s=ix(r,i),o=R0(s)+R0(r._t);return Ep(s)&&Ep(r._t)?nx(o):tx(r.wt,o)}(t,e)}function q$(t,e,n){return t instanceof zi?sx(t,e):t instanceof qi?ox(t,e):n}function ix(t,e){return t instanceof Js?Ep(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Xs extends Fh{}class zi extends Fh{constructor(e){super(),this.elements=e}}function sx(t,e){const n=ax(e);for(const r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class qi extends Fh{constructor(e){super(),this.elements=e}}function ox(t,e){let n=ax(e);for(const r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}class Js extends Fh{constructor(e,n){super(),this.wt=e,this._t=n}}function R0(t){return Pe(t.integerValue||t.doubleValue)}function ax(t){return Qa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.field=e,this.transform=n}}function K$(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof zi&&r instanceof zi||n instanceof qi&&r instanceof qi?Qs(n.elements,r.elements,jn):n instanceof Js&&r instanceof Js?jn(n._t,r._t):n instanceof Xs&&r instanceof Xs}(t.transform,e.transform)}class G${constructor(e,n){this.version=e,this.transformResults=n}}class De{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new De}static exists(e){return new De(void 0,e)}static updateTime(e){return new De(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vh{}function ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vo(t.key,De.none()):new yo(t.key,t.data,De.none());{const n=t.data,r=mt.empty();let i=new ye(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ar(t.key,r,new nn(i.toArray()),De.none())}}function W$(t,e,n){t instanceof yo?function(r,i,s){const o=r.value.clone(),a=L0(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(r,i,s){if(!Tl(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=L0(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(lx(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof yo?function(i,s,o,a){if(!Tl(i.precondition,s))return o;const u=i.value.clone(),l=F0(i.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ar?function(i,s,o,a){if(!Tl(i.precondition,s))return o;const u=F0(i.fieldTransforms,a,s),l=s.data;return l.setAll(lx(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Tl(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function H$(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ix(r.transform,i||null);s!=null&&(n===null&&(n=mt.empty()),n.set(r.field,s))}return n||null}function M0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Qs(n,r,(i,s)=>K$(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends Vh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ar extends Vh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function L0(t,e,n){const r=new Map;z(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,q$(o,a,n[i]))}return r}function F0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,z$(s,o,e))}return r}class vo extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ng extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ne;function cx(t){switch(t){default:return U();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function hx(t){if(t===void 0)return Ue("GRPC error has no .code"),x.UNKNOWN;switch(t){case qe.OK:return x.OK;case qe.CANCELLED:return x.CANCELLED;case qe.UNKNOWN:return x.UNKNOWN;case qe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case qe.INTERNAL:return x.INTERNAL;case qe.UNAVAILABLE:return x.UNAVAILABLE;case qe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case qe.NOT_FOUND:return x.NOT_FOUND;case qe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case qe.ABORTED:return x.ABORTED;case qe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case qe.DATA_LOSS:return x.DATA_LOSS;default:return U()}}(ne=qe||(qe={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return KI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=new Re(A.comparator);function Ht(){return Y$}const dx=new Re(A.comparator);function Qo(...t){let e=dx;for(const n of t)e=e.insert(n.key,n);return e}function fx(t){let e=dx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pn(){return ha()}function px(){return ha()}function ha(){return new ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const X$=new Re(A.comparator),J$=new ye(A.comparator);function Y(...t){let e=J$;for(const n of t)e=e.add(n);return e}const Z$=new ye(Q);function Uh(){return Z$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n)),new ku(j.min(),r,Uh(),Ht(),Y())}}class _u{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new _u(Je.EMPTY_BYTE_STRING,n,Y(),Y(),Y())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class mx{constructor(e,n){this.targetId=e,this.It=n}}class gx{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class V0{constructor(){this.Tt=0,this.Et=B0(),this.At=Je.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Y(),n=Y(),r=Y();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:U()}}),new _u(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=B0()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class eO{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Ht(),this.Bt=U0(),this.Lt=new ye(Q)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:U()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(Sc(s))if(r===0){const o=new A(s.path);this.Kt(n,o,we.newNoDocument(o,j.min()))}else z(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&Sc(a.target)){const u=new A(a.target.path);this.$t.get(u)!==null||this.Xt(o,u)||this.Kt(o,u,we.newNoDocument(u,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=Y();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ht(u);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new ku(e,n,this.Lt,this.$t,r);return this.$t=Ht(),this.Bt=U0(),this.Lt=new ye(Q),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new V0,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new ye(Q),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new V0),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function U0(){return new Re(A.comparator)}function B0(){return new Re(A.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),nO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class rO{constructor(e,n){this.databaseId=e,this.dt=n}}function Ya(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yx(t,e){return t.dt?e.toBase64():e.toUint8Array()}function iO(t,e){return Ya(t,e.toTimestamp())}function st(t){return z(!!t),j.fromTimestamp(function(e){const n=jr(e);return new _e(n.seconds,n.nanos)}(t))}function $g(t,e){return function(n){return new re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function vx(t){const e=re.fromString(t);return z(kx(e)),e}function Xa(t,e){return $g(t.databaseId,e.path)}function Un(t,e){const n=vx(e);if(n.get(1)!==t.databaseId.projectId)throw new C(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(Sx(n))}function xp(t,e){return $g(t.databaseId,e)}function wx(t){const e=vx(t);return e.length===4?re.emptyPath():Sx(e)}function Ja(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sx(t){return z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function j0(t,e,n){return{name:Xa(t,e),fields:n.value.mapValue.fields}}function Ex(t,e,n){const r=Un(t,e.name),i=st(e.updateTime),s=new mt({mapValue:{fields:e.fields}}),o=we.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function sO(t,e){return"found"in e?function(n,r){z(!!r.found),r.found.name,r.found.updateTime;const i=Un(n,r.found.name),s=st(r.found.updateTime),o=new mt({mapValue:{fields:r.found.fields}});return we.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){z(!!r.missing),z(!!r.readTime);const i=Un(n,r.missing),s=st(r.readTime);return we.newNoDocument(i,s)}(t,e):U()}function oO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:U()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.dt?(z(l===void 0||typeof l=="string"),Je.fromBase64String(l||"")):(z(l===void 0||l instanceof Uint8Array),Je.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=u.code===void 0?x.UNKNOWN:hx(u.code);return new C(l,u.message||"")}(o);n=new gx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Un(t,r.document.name),s=st(r.document.updateTime),o=new mt({mapValue:{fields:r.document.fields}}),a=we.newFoundDocument(i,s,o),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Cl(u,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Un(t,r.document),s=r.readTime?st(r.readTime):j.min(),o=we.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Cl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Un(t,r.document),s=r.removedTargetIds||[];n=new Cl([],s,i,null)}else{if(!("filter"in e))return U();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new Q$(i),o=r.targetId;n=new mx(o,s)}}return n}function Za(t,e){let n;if(e instanceof yo)n={update:j0(t,e.key,e.value)};else if(e instanceof vo)n={delete:Xa(t,e.key)};else if(e instanceof ar)n={update:j0(t,e.key,e.data),updateMask:fO(e.fieldMask)};else{if(!(e instanceof Ng))return U();n={verify:Xa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Xs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Js)return{fieldPath:s.field.canonicalString(),increment:o._t};throw U()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:iO(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:U()}(t,e.precondition)),n}function Tp(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?De.updateTime(st(i.updateTime)):i.exists!==void 0?De.exists(i.exists):De.none()}(e.currentDocument):De.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)z(o.setToServerValue==="REQUEST_TIME"),a=new Xs;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];a=new zi(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];a=new qi(l)}else"increment"in o?a=new Js(s,o.increment):U();const u=Be.fromServerFormat(o.fieldPath);return new Cu(u,a)}(t,i)):[];if(e.update){e.update.name;const i=Un(t,e.update.name),s=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new nn(u.map(l=>Be.fromServerFormat(l)))}(e.updateMask);return new ar(i,s,o,n,r)}return new yo(i,s,n,r)}if(e.delete){const i=Un(t,e.delete);return new vo(i,n)}if(e.verify){const i=Un(t,e.verify);return new Ng(i,n)}return U()}function aO(t,e){return t&&t.length>0?(z(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?st(r.updateTime):st(i);return s.isEqual(j.min())&&(s=st(i)),new G$(s,r.transformResults||[])}(n,e))):[]}function Ix(t,e){return{documents:[xp(t,e.path)]}}function xx(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=xp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length===0)return;const l=u.map(c=>function(h){if(h.op==="=="){if(k0(h.value))return{unaryFilter:{field:us(h.field),op:"IS_NAN"}};if(C0(h.value))return{unaryFilter:{field:us(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(k0(h.value))return{unaryFilter:{field:us(h.field),op:"IS_NOT_NAN"}};if(C0(h.value))return{unaryFilter:{field:us(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(h.field),op:cO(h.op),value:h.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(c){return{field:us(c.field),direction:lO(c.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,l){return u.dt||Iu(l)?l:{value:l}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function Tx(t){let e=wx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){z(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=Cx(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Ms(Cs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Iu(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(c){const h=!!c.before,d=c.values||[];return new qr(d,h)}(n.startAt));let l=null;return n.endAt&&(l=function(c){const h=!c.before,d=c.values||[];return new qr(d,h)}(n.endAt)),XI(e,i,o,s,a,"F",u,l)}function uO(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return U()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cx(t){return t?t.unaryFilter!==void 0?[dO(t)]:t.fieldFilter!==void 0?[hO(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Cx(e)).reduce((e,n)=>e.concat(n)):U():[]}function lO(t){return tO[t]}function cO(t){return nO[t]}function us(t){return{fieldPath:t.canonicalString()}}function Cs(t){return Be.fromServerFormat(t.fieldPath)}function hO(t){return gt.create(Cs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(t.fieldFilter.op),t.fieldFilter.value)}function dO(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Cs(t.unaryFilter.field);return gt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Cs(t.unaryFilter.field);return gt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cs(t.unaryFilter.field);return gt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cs(t.unaryFilter.field);return gt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return U()}}function fO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=z0(e)),e=pO(t.get(n),e);return z0(e)}function pO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function z0(t){return t+""}function Rn(t){const e=t.length;if(z(e>=2),e===2)return z(t.charAt(0)===""&&t.charAt(1)===""),re.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&U(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:U()}s=o+2}return new re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e){return[t,Vt(e)]}function _x(t,e,n){return[t,Vt(e),n]}const mO={},gO=["prefixPath","collectionGroup","readTime","documentId"],yO=["prefixPath","collectionGroup","documentId"],vO=["collectionGroup","readTime","prefixPath","documentId"],wO=["canonicalId","targetId"],SO=["targetId","path"],EO=["path","targetId"],IO=["collectionId","parent"],xO=["indexId","uid"],TO=["uid","sequenceNumber"],CO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kO=["indexId","uid","orderedDocumentKey"],_O=["userId","collectionPath","documentId"],bO=["userId","collectionPath","largestBatchId"],DO=["userId","collectionGroup","largestBatchId"],bx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AO=[...bx,"documentOverlays"],Dx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ax=Dx,NO=[...Ax,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends qI{constructor(e,n){super(),this.ee=e,this.currentSequenceNumber=n}}function ut(t,e){const n=R(t);return _n.N(n.ee,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&W$(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=px();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ux(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,r)=>M0(n,r))&&Qs(this.baseMutations,e.baseMutations,(n,r)=>M0(n,r))}}class Pg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){z(e.mutations.length===r.length);let i=X$;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Pg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,i,s=j.min(),o=j.min(),a=Je.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.ne=e}}function $O(t,e){let n;if(e.document)n=Ex(t.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=A.fromSegments(e.noDocument.path),i=Gi(e.noDocument.readTime);n=we.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return U();{const r=A.fromSegments(e.unknownDocument.path),i=Gi(e.unknownDocument.version);n=we.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new _e(r[0],r[1]);return j.fromTimestamp(i)}(e.readTime)),n}function K0(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:Xa(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Ya(i,s.version.toTimestamp())}}(t.ne,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ki(e.version)};else{if(!e.isUnknownDocument())return U();r.unknownDocument={path:n.path.toArray(),version:Ki(e.version)}}return r}function xc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ki(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gi(t){const e=new _e(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function di(t,e){const n=(e.baseMutations||[]).map(s=>Tp(t.ne,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Tp(t.ne,s)),i=_e.fromMillis(e.localWriteTimeMs);return new Og(e.batchId,i,n,r)}function Yo(t){const e=Gi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Gi(t.lastLimboFreeSnapshotVersion):j.min();let r;var i;return t.query.documents!==void 0?(z((i=t.query).documents.length===1),r=Jt(go(wx(i.documents[0])))):r=function(s){return Jt(Tx(s))}(t.query),new Or(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Je.fromBase64String(t.resumeToken))}function $x(t,e){const n=Ki(e.snapshotVersion),r=Ki(e.lastLimboFreeSnapshotVersion);let i;i=Sc(e.target)?Ix(t.ne,e.target):xx(t.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mg(t){const e=Tx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ic(e,e.limit,"L"):e}function Qd(t,e){return new Rg(e.largestBatchId,Tp(t.ne,e.overlayMutation))}function G0(t,e){const n=e.path.lastSegment();return[t,Vt(e.path.popLast()),n]}function W0(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ki(r.readTime),documentKey:Vt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{getBundleMetadata(e,n){return H0(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Gi(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return H0(e).put({bundleId:(r=n).id,createTime:Ki(st(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return Q0(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Mg(i.bundledQuery),readTime:Gi(i.readTime)};var i})}saveNamedQuery(e,n){return Q0(e).put(function(r){return{name:r.name,readTime:Ki(st(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function H0(t){return ut(t,"bundles")}function Q0(t){return ut(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.wt=e,this.userId=n}static se(e,n){const r=n.uid||"";return new Bh(e,r)}getOverlay(e,n){return Ro(e).get(G0(this.userId,n)).next(r=>r?Qd(this.wt,r):null)}getOverlays(e,n){const r=Pn();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Rg(n,o);i.push(this.ie(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Vt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ro(e).W("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Pn(),s=Vt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ro(e).K("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=Qd(this.wt,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Pn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ro(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const h=Qd(this.wt,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ie(e,n){return Ro(e).put(function(r,i,s){const[o,a,u]=G0(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Za(r.ne,s.mutation)}}(this.wt,this.userId,n))}}function Ro(t){return ut(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(Pe(e.integerValue));else if("doubleValue"in e){const r=Pe(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),Wa(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),typeof r=="string"?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Vi(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?HI(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):U()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),A.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}fi.ye=new fi;function PO(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Y0(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=PO(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class RO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ie(r.value),r=n.next();this.Te()}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=n.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=n.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const n=this.Ve(e),r=Y0(n);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}De(e){const n=this.Ve(e),r=Y0(n);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ie(e){const n=255&e;n===0?(this.xe(0),this.xe(255)):n===255?(this.xe(255),this.xe(0)):this.xe(n)}Ae(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MO{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class LO{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Mo{constructor(){this.Oe=new RO,this.Fe=new MO(this.Oe),this.$e=new LO(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return e===0?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pi(this.indexId,this.documentKey,this.arrayValue,r)}}function ri(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=X0(t.arrayValue,e.arrayValue),n!==0?n:(n=X0(t.directionalValue,e.directionalValue),n!==0?n:A.comparator(t.documentKey,e.documentKey)))}function X0(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const n of e.filters){const r=n;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const n=wp(e);if(n!==void 0&&!this.Qe(n))return!1;const r=li(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(this.Ke!==void 0){const o=r[i];if(!this.je(this.Ke,o)||!this.We(this.Ue[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],o))return!1}return!0}Qe(e){for(const n of this.qe)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.ze=new Lg}addToCollectionParentIndex(e,n){return this.ze.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(an.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(an.min())}updateCollectionGroup(e,n,r){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}}class Lg{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ye(re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ye(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new Uint8Array(0);class UO{constructor(e,n){this.user=e,this.databaseId=n,this.He=new Lg,this.Je=new ti(r=>ji(r),(r,i)=>xu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.He.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.He.add(n)});const s={collectionId:r,parent:Vt(i)};return J0(e).put(s)}return S.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[VI(n),""],!1,!0);return J0(e).K(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Rn(o.parent))}return r})}addFieldIndex(e,n){const r=sl(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Fo(e);return s.next(a=>{o.put(W0(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=sl(e),i=Fo(e),s=Lo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Lo(e);let i=!0;const s=new Map;return S.forEach(this.Ye(n),o=>this.Xe(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Y();const a=[];return S.forEach(s,(u,l)=>{var c;k("IndexedDbIndexManager",`Using index ${c=u,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${ji(n)}`);const h=function(v,E){const T=wp(E);if(T===void 0)return null;for(const _ of Ec(v,T.fieldPath))switch(_.op){case"array-contains-any":return _.value.arrayValue.values||[];case"array-contains":return[_.value]}return null}(l,u),d=function(v,E){const T=new Map;for(const _ of li(E))for(const D of Ec(v,_.fieldPath))switch(D.op){case"==":case"in":T.set(_.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return T.set(_.fieldPath.canonicalString(),D.value),Array.from(T.values())}return null}(l,u),f=function(v,E){const T=[];let _=!0;for(const D of li(E)){const $=D.kind===0?A0(v,D.fieldPath,v.startAt):N0(v,D.fieldPath,v.startAt);T.push($.value),_&&(_=$.inclusive)}return new qr(T,_)}(l,u),p=function(v,E){const T=[];let _=!0;for(const D of li(E)){const $=D.kind===0?N0(v,D.fieldPath,v.endAt):A0(v,D.fieldPath,v.endAt);T.push($.value),_&&(_=$.inclusive)}return new qr(T,_)}(l,u),y=this.Ze(u,l,f),w=this.Ze(u,l,p),g=this.tn(u,l,d),m=this.en(u.indexId,h,y,f.inclusive,w,p.inclusive,g);return S.forEach(m,v=>r.j(v,n.limit).next(E=>{E.forEach(T=>{const _=A.fromSegments(T.documentKey);o.has(_)||(o=o.add(_),a.push(_))})}))}).next(()=>a)}return S.resolve(null)})}Ye(e){let n=this.Je.get(e);return n||(n=[e],this.Je.set(e,n),n)}en(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),l=u/(n!=null?n.length:1),c=[];for(let h=0;h<u;++h){const d=n?this.nn(n[h/l]):il,f=this.sn(e,d,r[h%l],i),p=this.rn(e,d,s[h%l],o),y=a.map(w=>this.sn(e,d,w,!0));c.push(...this.createRange(f,p,y))}return c}sn(e,n,r,i){const s=new pi(e,A.empty(),n,r);return i?s:s.Le()}rn(e,n,r,i){const s=new pi(e,A.empty(),n,r);return i?s.Le():s}Xe(e,n){const r=new FO(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.Ge(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return S.forEach(this.Ye(n),i=>this.Xe(e,i).next(s=>{s?r!==0&&s.fields.length<function(o){let a=new ye(Be.comparator),u=!1;for(const l of o.filters){const c=l;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?u=!0:a=a.add(c.field))}for(const l of o.orderBy)l.field.isKeyField()||(a=a.add(l.field));return a.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,n){const r=new Mo;for(const i of li(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Be(i.kind);fi.ye.re(s,o)}return r.Me()}nn(e){const n=new Mo;return fi.ye.re(e,n.Be(0)),n.Me()}un(e,n){const r=new Mo;return fi.ye.re(Bi(this.databaseId,n),r.Be(function(i){const s=li(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Me()}tn(e,n,r){if(r===null)return[];let i=[];i.push(new Mo);let s=0;for(const o of li(e)){const a=r[s++];for(const u of i)if(this.cn(n,o.fieldPath)&&Qa(a))i=this.an(i,o,a);else{const l=u.Be(o.kind);fi.ye.re(a,l)}}return this.hn(i)}Ze(e,n,r){return this.tn(e,n,r.position)}hn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Me();return n}an(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Mo;u.seed(a.Me()),fi.ye.re(o,u.Be(n.kind)),s.push(u)}return s}cn(e,n){return!!e.filters.find(r=>r instanceof gt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=sl(e),i=Fo(e);return(n?r.K("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.K()).next(s=>{const o=[];return S.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(l,c){const h=c?new wc(c.sequenceNumber,new an(Gi(c.readTime),new A(Rn(c.documentKey)),c.largestBatchId)):wc.empty(),d=l.fields.map(([f,p])=>new I$(Be.fromServerFormat(f),p));return new UI(l.indexId,l.collectionGroup,d,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Q(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=sl(e),s=Fo(e);return this.ln(e).next(o=>i.K("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,u=>s.put(W0(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return S.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.fn(e,i,u).next(l=>{const c=this.dn(s,u);return l.isEqual(c)?S.resolve():this._n(e,s,u,l,c)}))))})}wn(e,n,r,i){return Lo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,n.key),documentKey:n.key.path.toArray()})}mn(e,n,r,i){return Lo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Lo(e);let s=new ye(ri);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,n)])},(o,a)=>{s=s.add(new pi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}dn(e,n){let r=new ye(ri);const i=this.on(n,e);if(i==null)return r;const s=wp(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Qa(o))for(const a of o.arrayValue.values||[])r=r.add(new pi(n.indexId,e.key,this.nn(a),i))}else r=r.add(new pi(n.indexId,e.key,il,i));return r}_n(e,n,r,i,s){k("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,l,c,h){const d=a.getIterator(),f=u.getIterator();let p=as(d),y=as(f);for(;p||y;){let w=!1,g=!1;if(p&&y){const m=l(p,y);m<0?g=!0:m>0&&(w=!0)}else p!=null?g=!0:w=!0;w?(c(y),y=as(f)):g?(h(p),p=as(d)):(p=as(d),y=as(f))}}(i,s,ri,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.mn(e,n,r,a))}),S.waitFor(o)}ln(e){let n=1;return Fo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ri(o,a)).filter((o,a,u)=>!a||ri(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ri(o,e),u=ri(o,n);if(a===0)i[0]=e.Le();else if(a>0&&u<0)i.push(o),i.push(o.Le());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,il,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,il,[]]));return s}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Z0)}getMinOffset(e,n){return S.mapArray(this.Ye(n),r=>this.Xe(e,r).next(i=>i||U())).next(Z0)}}function J0(t){return ut(t,"collectionParents")}function Lo(t){return ut(t,"indexEntries")}function sl(t){return ut(t,"indexConfiguration")}function Fo(t){return ut(t,"indexState")}function Z0(t){z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Tg(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new an(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(c,h,d)=>(a++,d.delete()));s.push(u.next(()=>{z(a===1)}));const l=[];for(const c of n.mutations){const h=_x(e,c.key.path,n.batchId);s.push(i.delete(h)),l.push(c.key)}return S.waitFor(s).next(()=>l)}function Tc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw U();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(41943040,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);class jh{constructor(e,n,r,i){this.userId=e,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,n,r,i){z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new jh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=hs(e),o=hr(e);return o.add({}).next(a=>{z(typeof a=="number");const u=new Og(a,n,r,i),l=function(d,f,p){const y=p.baseMutations.map(g=>Za(d.ne,g)),w=p.mutations.map(g=>Za(d.ne,g));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.wt,this.userId,u),c=[];let h=new ye((d,f)=>Q(d.canonicalString(),f.canonicalString()));for(const d of i){const f=_x(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(l)),c.push(s.put(f,mO))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.gn[a]=u.keys()}),S.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return hr(e).get(n).next(r=>r?(z(r.userId===this.userId),di(this.wt,r)):null)}yn(e,n){return this.gn[n]?S.resolve(this.gn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.gn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hr(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(z(a.batchId>=r),s=di(this.wt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hr(e).K("userMutationsIndex",n).next(r=>r.map(i=>di(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=kl(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return hs(e).J({range:i},(o,a,u)=>{const[l,c,h]=o,d=Rn(c);if(l===this.userId&&n.path.isEqual(d))return hr(e).get(h).next(f=>{if(!f)throw U();z(f.userId===this.userId),s.push(di(this.wt,f))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(Q);const i=[];return n.forEach(s=>{const o=kl(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=hs(e).J({range:a},(l,c,h)=>{const[d,f,p]=l,y=Rn(f);d===this.userId&&s.path.isEqual(y)?r=r.add(p):h.done()});i.push(u)}),S.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=kl(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ye(Q);return hs(e).J({range:o},(u,l,c)=>{const[h,d,f]=u,p=Rn(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.pn(e,a))}pn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(hr(e).get(s).next(o=>{if(o===null)throw U();z(o.userId===this.userId),r.push(di(this.wt,o))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Ox(e.ee,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.In(n.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return hs(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Rn(s[1]);i.push(u)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,n){return Px(e,this.userId,n)}Tn(e){return Rx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Px(t,e,n){const r=kl(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return hs(t).J({range:s,H:!0},(a,u,l)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function hr(t){return ut(t,"mutations")}function hs(t){return ut(t,"documentMutations")}function Rx(t){return ut(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Wi(0)}static Rn(){return new Wi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.referenceDelegate=e,this.wt=n}allocateTargetId(e){return this.bn(e).next(n=>{const r=new Wi(n.highestTargetId);return n.highestTargetId=r.next(),this.Pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(n=>j.fromTimestamp(new _e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Pn(e,i)))}addTargetData(e,n){return this.vn(e,n).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(n,r),this.Pn(e,r))))}updateTargetData(e,n){return this.vn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ls(e).delete(n.targetId)).next(()=>this.bn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ls(e).J((o,a)=>{const u=Yo(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ls(e).J((r,i)=>{const s=Yo(i);n(s)})}bn(e){return tw(e).get("targetGlobalKey").next(n=>(z(n!==null),n))}Pn(e,n){return tw(e).put("targetGlobalKey",n)}vn(e,n){return ls(e).put($x(this.wt,n))}Vn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ji(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ls(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=Yo(a);xu(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=vr(e);return n.forEach(o=>{const a=Vt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),S.waitFor(i)}removeMatchingKeys(e,n,r){const i=vr(e);return S.forEach(n,s=>{const o=Vt(s.path);return S.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=vr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=vr(e);let s=Y();return i.J({range:r,H:!0},(o,a,u)=>{const l=Rn(o[1]),c=new A(l);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=Vt(n.path),i=IDBKeyRange.bound([r],[VI(r)],!1,!0);let s=0;return vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}te(e,n){return ls(e).get(n).next(r=>r?Yo(r):null)}}function ls(t){return ut(t,"targets")}function tw(t){return ut(t,"targetGlobal")}function vr(t){return ut(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw([t,e],[n,r]){const i=Q(t,n);return i===0?Q(e,r):i}class jO{constructor(e){this.Sn=e,this.buffer=new ye(nw),this.Dn=0}Cn(){return++this.Dn}xn(e){const n=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();nw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Nn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return this.Nn!==null}kn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ei(n)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zr(n)}await this.kn(3e5)})}}class qO{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.On(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return S.resolve(Wt.ot);const r=new jO(n);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Mn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(ew)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ew):this.$n(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),vp()<=ae.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new qO(r,i)}(this,n)}On(e){const n=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Bn(e){let n=0;return this.Fn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Fn(e,n){return this.Ln(e,(r,i)=>n(i))}addReference(e,n,r){return ol(e,r)}removeReference(e,n,r){return ol(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ol(e,n)}Un(e,n){return function(r,i){let s=!1;return Rx(r).Y(o=>Px(r,o,i).next(a=>(a&&(s=!0),S.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(o,a)=>{if(a<=n){const u=this.Un(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,j.min()),vr(e).delete([0,Vt(o.path)])))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ol(e,n)}Ln(e,n){const r=vr(e);let i,s=Wt.ot;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(s!==Wt.ot&&n(new A(Rn(i)),s),s=l,i=u):s=Wt.ot}).next(()=>{s!==Wt.ot&&n(new A(Rn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ol(t,e){return vr(t).put(function(n,r){return{targetId:0,path:Vt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.changes=new ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,we.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?S.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ii(e).put(r)}removeEntry(e,n,r){return ii(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],xc(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.qn(e,r)))}getEntry(e,n){let r=we.newInvalidDocument(n);return ii(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vo(n))},(i,s)=>{r=this.Kn(n,s)}).next(()=>r)}Gn(e,n){let r={size:0,document:we.newInvalidDocument(n)};return ii(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vo(n))},(i,s)=>{r={document:this.Kn(n,s),size:Tc(s)}}).next(()=>r)}getEntries(e,n){let r=Ht();return this.Qn(e,n,(i,s)=>{const o=this.Kn(i,s);r=r.insert(i,o)}).next(()=>r)}jn(e,n){let r=Ht(),i=new Re(A.comparator);return this.Qn(e,n,(s,o)=>{const a=this.Kn(s,o);r=r.insert(s,a),i=i.insert(s,Tc(o))}).next(()=>({documents:r,Wn:i}))}Qn(e,n,r){if(n.isEmpty())return S.resolve();let i=new ye(sw);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Vo(i.first()),Vo(i.last())),o=i.getIterator();let a=o.getNext();return ii(e).J({index:"documentKeyIndex",range:s},(u,l,c)=>{const h=A.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sw(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.q(Vo(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),xc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ii(e).K(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=Ht();for(const u of o){const l=this.Kn(A.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(l.key,l)}return a})}getAllFromCollectionGroup(e,n,r,i){let s=Ht();const o=iw(n,r),a=iw(n,an.max());return ii(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,c)=>{const h=this.Kn(A.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new WO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return rw(e).get("remoteDocumentGlobalKey").next(n=>(z(!!n),n))}qn(e,n){return rw(e).put("remoteDocumentGlobalKey",n)}Kn(e,n){if(n){const r=$O(this.wt,n);if(!(r.isNoDocument()&&r.version.isEqual(j.min())))return r}return we.newInvalidDocument(e)}}function Lx(t){return new GO(t)}class WO extends Mx{constructor(e,n){super(),this.zn=e,this.trackRemovals=n,this.Hn=new ti(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ye((s,o)=>Q(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Hn.get(s);if(n.push(this.zn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=K0(this.zn.wt,o);i=i.add(s.path.popLast()),r+=Tc(u)-a.size,n.push(this.zn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=K0(this.zn.wt,o.convertToNoDocument(j.min()));n.push(this.zn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.zn.updateMetadata(e,r)),S.waitFor(n)}getFromCache(e,n){return this.zn.Gn(e,n).next(r=>(this.Hn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.zn.jn(e,n).next(({documents:r,Wn:i})=>(i.forEach((s,o)=>{this.Hn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function rw(t){return ut(t,"remoteDocumentGlobal")}function ii(t){return ut(t,"remoteDocumentsV14")}function Vo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iw(t,e){const n=e.documentKey.path.toArray();return[t,xc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sw(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Q(n[s],r[s]),i)return i;return i=Q(n.length,r.length),i||(i=Q(n[n.length-2],r[r.length-2]),i||Q(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(r!==null&&ca(r.mutation,i,nn.empty(),_e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Y()){const i=Pn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Qo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Y()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ht();const o=ha(),a=ha();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof ar)?s=s.insert(l.key,l):c!==void 0&&(o.set(l.key,c.mutation.getFieldMask()),ca(c.mutation,l,c.mutation.getFieldMask(),_e.now()))}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var h;return a.set(l,new HO(c,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ha();let i=new Re((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||nn.empty();c=a.applyToLocalView(l,c),r.set(u,c);const h=(i.get(a.batchId)||Y()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=px();c.forEach(d=>{if(!s.has(d)){const f=ux(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return S.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return A.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):S.resolve(Pn());let a=-1,u=s;return o.next(l=>S.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?S.resolve():this.getBaseDocument(e,c,h).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Y())).next(c=>({batchId:a,changes:fx(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=Qo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Qo();return this.indexManager.getCollectionParents(e,i).next(o=>S.forEach(o,a=>{const u=function(l,c){return new or(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const l=u.getKey();i.get(l)===null&&(i=i.insert(l,we.newInvalidDocument(l)))});let o=Qo();return i.forEach((a,u)=>{const l=s.get(a);l!==void 0&&ca(l.mutation,u,nn.empty(),_e.now()),Ag(n,u)&&(o=o.insert(a,u))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):S.resolve(we.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return S.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:st(r.createTime)}),S.resolve()}getNamedQuery(e,n){return S.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:Mg(r.bundledQuery),readTime:st(r.readTime)}}(n)),S.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.overlays=new Re(A.comparator),this.Xn=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pn();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),S.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),S.resolve()}getOverlaysForCollection(e,n,r){const i=Pn(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Re((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Pn(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Pn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return S.resolve(a)}ie(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rg(n,r));let s=this.Xn.get(n);s===void 0&&(s=Y(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Zn=new ye(et.ts),this.es=new ye(et.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new et(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new et(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new A(new re([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new A(new re([])),r=new et(n,e),i=new et(n,e+1);let s=Y();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new et(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return A.comparator(e.key,n.key)||Q(e.ls,n.ls)}static ns(e,n){return Q(e.ls,n.ls)||A.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new ye(et.ts)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Og(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ws(r),s=i<0?0:i;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(Q);return n.forEach(i=>{const s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),S.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;A.isDocumentKey(s)||(s=s.child(""));const o=new et(new A(s),0);let a=new ye(Q);return this.ds.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.ls)),!0)},o),S.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){z(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return S.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new et(n,0),i=this.ds.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.ps=e,this.docs=new Re(A.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return S.resolve(r?r.document.mutableCopy():we.newInvalidDocument(n))}getEntries(e,n){let r=Ht();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():we.newInvalidDocument(i))}),S.resolve(r)}getAllFromCollection(e,n,r){let i=Ht();const s=new A(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Tg(jI(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return S.resolve(i)}getAllFromCollectionGroup(e,n,r,i){U()}Is(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZO(this)}getSize(e){return S.resolve(this.size)}}class ZO extends Mx{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.persistence=e,this.Ts=new ti(n=>ji(n),xu),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Es=0,this.As=new Fg,this.targetCount=0,this.Rs=Wi.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),S.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Wi(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.vn(n),S.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(s).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),S.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),S.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.bs={},this.overlays={},this.Ps=new Wt(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new eP(this),this.indexManager=new VO,this.remoteDocumentCache=function(r){return new JO(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new Nx(n),this.Ds=new QO(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new XO(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);const i=new tP(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return S.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class tP extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class zh{constructor(e){this.persistence=e,this.ks=new Fg,this.Ms=null}static Os(e){return new zh(e)}get Fs(){if(this.Ms)return this.Ms;throw U()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),S.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Fs,r=>{const i=A.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,j.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return S.or([()=>S.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.wt=e}M(e,n,r,i){const s=new Lh("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",q0,{unique:!0}),a.createObjectStore("documentMutations")}(e),ow(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),ow(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").K().next(l=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",q0,{unique:!0});const c=u.store("mutations"),h=l.map(d=>c.put(d));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Bs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(o=o.next(()=>this.Us(s))),r<8&&i>=8&&(o=o.next(()=>this.qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ks(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:_O});u.createIndex("collectionPathOverlayIndex",bO,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",DO,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:gO});u.createIndex("documentKeyIndex",yO),u.createIndex("collectionGroupIndex",vO)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Qs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:xO}).createIndex("sequenceNumberIndex",TO,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:CO}).createIndex("documentKeyIndex",kO,{unique:!1})}(e))),o}Ls(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Tc(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next(i=>S.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",o).next(a=>S.forEach(a,u=>{z(u.userId===s.userId);const l=di(this.wt,u);return Ox(e,s.userId,l).next(()=>{})}))}))}Us(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new re(o),l=function(c){return[0,Vt(c)]}(u);s.push(n.get(l).next(c=>c?S.resolve():(h=>n.put({targetId:0,path:Vt(h),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(s))})}qs(e,n){e.createObjectStore("collectionParents",{keyPath:IO});const r=n.store("collectionParents"),i=new Lg,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Vt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new re(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],l)=>{const c=Rn(a);return s(c.popLast())}))}Ks(e){const n=e.store("targets");return n.J((r,i)=>{const s=Yo(i),o=$x(this.wt,s);return n.put(o)})}Gs(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(l=o,l.document?new A(re.fromString(l.document.name).popFirst(5)):l.noDocument?A.fromSegments(l.noDocument.path):l.unknownDocument?A.fromSegments(l.unknownDocument.path):U()).path.toArray();var l;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>S.waitFor(i))}Qs(e,n){const r=n.store("mutations"),i=Lx(this.wt),s=new Vx(zh.Os,this.wt.ne);return r.K().next(o=>{const a=new Map;return o.forEach(u=>{var l;let c=(l=a.get(u.userId))!==null&&l!==void 0?l:Y();di(this.wt,u).keys().forEach(h=>c=c.add(h)),a.set(u.userId,c)}),S.forEach(a,(u,l)=>{const c=new nt(l),h=Bh.se(this.wt,c),d=s.getIndexManager(c),f=jh.se(c,this.wt,d,s.referenceDelegate);return new Fx(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Cp(n,Wt.ot),u).next()})})}}function ow(t){t.createObjectStore("targetDocuments",{keyPath:SO}).createIndex("documentTargetsIndex",EO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wO,{unique:!0}),t.createObjectStore("targetGlobal")}const Yd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vg{constructor(e,n,r,i,s,o,a,u,l,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=s,this.window=o,this.document=a,this.Ws=l,this.zs=c,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=d=>Promise.resolve(),!Vg.V())throw new C(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KO(this,i),this.ei=n+"main",this.wt=new Nx(u),this.ni=new _n(this.ei,this.Hs,new nP(this.wt)),this.Vs=new BO(this.referenceDelegate,this.wt),this.remoteDocumentCache=Lx(this.wt),this.Ds=new OO,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,c===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new C(x.FAILED_PRECONDITION,Yd);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Wt(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){return this.ti=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(async()=>{this.started&&await this.ii()}))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>al(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(n=>{n||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(n=>this.isPrimary&&!n?this.li(e).next(()=>!1):!!n&&this.fi(e).next(()=>!0))).catch(e=>{if(ei(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Uo(e).get("owner").next(n=>S.resolve(this.di(n)))}_i(e){return al(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ut(n,"clientMetadata");return r.K().next(i=>{const s=this.gi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.si)for(const n of e)this.si.removeItem(this.yi(n.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?S.resolve(!0):Uo(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)){if(this.di(n)&&this.networkEnabled)return!0;if(!this.di(n)){if(!n.allowTabSynchronization)throw new C(x.FAILED_PRECONDITION,Yd);return!1}}return!(!this.networkEnabled||!this.inForeground)||al(e).K().next(r=>this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&k("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Cp(e,Wt.ot);return this.li(n).next(()=>this._i(n))}),this.ni.close(),this.Ai()}gi(e,n){return e.filter(r=>this.mi(r.updateTimeMs,n)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>al(e).K().next(n=>this.gi(n,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,n){return jh.se(e,this.wt,n,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UO(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Bh.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,n,r){k("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Hs)===15?NO:o===14?Ax:o===13?Dx:o===12?AO:o===11?bx:void U();var o;let a;return this.ni.runTransaction(e,i,s,u=>(a=new Cp(u,this.Ps?this.Ps.next():Wt.ot),n==="readwrite-primary"?this.ai(a).next(l=>!!l||this.hi(a)).next(l=>{if(!l)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new C(x.FAILED_PRECONDITION,zI);return r(a)}).next(l=>this.fi(a).next(()=>l)):this.bi(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}bi(e){return Uo(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)&&!this.di(n)&&!(this.zs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new C(x.FAILED_PRECONDITION,Yd)})}fi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uo(e).put("owner",n)}static V(){return _n.V()}li(e){const n=Uo(e);return n.get("owner").next(r=>this.di(r)?(k("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):S.resolve())}mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground=this.document.visibilityState==="visible")}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Js=()=>{this.Ii(),PD()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var n;try{const r=((n=this.si)===null||n===void 0?void 0:n.getItem(this.yi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uo(t){return ut(t,"owner")}function al(t){return ut(t,"clientMetadata")}function Ug(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=Y(),i=Y();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Bg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){if(P0(n))return S.resolve(null);let r=Jt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ic(n,null,"F"),r=Jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Y(...s);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ki(n,a);return this.Mi(n,l,o,u.readTime)?this.Ci(e,Ic(n,null,"F")):this.Oi(e,l,n,u)}))})))}xi(e,n,r,i){return P0(n)||i.isEqual(j.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Mi(n,o,r,i)?this.Ni(e,n):(vp()<=ae.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ip(n)),this.Oi(e,o,n,BI(i,-1)))})}ki(e,n){let r=new ye(ex(e));return n.forEach((i,s)=>{Ag(e,s)&&(r=r.add(s))}),r}Mi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return vp()<=ae.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Ip(n)),this.Di.getDocumentsMatchingQuery(e,n,an.min())}Oi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new Re(Q),this.Bi=new ti(s=>ji(s),xu),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fx(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function Bx(t,e,n,r){return new rP(t,e,n,r)}async function jx(t,e){const n=R(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Y();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function iP(t,e){const n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,u,l){const c=u.batch,h=c.keys();let d=S.resolve();return h.forEach(f=>{d=d.next(()=>l.getEntry(a,f)).next(p=>{const y=u.docVersions.get(f);z(y!==null),p.version.compareTo(y)<0&&(c.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),l.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Y();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zx(t){const e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function sP(t,e){const n=R(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Vs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(Je.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,c)&&a.push(n.Vs.updateTargetData(s,f))});let u=Ht(),l=Y();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(qx(s,o,e.documentUpdates).next(c=>{u=c.Gi,l=c.Qi})),!r.isEqual(j.min())){const c=n.Vs.getLastRemoteSnapshotVersion(s).next(h=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.$i=i,s))}function qx(t,e,n){let r=Y(),i=Y();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ht();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(j.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Gi:o,Qi:i}})}function oP(t,e){const n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zs(t,e){const n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,S.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new Or(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function eo(t,e,n){const r=R(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ei(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}function Cc(t,e,n){const r=R(t);let i=j.min(),s=Y();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=R(a),h=c.Bi.get(l);return h!==void 0?S.resolve(c.$i.get(h)):c.Vs.getTargetData(u,l)}(r,o,Jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:j.min(),n?s:Y())).next(a=>(Wx(r,ZI(e),a),{documents:a,ji:s})))}function Kx(t,e){const n=R(t),r=R(n.Vs),i=n.$i.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(o=>o?o.target:null))}function Gx(t,e){const n=R(t),r=n.Li.get(e)||j.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ui.getAllFromCollectionGroup(i,e,BI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Wx(n,e,i),i))}function Wx(t,e,n){let r=j.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}async function aP(t,e,n,r){const i=R(t);let s=Y(),o=Ht();for(const l of n){const c=e.Wi(l.metadata.name);l.document&&(s=s.add(c));const h=e.zi(l);h.setReadTime(e.Hi(l.metadata.readTime)),o=o.insert(c,h)}const a=i.Ui.newChangeBuffer({trackRemovals:!0}),u=await Zs(i,function(l){return Jt(go(re.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>qx(l,a,o).next(c=>(a.apply(l),c)).next(c=>i.Vs.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Vs.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.Gi,c.Qi)).next(()=>c.Gi)))}async function uP(t,e,n=Y()){const r=await Zs(t,Jt(Mg(e.bundledQuery))),i=R(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=st(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ds.saveNamedQuery(s,e);const a=r.withResumeToken(Je.EMPTY_BYTE_STRING,o);return i.$i=i.$i.insert(a.targetId,a),i.Vs.updateTargetData(s,a).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}function aw(t,e){return`firestore_clients_${t}_${e}`}function uw(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xd(t,e){return`firestore_targets_${t}_${e}`}class kc{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ji(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new C(i.error.code,i.error.message))),o?new kc(e,n,i.state,s):(Ue("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class da{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ji(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new C(r.error.code,r.error.message))),s?new da(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Uh();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=WI(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new _c(e,s):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class jg{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jg(n.clientId,n.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kp{constructor(){this.activeTargetIds=Uh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jd{constructor(e,n,r,i,s){this.window=e,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Re(Q),this.started=!1,this.ir=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=aw(this.persistenceKey,this.tr),this.ur=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new kp),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.dr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const r of e){if(r===this.tr)continue;const i=this.getItem(aw(this.persistenceKey,r));if(i){const s=_c.Ji(r,i);s&&(this.sr=this.sr.insert(s.clientId,s))}}this._r();const n=this.storage.getItem(this.lr);if(n){const r=this.wr(n);r&&this.mr(r)}for(const r of this.ir)this.nr(r);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,r){this.yr(e,n,r),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Xd(this.persistenceKey,e));if(r){const i=da.Ji(e,r);i&&(n=i.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xd(this.persistenceKey,e))}updateQueryState(e,n,r){this.Tr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return k("SharedClientState","READ",e,n),n}setItem(e,n){k("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const n=e;if(n.storageArea===this.storage){if(k("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.cr.test(n.key)){if(n.newValue==null){const r=this.Rr(n.key);return this.br(r,null)}{const r=this.Pr(n.key,n.newValue);if(r)return this.br(r.clientId,r)}}else if(this.ar.test(n.key)){if(n.newValue!==null){const r=this.vr(n.key,n.newValue);if(r)return this.Vr(r)}}else if(this.hr.test(n.key)){if(n.newValue!==null){const r=this.Sr(n.key,n.newValue);if(r)return this.Dr(r)}}else if(n.key===this.lr){if(n.newValue!==null){const r=this.wr(n.newValue);if(r)return this.mr(r)}}else if(n.key===this.ur){const r=function(i){let s=Wt.ot;if(i!=null)try{const o=JSON.parse(i);z(typeof o=="number"),s=o}catch(o){Ue("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Wt.ot&&this.sequenceNumberHandler(r)}else if(n.key===this.dr){const r=this.Cr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Nr(i)))}}}else this.ir.push(n)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,r){const i=new kc(this.currentUser,e,n,r),s=uw(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const n=uw(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){const n={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(n))}Tr(e,n,r){const i=Xd(this.persistenceKey,e),s=new da(e,n,r);this.setItem(i,s.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.cr.exec(e);return n?n[1]:null}Pr(e,n){const r=this.Rr(e);return _c.Ji(r,n)}vr(e,n){const r=this.ar.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return kc.Ji(new nt(s),i,n)}Sr(e,n){const r=this.hr.exec(e),i=Number(r[1]);return da.Ji(i,n)}wr(e){return jg.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,n){const r=n?this.sr.insert(e,n):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Or(o,a).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=Uh();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Hx{constructor(){this.Fr=new kp,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new kp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);k("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(u=>(k("RestConnection","Received: ",u),u),u=>{throw Hs("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}ao(e,n,r,i,s,o){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){const r=cP[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const a=new c$;a.listenOnce(a$.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Hd.NO_ERROR:const l=a.getResponseJson();k("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Hd.TIMEOUT:k("Connection",'RPC "'+e+'" timed out'),o(new C(x.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const c=a.getStatus();if(k("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(p)>=0?p:x.UNKNOWN}(h.status);o(new C(d,h.message))}else o(new C(x.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new C(x.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{k("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=s$(),o=o$(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new l$({})),this.uo(a.initMessageHeaders,n,r),kD()||AD()||ND()||$D()||OD()||DD()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=i.join("");k("Connection","Creating WebChannel: "+u,a);const l=s.createWebChannel(u,a);let c=!1,h=!1;const d=new hP({jr:p=>{h?k("Connection","Not sending because WebChannel is closed:",p):(c||(k("Connection","Opening WebChannel transport."),l.open(),c=!0),k("Connection","WebChannel sending:",p),l.send(p))},Wr:()=>l.close()}),f=(p,y,w)=>{p.listen(y,g=>{try{w(g)}catch(m){setTimeout(()=>{throw m},0)}})};return f(l,nl.EventType.OPEN,()=>{h||k("Connection","WebChannel transport opened.")}),f(l,nl.EventType.CLOSE,()=>{h||(h=!0,k("Connection","WebChannel transport closed"),d.eo())}),f(l,nl.EventType.ERROR,p=>{h||(h=!0,Hs("Connection","WebChannel transport errored:",p),d.eo(new C(x.UNAVAILABLE,"The operation could not be completed")))}),f(l,nl.EventType.MESSAGE,p=>{var y;if(!h){const w=p.data[0];z(!!w);const g=w,m=g.error||((y=g[0])===null||y===void 0?void 0:y.error);if(m){k("Connection","WebChannel received error:",m);const v=m.status;let E=function(_){const D=qe[_];if(D!==void 0)return hx(D)}(v),T=m.message;E===void 0&&(E=x.INTERNAL,T="Unknown error status: "+v+" with message "+m.message),h=!0,d.eo(new C(E,T)),l.close()}else k("Connection","WebChannel received:",w),d.no(w)}}),f(o,u$.STAT_EVENT,p=>{p.stat===w0.PROXY?k("Connection","Detected buffering proxy"):p.stat===w0.NOPROXY&&k("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){return typeof window<"u"?window:null}function _l(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return new rO(t,!0)}class zg{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i,s,o,a,u){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new zg(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new C(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fP extends Yx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=oO(this.wt,e),r=function(i){if(!("targetChange"in i))return j.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?st(s.readTime):j.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=Ja(this.wt),n.addTarget=function(i,s){let o;const a=s.target;return o=Sc(a)?{documents:Ix(i,a)}:{query:xx(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=yx(i,s.resumeToken):s.snapshotVersion.compareTo(j.min())>0&&(o.readTime=Ya(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=uO(this.wt,e);r&&(n.labels=r),this.Oo(n)}jo(e){const n={};n.database=Ja(this.wt),n.removeTarget=e,this.Oo(n)}}class pP extends Yx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=aO(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.Jo(r,n)}return z(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ja(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Za(this.wt,r))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new C(x.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(x.UNKNOWN,i.toString())})}ao(e,n,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(x.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class gP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ue(n),this.su=!1):k("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{r.enqueueAndForget(async()=>{ni(this)&&(k("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=R(a);u.lu.add(4),await wo(u),u._u.set("Unknown"),u.lu.delete(4),await Du(u)}(this))})}),this._u=new gP(r,i)}}async function Du(t){if(ni(t))for(const e of t.fu)await e(!0)}async function wo(t){for(const e of t.fu)await e(!1)}function qh(t,e){const n=R(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),Gg(n)?Kg(n):Eo(n).Co()&&qg(n,e))}function eu(t,e){const n=R(t),r=Eo(n);n.hu.delete(e),r.Co()&&Xx(n,e),n.hu.size===0&&(r.Co()?r.ko():ni(n)&&n._u.set("Unknown"))}function qg(t,e){t.wu.Nt(e.targetId),Eo(t).Qo(e)}function Xx(t,e){t.wu.Nt(e),Eo(t).jo(e)}function Kg(t){t.wu=new eO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),Eo(t).start(),t._u.iu()}function Gg(t){return ni(t)&&!Eo(t).Do()&&t.hu.size>0}function ni(t){return R(t).lu.size===0}function Jx(t){t.wu=void 0}async function vP(t){t.hu.forEach((e,n)=>{qg(t,e)})}async function wP(t,e){Jx(t),Gg(t)?(t._u.uu(e),Kg(t)):t._u.set("Unknown")}async function SP(t,e,n){if(t._u.set("Online"),e instanceof gx&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.hu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.hu.delete(o),r.wu.removeTarget(o))}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Cl?t.wu.Ut(e):e instanceof mx?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(j.min()))try{const r=await zx(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.hu.get(u);l&&i.hu.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.hu.get(a);if(!u)return;i.hu.set(a,u.withResumeToken(Je.EMPTY_BYTE_STRING,u.snapshotVersion)),Xx(i,a);const l=new Or(u.target,a,1,u.sequenceNumber);qg(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){k("RemoteStore","Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!ei(e))throw e;t.lu.add(1),await wo(t),t._u.set("Offline"),n||(n=()=>zx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{k("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Du(t)})}function Zx(t,e){return e().catch(n=>bc(t,n,e))}async function So(t){const e=R(t),n=Kr(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;EP(e);)try{const i=await oP(e.localStore,r);if(i===null){e.au.length===0&&n.ko();break}r=i.batchId,IP(e,i)}catch(i){await bc(e,i)}eT(e)&&tT(e)}function EP(t){return ni(t)&&t.au.length<10}function IP(t,e){t.au.push(e);const n=Kr(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function eT(t){return ni(t)&&!Kr(t).Do()&&t.au.length>0}function tT(t){Kr(t).start()}async function xP(t){Kr(t).Xo()}async function TP(t){const e=Kr(t);for(const n of t.au)e.Ho(n.mutations)}async function CP(t,e,n){const r=t.au.shift(),i=Pg.from(r,e,n);await Zx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await So(t)}async function kP(t,e){e&&Kr(t).zo&&await async function(n,r){if(i=r.code,cx(i)&&i!==x.ABORTED){const s=n.au.shift();Kr(n).No(),await Zx(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await So(n)}var i}(t,e),eT(t)&&tT(t)}async function cw(t,e){const n=R(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");const r=ni(n);n.lu.add(3),await wo(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Du(n)}async function _p(t,e){const n=R(t);e?(n.lu.delete(2),await Du(n)):e||(n.lu.add(2),await wo(n),n._u.set("Unknown"))}function Eo(t){return t.mu||(t.mu=function(e,n,r){const i=R(e);return i.tu(),new fP(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:vP.bind(null,t),Jr:wP.bind(null,t),Go:SP.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),Gg(t)?Kg(t):t._u.set("Unknown")):(await t.mu.stop(),Jx(t))})),t.mu}function Kr(t){return t.gu||(t.gu=function(e,n,r){const i=R(e);return i.tu(),new pP(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:xP.bind(null,t),Jr:kP.bind(null,t),Yo:TP.bind(null,t),Jo:CP.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await So(t)):(await t.gu.stop(),t.au.length>0&&(k("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Wg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Io(t,e){if(Ue("AsyncQueue",`${e}: ${t}`),ei(t))return new C(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Ls(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.yu=new Re(A.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):U():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class to{constructor(e,n,r,i,s,o,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new to(e,n,Ls.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.Iu=void 0,this.listeners=[]}}class bP{constructor(){this.queries=new ti(e=>JI(e),Tu),this.onlineState="Unknown",this.Tu=new Set}}async function Hg(t,e){const n=R(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new _P),i)try{s.Iu=await n.onListen(r)}catch(o){const a=Io(o,`Initialization of query '${Ip(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&Yg(n)}async function Qg(t,e){const n=R(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function DP(t,e){const n=R(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&Yg(n)}function AP(t,e,n){const r=R(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Yg(t){t.Tu.forEach(e=>{e.next()})}class Xg{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.wt=e}Wi(e){return Un(this.wt,e)}zi(e){return e.metadata.exists?Ex(this.wt,e.document,!1):we.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return st(e)}}class $P{constructor(e,n,r){this.xu=e,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nT(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=re.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,r=new dw(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Y()).add(s);n.set(o,a)}}return n}async complete(){const e=await aP(this.localStore,new dw(this.wt),this.documents,this.xu.id),n=this.ku(this.documents);for(const r of this.queries)await uP(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:e}}}function nT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.key=e}}class iT{constructor(e){this.key=e}}class sT{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Y(),this.mutatedKeys=Y(),this.Lu=ex(e),this.Uu=new Ls(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new hw,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=Ag(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),w=!0):this.Qu(d,f)||(r.track({type:2,doc:f}),w=!0,(u&&this.Lu(f,u)>0||l&&this.Lu(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(u||l)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Mi:a,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((l,c)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return f(h)-f(d)}(l.type,c.type)||this.Lu(l.doc,c.doc)),this.ju(r);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,u=a!==this.$u;return this.$u=a,s.length!==0||u?{snapshot:new to(this.query,e.Uu,i,s,e.mutatedKeys,a===0,u,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new hw,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Y(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new iT(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new rT(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=Y();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return to.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class OP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PP{constructor(e){this.key=e,this.Xu=!1}}class RP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new ti(a=>JI(a),Tu),this.ec=new Map,this.nc=new Set,this.sc=new Re(A.comparator),this.ic=new Map,this.rc=new Fg,this.oc={},this.uc=new Map,this.cc=Wi.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function MP(t,e){const n=ny(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=await Zs(n.localStore,Jt(e));n.isPrimaryClient&&qh(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await Jg(n,e,r,a==="current")}return i}async function Jg(t,e,n,r){t.hc=(c,h,d)=>async function(f,p,y,w){let g=p.view.Ku(y);g.Mi&&(g=await Cc(f.localStore,p.query,!1).then(({documents:E})=>p.view.Ku(E,g)));const m=w&&w.targetChanges.get(p.targetId),v=p.view.applyChanges(g,f.isPrimaryClient,m);return bp(f,p.targetId,v.zu),v.snapshot}(t,c,h,d);const i=await Cc(t.localStore,e,!0),s=new sT(e,i.ji),o=s.Ku(i.documents),a=_u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),u=s.applyChanges(o,t.isPrimaryClient,a);bp(t,n,u.zu);const l=new OP(e,n,s);return t.tc.set(e,l),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),u.snapshot}async function LP(t,e){const n=R(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!Tu(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await eo(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),eu(n.remoteStore,r.targetId),no(n,r.targetId)}).catch(Zr)):(no(n,r.targetId),await eo(n.localStore,r.targetId,!0))}async function FP(t,e,n){const r=ry(t);try{const i=await function(s,o){const a=R(s),u=_e.now(),l=o.reduce((d,f)=>d.add(f.key),Y());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Ht(),p=Y();return a.Ui.getEntries(d,l).next(y=>{f=y,f.forEach((w,g)=>{g.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(y=>{c=y;const w=[];for(const g of o){const m=H$(g,c.get(g.key).overlayedDocument);m!=null&&w.push(new ar(g.key,m,QI(m.value.mapValue),De.exists(!0)))}return a.mutationQueue.addMutationBatch(d,u,w,o)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(d,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:fx(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.oc[s.currentUser.toKey()];u||(u=new Re(Q)),u=u.insert(o,a),s.oc[s.currentUser.toKey()]=u}(r,i.batchId,n),await ur(r,i.changes),await So(r.remoteStore)}catch(i){const s=Io(i,"Failed to persist write");n.reject(s)}}async function oT(t,e){const n=R(t);try{const r=await sP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?z(o.Xu):i.removedDocuments.size>0&&(z(o.Xu),o.Xu=!1))}),await ur(n,r,e)}catch(r){await Zr(r)}}function fw(t,e,n){const r=R(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=R(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const h of c.listeners)h.Eu(o)&&(u=!0)}),u&&Yg(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VP(t,e,n){const r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new Re(A.comparator);o=o.insert(s,we.newNoDocument(s,j.min()));const a=Y().add(s),u=new ku(j.min(),new Map,new ye(Q),o,a);await oT(r,u),r.sc=r.sc.remove(s),r.ic.delete(e),ty(r)}else await eo(r.localStore,e,!1).then(()=>no(r,e,n)).catch(Zr)}async function UP(t,e){const n=R(t),r=e.batch.batchId;try{const i=await iP(n.localStore,e);ey(n,r,null),Zg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ur(n,i)}catch(i){await Zr(i)}}async function BP(t,e,n){const r=R(t);try{const i=await function(s,o){const a=R(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return a.mutationQueue.lookupMutationBatch(u,o).next(c=>(z(c!==null),l=c.keys(),a.mutationQueue.removeMutationBatch(u,c))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>a.localDocuments.getDocuments(u,l))})}(r.localStore,e);ey(r,e,n),Zg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ur(r,i)}catch(i){await Zr(i)}}async function jP(t,e){const n=R(t);ni(n.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=R(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.uc.get(r)||[];i.push(e),n.uc.set(r,i)}catch(r){const i=Io(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Zg(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function ey(t,e,n){const r=R(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function no(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||aT(t,r)})}function aT(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(eu(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),ty(t))}function bp(t,e,n){for(const r of n)r instanceof rT?(t.rc.addReference(r.key,e),zP(t,r)):r instanceof iT?(k("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||aT(t,r.key)):U()}function zP(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(k("SyncEngine","New document in limbo: "+n),t.nc.add(r),ty(t))}function ty(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new A(re.fromString(e)),r=t.cc.next();t.ic.set(r,new PP(n)),t.sc=t.sc.insert(n,r),qh(t.remoteStore,new Or(Jt(go(n.path)),r,2,Wt.ot))}}async function ur(t,e,n){const r=R(t),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,u)=>{o.push(r.hc(u,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l.fromCache?"not-current":"current"),i.push(l);const c=Bg.Vi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Zu.Go(i),await async function(a,u){const l=R(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>S.forEach(u,h=>S.forEach(h.Pi,d=>l.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>S.forEach(h.vi,d=>l.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!ei(c))throw c;k("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const h=c.targetId;if(!c.fromCache){const d=l.$i.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);l.$i=l.$i.insert(h,p)}}}(r.localStore,s))}async function qP(t,e){const n=R(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());const r=await jx(n.localStore,e);n.currentUser=e,function(i,s){i.uc.forEach(o=>{o.forEach(a=>{a.reject(new C(x.CANCELLED,s))})}),i.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ur(n,r.Ki)}}function KP(t,e){const n=R(t),r=n.ic.get(e);if(r&&r.Xu)return Y().add(r.key);{let i=Y();const s=n.ec.get(e);if(!s)return i;for(const o of s){const a=n.tc.get(o);i=i.unionWith(a.view.qu)}return i}}async function GP(t,e){const n=R(t),r=await Cc(n.localStore,e.query,!0),i=e.view.Ju(r);return n.isPrimaryClient&&bp(n,e.targetId,i.zu),i}async function WP(t,e){const n=R(t);return Gx(n.localStore,e).then(r=>ur(n,r))}async function HP(t,e,n,r){const i=R(t),s=await function(o,a){const u=R(o),l=R(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",c=>l.yn(c,a).next(h=>h?u.localDocuments.getDocuments(c,h):S.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await So(i.remoteStore):n==="acknowledged"||n==="rejected"?(ey(i,e,r||null),Zg(i,e),function(o,a){R(R(o).mutationQueue).In(a)}(i.localStore,e)):U(),await ur(i,s)):k("SyncEngine","Cannot apply mutation batch with id: "+e)}async function QP(t,e){const n=R(t);if(ny(n),ry(n),e===!0&&n.ac!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await pw(n,r.toArray());n.ac=!0,await _p(n.remoteStore,!0);for(const s of i)qh(n.remoteStore,s)}else if(e===!1&&n.ac!==!1){const r=[];let i=Promise.resolve();n.ec.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(no(n,o),eo(n.localStore,o,!0))),eu(n.remoteStore,o)}),await i,await pw(n,r),function(s){const o=R(s);o.ic.forEach((a,u)=>{eu(o.remoteStore,u)}),o.rc.cs(),o.ic=new Map,o.sc=new Re(A.comparator)}(n),n.ac=!1,await _p(n.remoteStore,!1)}}async function pw(t,e,n){const r=R(t),i=[],s=[];for(const o of e){let a;const u=r.ec.get(o);if(u&&u.length!==0){a=await Zs(r.localStore,Jt(u[0]));for(const l of u){const c=r.tc.get(l),h=await GP(r,c);h.snapshot&&s.push(h.snapshot)}}else{const l=await Kx(r.localStore,o);a=await Zs(r.localStore,l),await Jg(r,uT(l),o,!1)}i.push(a)}return r.Zu.Go(s),i}function uT(t){return XI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function YP(t){const e=R(t);return R(R(e.localStore).persistence).Ri()}async function XP(t,e,n,r){const i=R(t);if(i.ac)return void k("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Gx(i.localStore,ZI(s[0])),a=ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await ur(i,o,a);break}case"rejected":await eo(i.localStore,e,!0),no(i,e,r);break;default:U()}}async function JP(t,e,n){const r=ny(t);if(r.ac){for(const i of e){if(r.ec.has(i)){k("SyncEngine","Adding an already active target "+i);continue}const s=await Kx(r.localStore,i),o=await Zs(r.localStore,s);await Jg(r,uT(s),o.targetId,!1),qh(r.remoteStore,o)}for(const i of n)r.ec.has(i)&&await eo(r.localStore,i,!1).then(()=>{eu(r.remoteStore,i),no(r,i)}).catch(Zr)}}function ny(t){const e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VP.bind(null,e),e.Zu.Go=DP.bind(null,e.eventManager),e.Zu.lc=AP.bind(null,e.eventManager),e}function ry(t){const e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BP.bind(null,e),e}function ZP(t,e,n){const r=R(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=R(h),p=st(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",y=>f.Ds.getBundleMetadata(y,d.id)).then(y=>!!y&&y.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(nT(a));const u=new $P(a,i.localStore,s.wt);let l=await s.fc();for(;l;){const h=await u.Nu(l);h&&o._updateProgress(h),l=await s.fc()}const c=await u.complete();return await ur(i,c.Ou,void 0),await function(h,d){const f=R(h);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Ds.saveBundleMetadata(p,d))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Mu)}catch(a){return Hs("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class lT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=bu(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return Bx(this.persistence,new Ux,e.initialUser,this.wt)}_c(e){return new Vx(zh.Os,this.wt)}dc(e){return new Hx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cT extends lT{constructor(e,n,r){super(),this.yc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await ry(this.yc.syncEngine),await So(this.yc.remoteStore),await this.persistence.ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wc(e){return Bx(this.persistence,new Ux,e.initialUser,this.wt)}mc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new zO(r,e.asyncQueue,n)}gc(e,n){const r=new k$(n,this.persistence);return new C$(e.asyncQueue,r)}_c(e){const n=Ug(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Vg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Qx(),_l(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Hx}}class e2 extends cT{constructor(e,n){super(e,n,!1),this.yc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.yc.syncEngine;this.sharedClientState instanceof Jd&&(this.sharedClientState.syncEngine={kr:HP.bind(null,n),Mr:XP.bind(null,n),Or:JP.bind(null,n),Ri:YP.bind(null,n),Nr:WP.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ci(async r=>{await QP(this.yc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}dc(e){const n=Qx();if(!Jd.V(n))throw new C(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ug(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jd(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class iy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qP.bind(null,this.syncEngine),await _p(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bP}createDatastore(e){const n=bu(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new dP(i));var i;return function(s,o,a,u){return new mP(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>fw(this.syncEngine,a,0),o=lw.V()?new lw:new lP,new yP(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,l){const c=new RP(r,i,s,o,a,u);return l&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=R(e);k("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await wo(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Ue("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.Ec=e,this.wt=n,this.metadata=new it,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(e===null)return null;const n=this.Ac.decode(e),r=Number(n);isNaN(r)&&this.Pc(`length string (${n}) is not valid number`);const i=await this.vc(r);return new NP(JSON.parse(i),e.length+r)}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(this.buffer.length===0)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const n=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=R(r),o=Ja(s.wt)+"/documents",a={documents:i.map(h=>Xa(s.wt,h))},u=await s.ao("BatchGetDocuments",o,a,i.length),l=new Map;u.forEach(h=>{const d=sO(s.wt,h);l.set(d.key.toString(),d)});const c=[];return i.forEach(h=>{const d=l.get(h.toString());z(!!d),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=A.fromPath(r);this.mutations.push(new Ng(i,this.precondition(i)))}),await async function(n,r){const i=R(n),s=Ja(i.wt)+"/documents",o={writes:r.map(a=>Za(i.wt,a))};await i.ro("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw U();n=j.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new C(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?De.updateTime(n):De.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(j.min()))throw new C(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(n)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new zg(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io(async()=>{const e=new n2(this.datastore),n=this.xc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Nc(i)}))}).catch(r=>{this.Nc(r)})})}xc(e){try{const n=this.updateFunction(e);return!Iu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!cx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=FI.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{k("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Io(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hT(t,e){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function dT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sy(t);k("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>cw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>cw(e.remoteStore,s)),t.onlineComponents=e}async function sy(t){return t.offlineComponents||(k("FirestoreClient","Using default OfflineComponentProvider"),await hT(t,new lT)),t.offlineComponents}async function Gh(t){return t.onlineComponents||(k("FirestoreClient","Using default OnlineComponentProvider"),await dT(t,new iy)),t.onlineComponents}function fT(t){return sy(t).then(e=>e.persistence)}function oy(t){return sy(t).then(e=>e.localStore)}function pT(t){return Gh(t).then(e=>e.remoteStore)}function ay(t){return Gh(t).then(e=>e.syncEngine)}async function ro(t){const e=await Gh(t),n=e.eventManager;return n.onListen=MP.bind(null,e.syncEngine),n.onUnlisten=LP.bind(null,e.syncEngine),n}function s2(t){return t.asyncQueue.enqueue(async()=>{const e=await fT(t),n=await pT(t);return e.setNetworkEnabled(!0),function(r){const i=R(r);return i.lu.delete(0),Du(i)}(n)})}function o2(t){return t.asyncQueue.enqueue(async()=>{const e=await fT(t),n=await pT(t);return e.setNetworkEnabled(!1),async function(r){const i=R(r);i.lu.add(0),await wo(i),i._u.set("Offline")}(n)})}function a2(t,e){const n=new it;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const l=R(a);return l.persistence.runTransaction("read document","readonly",c=>l.localDocuments.getDocument(c,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new C(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Io(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await oy(t),e,n)),n.promise}function mT(t,e,n={}){const r=new it;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const l=new Kh({next:h=>{s.enqueueAndForget(()=>Qg(i,c));const d=h.docs.has(o);!d&&h.fromCache?u.reject(new C(x.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?u.reject(new C(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),c=new Xg(go(o.path),l,{includeMetadataChanges:!0,Du:!0});return Hg(i,c)}(await ro(t),t.asyncQueue,e,n,r)),r.promise}function u2(t,e){const n=new it;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Cc(r,i,!0),a=new sT(i,o.ji),u=a.Ku(o.documents),l=a.applyChanges(u,!1);s.resolve(l.snapshot)}catch(o){const a=Io(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await oy(t),e,n)),n.promise}function gT(t,e,n={}){const r=new it;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const l=new Kh({next:h=>{s.enqueueAndForget(()=>Qg(i,c)),h.fromCache&&a.source==="server"?u.reject(new C(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),c=new Xg(o,l,{includeMetadataChanges:!0,Du:!0});return Hg(i,c)}(await ro(t),t.asyncQueue,e,n,r)),r.promise}function l2(t,e){const n=new Kh(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){R(r).Tu.add(i),i.next()}(await ro(t),n)),()=>{n.Tc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){R(r).Tu.delete(i)}(await ro(t),n))}}function c2(t,e,n){const r=new it;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(s){return Gh(s).then(o=>o.datastore)}(t);new r2(t.asyncQueue,i,n,e,r).run()}),r.promise}function h2(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,l){return new t2(u,l)}(function(u,l){if(u instanceof Uint8Array)return mw(u,l);if(u instanceof ArrayBuffer)return mw(new Uint8Array(u),l);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,bu(e));t.asyncQueue.enqueueAndForget(async()=>{ZP(await ay(t),i,r)})}function d2(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=R(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(await oy(t),e))}const gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e,n){if(!n)throw new C(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yT(t,e,n,r){if(e===!0&&r===!0)throw new C(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yw(t){if(!A.isDocumentKey(t))throw new C(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vw(t){if(A.isDocumentKey(t))throw new C(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":U()}function se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(t);throw new C(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vT(t,e){if(e<=0)throw new C(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new C(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ww({}),this._settingsFrozen=!1,e instanceof rr?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new C(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rr(i.options.projectId)}(e))}get app(){if(!this._app)throw new C(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ww(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new f$;switch(n.type){case"gapi":const r=n.client;return z(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new y$(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new C(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=gw.get(e);n&&(k("ComponentProvider","Removing Datastore"),gw.delete(e),n.terminate())}(this),Promise.resolve()}}function f2(t,e,n,r={}){var i;const s=(t=se(t,Au))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Hs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=nt.MOCK_USER;else{o=CD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new C(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new nt(u)}t._authCredentials=new p$(new LI(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xe(this.firestore,e,this._key)}}class Dt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dt(this.firestore,e,this._query)}}class Bn extends Dt{constructor(e,n,r){super(e,n,go(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xe(this.firestore,null,new A(e))}withConverter(e){return new Bn(this.firestore,e,this._path)}}function Ci(t,e,...n){if(t=Ge(t),uy("collection","path",e),t instanceof Au){const r=re.fromString(e,...n);return vw(r),new Bn(t,null,r)}{if(!(t instanceof xe||t instanceof Bn))throw new C(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(re.fromString(e,...n));return vw(r),new Bn(t.firestore,null,r)}}function p2(t,e){if(t=se(t,Au),uy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new C(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(t,null,function(n){return new or(re.emptyPath(),n)}(e))}function Dc(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=FI.I()),uy("doc","path",e),t instanceof Au){const r=re.fromString(e,...n);return yw(r),new xe(t,null,new A(r))}{if(!(t instanceof xe||t instanceof Bn))throw new C(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(re.fromString(e,...n));return yw(r),new xe(t.firestore,t instanceof Bn?t.converter:null,new A(r))}}function wT(t,e){return t=Ge(t),e=Ge(e),(t instanceof xe||t instanceof Bn)&&(e instanceof xe||e instanceof Bn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ST(t,e){return t=Ge(t),e=Ge(e),t instanceof Dt&&e instanceof Dt&&t.firestore===e.firestore&&Tu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new zg(this,"async_queue_retry"),this.Kc=()=>{const n=_l();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=_l();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=_l();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new it;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!ei(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=Wg.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&U()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function Dp(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class g2{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=-1;class Me extends Au{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new m2,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ET(this),this._firestoreClient.terminate()}}function lt(t){return t._firestoreClient||ET(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ET(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new D$(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new i2(t._authCredentials,t._appCheckCredentials,t._queue,r)}function v2(t,e){xT(t=se(t,Me));const n=lt(t),r=t._freezeSettings(),i=new iy;return IT(n,i,new cT(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function w2(t){xT(t=se(t,Me));const e=lt(t),n=t._freezeSettings(),r=new iy;return IT(e,r,new e2(r,n.cacheSizeBytes))}function IT(t,e,n){const r=new it;return t.asyncQueue.enqueue(async()=>{try{await hT(t,n),await dT(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===x.FAILED_PRECONDITION||o.code===x.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Hs("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function S2(t){if(t._initialized&&!t._terminated)throw new C(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new it;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!_n.V())return Promise.resolve();const r=n+"main";await _n.delete(r)}(Ug(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function E2(t){return function(e){const n=new it;return e.asyncQueue.enqueueAndForget(async()=>jP(await ay(e),n)),n.promise}(lt(t=se(t,Me)))}function I2(t){return s2(lt(t=se(t,Me)))}function x2(t){return o2(lt(t=se(t,Me)))}function T2(t,e){const n=lt(t=se(t,Me)),r=new g2;return h2(n,t._databaseId,e,r),r}function C2(t,e){return d2(lt(t=se(t,Me)),e).then(n=>n?new Dt(t,null,n.query):null)}function xT(t){if(t._initialized||t._terminated)throw new C(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Je.fromBase64String(e))}catch(n){throw new C(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^__.*__$/;class _2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}class TT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}class Qh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Ac(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(CT(this.Zc)&&k2.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class b2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||bu(e)}aa(e,n,r,i=!1){return new Qh({Zc:e,methodName:n,ca:r,path:Be.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function rs(t){const e=t._freezeSettings(),n=bu(t._databaseId);return new b2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yh(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);dy("Data must be an object, but it was:",o,r);const a=bT(r,o);let u,l;if(s.merge)u=new nn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=Ap(e,h,n);if(!o.contains(d))throw new C(x.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);AT(c,d)||c.push(d)}u=new nn(c),l=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=o.fieldTransforms;return new _2(new mt(a),u,l)}class Nu extends ns{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nu}}function kT(t,e,n){return new Qh({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class ly extends ns{_toFieldTransform(e){return new Cu(e.path,new Xs)}isEqual(e){return e instanceof ly}}class D2 extends ns{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=kT(this,e,!0),r=this.ha.map(s=>is(s,n)),i=new zi(r);return new Cu(e.path,i)}isEqual(e){return this===e}}class A2 extends ns{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=kT(this,e,!0),r=this.ha.map(s=>is(s,n)),i=new qi(r);return new Cu(e.path,i)}isEqual(e){return this===e}}class N2 extends ns{constructor(e,n){super(e),this.la=n}_toFieldTransform(e){const n=new Js(e.wt,rx(e.wt,this.la));return new Cu(e.path,n)}isEqual(e){return this===e}}function cy(t,e,n,r){const i=t.aa(1,e,n);dy("Data must be an object, but it was:",i,r);const s=[],o=mt.empty();ts(r,(u,l)=>{const c=fy(e,u,n);l=Ge(l);const h=i.ia(c);if(l instanceof Nu)s.push(c);else{const d=is(l,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new nn(s);return new TT(o,a,i.fieldTransforms)}function hy(t,e,n,r,i,s){const o=t.aa(1,e,n),a=[Ap(e,r,n)],u=[i];if(s.length%2!=0)throw new C(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ap(e,s[d])),u.push(s[d+1]);const l=[],c=mt.empty();for(let d=a.length-1;d>=0;--d)if(!AT(l,a[d])){const f=a[d];let p=u[d];p=Ge(p);const y=o.ia(f);if(p instanceof Nu)l.push(f);else{const w=is(p,y);w!=null&&(l.push(f),c.set(f,w))}}const h=new nn(l);return new TT(c,h,o.fieldTransforms)}function _T(t,e,n,r=!1){return is(n,t.aa(r?4:3,e))}function is(t,e){if(DT(t=Ge(t)))return dy("Unsupported field value:",e,t),bT(t,e);if(t instanceof ns)return function(n,r){if(!CT(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=is(o,r.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ge(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rx(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=_e.fromDate(n);return{timestampValue:Ya(r.wt,i)}}if(n instanceof _e){const i=new _e(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ya(r.wt,i)}}if(n instanceof Hh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zn)return{bytesValue:yx(r.wt,n._byteString)};if(n instanceof xe){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$g(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${Wh(n)}`)}(t,e)}function bT(t,e){const n={};return KI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,i)=>{const s=is(i,e.ea(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function DT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof Hh||t instanceof zn||t instanceof xe||t instanceof ns)}function dy(t,e,n){if(!DT(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Wh(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function Ap(t,e,n){if((e=Ge(e))instanceof Gr)return e._internalPath;if(typeof e=="string")return fy(t,e);throw Ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const $2=new RegExp("[~\\*/\\[\\]]");function fy(t,e,n){if(e.search($2)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gr(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ac(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new C(x.INVALID_ARGUMENT,a+t+u)}function AT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O2 extends tu{data(){return super.data()}}function Xh(t,e){return typeof e=="string"?fy(t,e):e instanceof Gr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ir extends tu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fa extends ir{data(e={}){return super.data(e)}}class Wr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fa(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new fa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ei(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new fa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ei(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:P2(o.type),doc:a,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}function NT(t,e){return t instanceof ir&&e instanceof ir?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wr&&e instanceof Wr&&t._firestore===e._firestore&&ST(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $u{}function xn(t,...e){for(const n of e)t=n._apply(t);return t}class R2 extends $u{constructor(e,n,r){super(),this.fa=e,this.da=n,this._a=r,this.type="where"}_apply(e){const n=rs(e.firestore),r=function(i,s,o,a,u,l,c){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new C(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Ew(c,l);const f=[];for(const p of c)f.push(Sw(a,i,p));h={arrayValue:{values:f}}}else h=Sw(a,i,c)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Ew(c,l),h=_T(o,s,c,l==="in"||l==="not-in");const d=gt.create(u,l,h);return function(f,p){if(p.ht()){const w=bg(f);if(w!==null&&!w.isEqual(p.field))throw new C(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${w.toString()}' and '${p.field.toString()}'`);const g=_g(f);g!==null&&LT(f,p.field,g)}const y=function(w,g){for(const m of w.filters)if(g.indexOf(m.op)>=0)return m.op;return null}(f,function(w){switch(w){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(y!==null)throw y===p.op?new C(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new C(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${y.toString()}' filters.`)}(i,d),d}(e._query,"where",n,e.firestore._databaseId,this.fa,this.da,this._a);return new Dt(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new or(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function M2(t,e,n){const r=e,i=Xh("where",t);return new R2(i,r,n)}class L2 extends $u{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new C(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new C(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Ms(i,s);return function(a,u){if(_g(a)===null){const l=bg(a);l!==null&&LT(a,l,u.field)}}(r,o),o}(e._query,this.fa,this.wa);return new Dt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new or(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function bl(t,e="asc"){const n=e,r=Xh("orderBy",t);return new L2(r,n)}class OT extends $u{constructor(e,n,r){super(),this.type=e,this.ma=n,this.ga=r}_apply(e){return new Dt(e.firestore,e.converter,Ic(e._query,this.ma,this.ga))}}function F2(t){return vT("limit",t),new OT("limit",t,"F")}function V2(t){return vT("limitToLast",t),new OT("limitToLast",t,"L")}class PT extends $u{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=MT(e,this.type,this.ya,this.pa);return new Dt(e.firestore,e.converter,function(r,i){return new or(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function U2(...t){return new PT("startAt",t,!0)}function B2(...t){return new PT("startAfter",t,!1)}class RT extends $u{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=MT(e,this.type,this.ya,this.pa);return new Dt(e.firestore,e.converter,function(r,i){return new or(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function j2(...t){return new RT("endBefore",t,!1)}function z2(...t){return new RT("endAt",t,!0)}function MT(t,e,n,r){if(n[0]=Ge(n[0]),n[0]instanceof tu)return function(i,s,o,a,u){if(!a)throw new C(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const c of Ys(i))if(c.field.isKeyField())l.push(Bi(s,a.key));else{const h=a.data.field(c.field);if(kg(h))throw new C(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new C(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}l.push(h)}return new qr(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=rs(t.firestore);return function(s,o,a,u,l,c){const h=s.explicitOrderBy;if(l.length>h.length)throw new C(x.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<l.length;f++){const p=l[f];if(h[f].field.isKeyField()){if(typeof p!="string")throw new C(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof p}`);if(!Dg(s)&&p.indexOf("/")!==-1)throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${p}' contains a slash.`);const y=s.path.child(re.fromString(p));if(!A.isDocumentKey(y))throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new A(y);d.push(Bi(o,w))}else{const y=_T(a,u,p);d.push(y)}}return new qr(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Sw(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new C(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dg(e)&&n.indexOf("/")!==-1)throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(re.fromString(n));if(!A.isDocumentKey(r))throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bi(t,new A(r))}if(n instanceof xe)return Bi(t,n._key);throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function Ew(t,e){if(!Array.isArray(t)||t.length===0)throw new C(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new C(x.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LT(t,e,n){if(!n.isEqual(e))throw new C(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw U()}}convertObject(e,n){const r={};return ts(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Hh(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=GI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ga(e));default:return null}}convertTimestamp(e){const n=jr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=re.fromString(e);z(kx(r));const i=new rr(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||Ue(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class K2 extends py{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rs(e)}set(e,n,r){this._verifyNotCommitted();const i=wr(e,this._firestore),s=Jh(i.converter,n,r),o=Yh(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,De.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=wr(e,this._firestore);let o;return o=typeof(n=Ge(n))=="string"||n instanceof Gr?hy(this._dataReader,"WriteBatch.update",s._key,n,r,i):cy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wr(e,this._firestore);return this._mutations=this._mutations.concat(new vo(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new C(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wr(t,e){if((t=Ge(t)).firestore!==e)throw new C(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){t=se(t,xe);const e=se(t.firestore,Me);return mT(lt(e),t._key).then(n=>my(e,t,n))}class ss extends py{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,n)}}function H2(t){t=se(t,xe);const e=se(t.firestore,Me),n=lt(e),r=new ss(e);return a2(n,t._key).then(i=>new ir(e,r,t._key,i,new Ei(i!==null&&i.hasLocalMutations,!0),t.converter))}function Q2(t){t=se(t,xe);const e=se(t.firestore,Me);return mT(lt(e),t._key,{source:"server"}).then(n=>my(e,t,n))}function pa(t){t=se(t,Dt);const e=se(t.firestore,Me),n=lt(e),r=new ss(e);return $T(t._query),gT(n,t._query).then(i=>new Wr(e,r,t,i))}function Y2(t){t=se(t,Dt);const e=se(t.firestore,Me),n=lt(e),r=new ss(e);return u2(n,t._query).then(i=>new Wr(e,r,t,i))}function X2(t){t=se(t,Dt);const e=se(t.firestore,Me),n=lt(e),r=new ss(e);return gT(n,t._query,{source:"server"}).then(i=>new Wr(e,r,t,i))}function Iw(t,e,n){t=se(t,xe);const r=se(t.firestore,Me),i=Jh(t.converter,e,n);return Ou(r,[Yh(rs(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,De.none())])}function xw(t,e,n,...r){t=se(t,xe);const i=se(t.firestore,Me),s=rs(i);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Gr?hy(s,"updateDoc",t._key,e,n,r):cy(s,"updateDoc",t._key,e),Ou(i,[o.toMutation(t._key,De.exists(!0))])}function J2(t){return Ou(se(t.firestore,Me),[new vo(t._key,De.none())])}function FT(t,e){const n=se(t.firestore,Me),r=Dc(t),i=Jh(t.converter,e);return Ou(n,[Yh(rs(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function VT(t,...e){var n,r,i;t=Ge(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Dp(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Dp(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,l,c;if(t instanceof xe)l=se(t.firestore,Me),c=go(t._key.path),u={next:h=>{e[o]&&e[o](my(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=se(t,Dt);l=se(h.firestore,Me),c=h._query;const d=new ss(l);u={next:f=>{e[o]&&e[o](new Wr(l,d,h,f))},error:e[o+1],complete:e[o+2]},$T(t._query)}return function(h,d,f,p){const y=new Kh(p),w=new Xg(d,y,f);return h.asyncQueue.enqueueAndForget(async()=>Hg(await ro(h),w)),()=>{y.Tc(),h.asyncQueue.enqueueAndForget(async()=>Qg(await ro(h),w))}}(lt(l),c,a,u)}function Z2(t,e){return l2(lt(t=se(t,Me)),Dp(e)?e:{next:e})}function Ou(t,e){return function(n,r){const i=new it;return n.asyncQueue.enqueueAndForget(async()=>FP(await ay(n),r,i)),i.promise}(lt(t),e)}function my(t,e,n){const r=n.docs.get(e._key),i=new ss(t);return new ir(t,i,e._key,r,new Ei(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=rs(e)}get(e){const n=wr(e,this._firestore),r=new K2(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return U();const s=i[0];if(s.isFoundDocument())return new tu(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new tu(this._firestore,r,n._key,null,n.converter);throw U()})}set(e,n,r){const i=wr(e,this._firestore),s=Jh(i.converter,n,r),o=Yh(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=wr(e,this._firestore);let o;return o=typeof(n=Ge(n))=="string"||n instanceof Gr?hy(this._dataReader,"Transaction.update",s._key,n,r,i):cy(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=wr(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wr(e,this._firestore),r=new ss(this._firestore);return super.get(e).then(i=>new ir(this._firestore,r,n._key,i._document,new Ei(!1,!1),n.converter))}}function tR(t,e,n){t=se(t,Me);const r=Object.assign(Object.assign({},q2),n);return function(i){if(i.maxAttempts<1)throw new C(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),c2(lt(t),i=>e(new eR(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return new Nu("deleteField")}function rR(){return new ly("serverTimestamp")}function iR(...t){return new D2("arrayUnion",t)}function sR(...t){return new A2("arrayRemove",t)}function oR(t){return new N2("increment",t)}(function(t,e=!0){(function(n){mo=n})(Jm),Gs(new Pi("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new Me(i,new m$(n.getProvider("auth-internal")),new w$(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),$r(S0,"3.4.14",t),$r(S0,"3.4.14","esm2017")})();const aR="@firebase/firestore-compat",uR="0.1.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new C("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){if(typeof Uint8Array>"u")throw new C("unimplemented","Uint8Arrays are not available in this environment.")}function Cw(){if(!_$())throw new C("unimplemented","Blobs are unavailable in Firestore in this environment.")}class nu{constructor(e){this._delegate=e}static fromBase64String(e){return Cw(),new nu(zn.fromBase64String(e))}static fromUint8Array(e){return Tw(),new nu(zn.fromUint8Array(e))}toBase64(){return Cw(),this._delegate.toBase64()}toUint8Array(){return Tw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){return lR(t,["next","error","complete"])}function lR(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{enableIndexedDbPersistence(e,n){return v2(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return w2(e._delegate)}clearIndexedDbPersistence(e){return S2(e._delegate)}}class UT{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){f2(this._delegate,e,n,r)}enableNetwork(){return I2(this._delegate)}disableNetwork(){return x2(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return E2(this._delegate)}onSnapshotsInSync(e){return Z2(this._delegate,e)}get app(){if(!this._appCompat)throw new C("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new io(this,Ci(this._delegate,e))}catch(n){throw Pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new pn(this,Dc(this._delegate,e))}catch(n){throw Pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ot(this,p2(this._delegate,e))}catch(n){throw Pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return tR(this._delegate,n=>e(new BT(this,n)))}batch(){return lt(this._delegate),new jT(new G2(this._delegate,e=>Ou(this._delegate,e)))}loadBundle(e){return T2(this._delegate,e)}namedQuery(e){return C2(this._delegate,e).then(n=>n?new Ot(this,n):null)}}class Zh extends py{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(new zn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return pn.forKey(n,this.firestore,null)}}function hR(t){h$(t)}class BT{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Zh(e)}get(e){const n=Ii(e);return this._delegate.get(n).then(r=>new ru(this._firestore,new ir(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ii(e);return r?(gy("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ii(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ii(e);return this._delegate.delete(n),this}}class jT{constructor(e){this._delegate=e}set(e,n,r){const i=Ii(e);return r?(gy("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ii(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ii(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Hi{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new fa(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iu(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Hi.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Hi(e,new Zh(e),n),i.set(n,s)),s}}Hi.INSTANCES=new WeakMap;class pn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zh(e)}static forPath(e,n,r){if(e.length%2!==0)throw new C("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pn(n,new xe(n._delegate,r,new A(e)))}static forKey(e,n,r){return new pn(n,new xe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new io(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new io(this.firestore,Ci(this._delegate,e))}catch(n){throw Pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof xe?wT(this._delegate,e):!1}set(e,n){n=gy("DocumentReference.set",n);try{return n?Iw(this._delegate,e,n):Iw(this._delegate,e)}catch(r){throw Pt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?xw(this._delegate,e):xw(this._delegate,e,n,...r)}catch(i){throw Pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return J2(this._delegate)}onSnapshot(...e){const n=zT(e),r=qT(e,i=>new ru(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return VT(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=H2(this._delegate):(e==null?void 0:e.source)==="server"?n=Q2(this._delegate):n=W2(this._delegate),n.then(r=>new ru(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pn(this.firestore,e?this._delegate.withConverter(Hi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pt(t,e,n){return t.message=t.message.replace(e,n),t}function zT(t){for(const e of t)if(typeof e=="object"&&!Np(e))return e;return{}}function qT(t,e){var n,r;let i;return Np(t[0])?i=t[0]:Np(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class ru{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return NT(this._delegate,e._delegate)}}class iu extends ru{data(e){const n=this._delegate.data(e);return d$(n!==void 0),n}}class Ot{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zh(e)}where(e,n,r){try{return new Ot(this.firestore,xn(this._delegate,M2(e,n,r)))}catch(i){throw Pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ot(this.firestore,xn(this._delegate,bl(e,n)))}catch(r){throw Pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ot(this.firestore,xn(this._delegate,F2(e)))}catch(n){throw Pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ot(this.firestore,xn(this._delegate,V2(e)))}catch(n){throw Pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ot(this.firestore,xn(this._delegate,U2(...e)))}catch(n){throw Pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ot(this.firestore,xn(this._delegate,B2(...e)))}catch(n){throw Pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ot(this.firestore,xn(this._delegate,j2(...e)))}catch(n){throw Pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ot(this.firestore,xn(this._delegate,z2(...e)))}catch(n){throw Pt(n,"endAt()","Query.endAt()")}}isEqual(e){return ST(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Y2(this._delegate):(e==null?void 0:e.source)==="server"?n=X2(this._delegate):n=pa(this._delegate),n.then(r=>new $p(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=zT(e),r=qT(e,i=>new $p(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return VT(this._delegate,n,r)}withConverter(e){return new Ot(this.firestore,e?this._delegate.withConverter(Hi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class dR{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new iu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $p{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ot(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new iu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new dR(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new iu(this._firestore,r))})}isEqual(e){return NT(this._delegate,e._delegate)}}class io extends Ot{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pn(this.firestore,e):null}doc(e){try{return e===void 0?new pn(this.firestore,Dc(this._delegate)):new pn(this.firestore,Dc(this._delegate,e))}catch(n){throw Pt(n,"doc()","CollectionReference.doc()")}}add(e){return FT(this._delegate,e).then(n=>new pn(this.firestore,n))}isEqual(e){return wT(this._delegate,e._delegate)}withConverter(e){return new io(this.firestore,e?this._delegate.withConverter(Hi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ii(t){return se(t,xe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(...e){this._delegate=new Gr(...e)}static documentId(){return new yy(Be.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof Gr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._delegate=e}static serverTimestamp(){const e=rR();return e._methodName="FieldValue.serverTimestamp",new mi(e)}static delete(){const e=nR();return e._methodName="FieldValue.delete",new mi(e)}static arrayUnion(...e){const n=iR(...e);return n._methodName="FieldValue.arrayUnion",new mi(n)}static arrayRemove(...e){const n=sR(...e);return n._methodName="FieldValue.arrayRemove",new mi(n)}static increment(e){const n=oR(e);return n._methodName="FieldValue.increment",new mi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={Firestore:UT,GeoPoint:Hh,Timestamp:_e,Blob:nu,Transaction:BT,WriteBatch:jT,DocumentReference:pn,DocumentSnapshot:ru,Query:Ot,QueryDocumentSnapshot:iu,QuerySnapshot:$p,CollectionReference:io,FieldPath:yy,FieldValue:mi,setLogLevel:hR,CACHE_SIZE_UNLIMITED:y2};function pR(t,e){t.INTERNAL.registerComponent(new Pi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},fR)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){pR(t,(e,n)=>new UT(e,n,new cR)),t.registerVersion(aR,uR)}mR(xh);const Qe=J_,xo=()=>_b();function gR(t){function e(P,M,L,G,I){for(var te=0,O=0,$e=0,le=0,he,X,ct=0,zt=0,oe,It=oe=he=0,ce=0,ht=0,To=0,dt=0,Ru=L.length,Co=Ru-1,Sn,H="",Fe="",td="",nd="",lr;ce<Ru;){if(X=L.charCodeAt(ce),ce===Co&&O+le+$e+te!==0&&(O!==0&&(X=O===47?10:47),le=$e=te=0,Ru++,Co++),O+le+$e+te===0){if(ce===Co&&(0<ht&&(H=H.replace(d,"")),0<H.trim().length)){switch(X){case 32:case 9:case 59:case 13:case 10:break;default:H+=L.charAt(ce)}X=59}switch(X){case 123:for(H=H.trim(),he=H.charCodeAt(0),oe=1,dt=++ce;ce<Ru;){switch(X=L.charCodeAt(ce)){case 123:oe++;break;case 125:oe--;break;case 47:switch(X=L.charCodeAt(ce+1)){case 42:case 47:e:{for(It=ce+1;It<Co;++It)switch(L.charCodeAt(It)){case 47:if(X===42&&L.charCodeAt(It-1)===42&&ce+2!==It){ce=It+1;break e}break;case 10:if(X===47){ce=It+1;break e}}ce=It}}break;case 91:X++;case 40:X++;case 34:case 39:for(;ce++<Co&&L.charCodeAt(ce)!==X;);}if(oe===0)break;ce++}switch(oe=L.substring(dt,ce),he===0&&(he=(H=H.replace(h,"").trim()).charCodeAt(0)),he){case 64:switch(0<ht&&(H=H.replace(d,"")),X=H.charCodeAt(1),X){case 100:case 109:case 115:case 45:ht=M;break;default:ht=Ze}if(oe=e(M,ht,oe,X,I+1),dt=oe.length,0<N&&(ht=n(Ze,H,To),lr=a(3,oe,ht,M,He,Le,dt,X,I,G),H=ht.join(""),lr!==void 0&&(dt=(oe=lr.trim()).length)===0&&(X=0,oe="")),0<dt)switch(X){case 115:H=H.replace(_,o);case 100:case 109:case 45:oe=H+"{"+oe+"}";break;case 107:H=H.replace(m,"$1 $2"),oe=H+"{"+oe+"}",oe=ue===1||ue===2&&s("@"+oe,3)?"@-webkit-"+oe+"@"+oe:"@"+oe;break;default:oe=H+oe,G===112&&(oe=(Fe+=oe,""))}else oe="";break;default:oe=e(M,n(M,H,To),oe,G,I+1)}td+=oe,oe=To=ht=It=he=0,H="",X=L.charCodeAt(++ce);break;case 125:case 59:if(H=(0<ht?H.replace(d,""):H).trim(),1<(dt=H.length))switch(It===0&&(he=H.charCodeAt(0),he===45||96<he&&123>he)&&(dt=(H=H.replace(" ",":")).length),0<N&&(lr=a(1,H,M,P,He,Le,Fe.length,G,I,G))!==void 0&&(dt=(H=lr.trim()).length)===0&&(H="\0\0"),he=H.charCodeAt(0),X=H.charCodeAt(1),he){case 0:break;case 64:if(X===105||X===99){nd+=H+L.charAt(ce);break}default:H.charCodeAt(dt-1)!==58&&(Fe+=i(H,he,X,H.charCodeAt(2)))}To=ht=It=he=0,H="",X=L.charCodeAt(++ce)}}switch(X){case 13:case 10:O===47?O=0:1+he===0&&G!==107&&0<H.length&&(ht=1,H+="\0"),0<N*K&&a(0,H,M,P,He,Le,Fe.length,G,I,G),Le=1,He++;break;case 59:case 125:if(O+le+$e+te===0){Le++;break}default:switch(Le++,Sn=L.charAt(ce),X){case 9:case 32:if(le+te+O===0)switch(ct){case 44:case 58:case 9:case 32:Sn="";break;default:X!==32&&(Sn=" ")}break;case 0:Sn="\\0";break;case 12:Sn="\\f";break;case 11:Sn="\\v";break;case 38:le+O+te===0&&(ht=To=1,Sn="\f"+Sn);break;case 108:if(le+O+te+Nt===0&&0<It)switch(ce-It){case 2:ct===112&&L.charCodeAt(ce-3)===58&&(Nt=ct);case 8:zt===111&&(Nt=zt)}break;case 58:le+O+te===0&&(It=ce);break;case 44:O+$e+le+te===0&&(ht=1,Sn+="\r");break;case 34:case 39:O===0&&(le=le===X?0:le===0?X:le);break;case 91:le+O+$e===0&&te++;break;case 93:le+O+$e===0&&te--;break;case 41:le+O+te===0&&$e--;break;case 40:if(le+O+te===0){if(he===0)switch(2*ct+3*zt){case 533:break;default:he=1}$e++}break;case 64:O+$e+le+te+It+oe===0&&(oe=1);break;case 42:case 47:if(!(0<le+te+$e))switch(O){case 0:switch(2*X+3*L.charCodeAt(ce+1)){case 235:O=47;break;case 220:dt=ce,O=42}break;case 42:X===47&&ct===42&&dt+2!==ce&&(L.charCodeAt(dt+2)===33&&(Fe+=L.substring(dt,ce+1)),Sn="",O=0)}}O===0&&(H+=Sn)}zt=ct,ct=X,ce++}if(dt=Fe.length,0<dt){if(ht=M,0<N&&(lr=a(2,Fe,ht,P,He,Le,dt,G,I,G),lr!==void 0&&(Fe=lr).length===0))return nd+Fe+td;if(Fe=ht.join(",")+"{"+Fe+"}",ue*Nt!==0){switch(ue!==2||s(Fe,2)||(Nt=0),Nt){case 111:Fe=Fe.replace(E,":-moz-$1")+Fe;break;case 112:Fe=Fe.replace(v,"::-webkit-input-$1")+Fe.replace(v,"::-moz-$1")+Fe.replace(v,":-ms-input-$1")+Fe}Nt=0}}return nd+Fe+td}function n(P,M,L){var G=M.trim().split(w);M=G;var I=G.length,te=P.length;switch(te){case 0:case 1:var O=0;for(P=te===0?"":P[0]+" ";O<I;++O)M[O]=r(P,M[O],L).trim();break;default:var $e=O=0;for(M=[];O<I;++O)for(var le=0;le<te;++le)M[$e++]=r(P[le]+" ",G[O],L).trim()}return M}function r(P,M,L){var G=M.charCodeAt(0);switch(33>G&&(G=(M=M.trim()).charCodeAt(0)),G){case 38:return M.replace(g,"$1"+P.trim());case 58:return P.trim()+M.replace(g,"$1"+P.trim());default:if(0<1*L&&0<M.indexOf("\f"))return M.replace(g,(P.charCodeAt(0)===58?"":"$1")+P.trim())}return P+M}function i(P,M,L,G){var I=P+";",te=2*M+3*L+4*G;if(te===944){P=I.indexOf(":",9)+1;var O=I.substring(P,I.length-1).trim();return O=I.substring(0,P).trim()+O+";",ue===1||ue===2&&s(O,1)?"-webkit-"+O+O:O}if(ue===0||ue===2&&!s(I,1))return I;switch(te){case 1015:return I.charCodeAt(10)===97?"-webkit-"+I+I:I;case 951:return I.charCodeAt(3)===116?"-webkit-"+I+I:I;case 963:return I.charCodeAt(5)===110?"-webkit-"+I+I:I;case 1009:if(I.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+I+I;case 978:return"-webkit-"+I+"-moz-"+I+I;case 1019:case 983:return"-webkit-"+I+"-moz-"+I+"-ms-"+I+I;case 883:if(I.charCodeAt(8)===45)return"-webkit-"+I+I;if(0<I.indexOf("image-set(",11))return I.replace(je,"$1-webkit-$2")+I;break;case 932:if(I.charCodeAt(4)===45)switch(I.charCodeAt(5)){case 103:return"-webkit-box-"+I.replace("-grow","")+"-webkit-"+I+"-ms-"+I.replace("grow","positive")+I;case 115:return"-webkit-"+I+"-ms-"+I.replace("shrink","negative")+I;case 98:return"-webkit-"+I+"-ms-"+I.replace("basis","preferred-size")+I}return"-webkit-"+I+"-ms-"+I+I;case 964:return"-webkit-"+I+"-ms-flex-"+I+I;case 1023:if(I.charCodeAt(8)!==99)break;return O=I.substring(I.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+O+"-webkit-"+I+"-ms-flex-pack"+O+I;case 1005:return p.test(I)?I.replace(f,":-webkit-")+I.replace(f,":-moz-")+I:I;case 1e3:switch(O=I.substring(13).trim(),M=O.indexOf("-")+1,O.charCodeAt(0)+O.charCodeAt(M)){case 226:O=I.replace(T,"tb");break;case 232:O=I.replace(T,"tb-rl");break;case 220:O=I.replace(T,"lr");break;default:return I}return"-webkit-"+I+"-ms-"+O+I;case 1017:if(I.indexOf("sticky",9)===-1)break;case 975:switch(M=(I=P).length-10,O=(I.charCodeAt(M)===33?I.substring(0,M):I).substring(P.indexOf(":",7)+1).trim(),te=O.charCodeAt(0)+(O.charCodeAt(7)|0)){case 203:if(111>O.charCodeAt(8))break;case 115:I=I.replace(O,"-webkit-"+O)+";"+I;break;case 207:case 102:I=I.replace(O,"-webkit-"+(102<te?"inline-":"")+"box")+";"+I.replace(O,"-webkit-"+O)+";"+I.replace(O,"-ms-"+O+"box")+";"+I}return I+";";case 938:if(I.charCodeAt(5)===45)switch(I.charCodeAt(6)){case 105:return O=I.replace("-items",""),"-webkit-"+I+"-webkit-box-"+O+"-ms-flex-"+O+I;case 115:return"-webkit-"+I+"-ms-flex-item-"+I.replace($,"")+I;default:return"-webkit-"+I+"-ms-flex-line-pack"+I.replace("align-content","").replace($,"")+I}break;case 973:case 989:if(I.charCodeAt(3)!==45||I.charCodeAt(4)===122)break;case 931:case 953:if(B.test(P)===!0)return(O=P.substring(P.indexOf(":")+1)).charCodeAt(0)===115?i(P.replace("stretch","fill-available"),M,L,G).replace(":fill-available",":stretch"):I.replace(O,"-webkit-"+O)+I.replace(O,"-moz-"+O.replace("fill-",""))+I;break;case 962:if(I="-webkit-"+I+(I.charCodeAt(5)===102?"-ms-"+I:"")+I,L+G===211&&I.charCodeAt(13)===105&&0<I.indexOf("transform",10))return I.substring(0,I.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+I}return I}function s(P,M){var L=P.indexOf(M===1?":":"{"),G=P.substring(0,M!==3?L:10);return L=P.substring(L+1,P.length-1),q(M!==2?G:G.replace(Z,"$1"),L,M)}function o(P,M){var L=i(M,M.charCodeAt(0),M.charCodeAt(1),M.charCodeAt(2));return L!==M+";"?L.replace(D," or ($1)").substring(4):"("+M+")"}function a(P,M,L,G,I,te,O,$e,le,he){for(var X=0,ct=M,zt;X<N;++X)switch(zt=ze[X].call(c,P,ct,L,G,I,te,O,$e,le,he)){case void 0:case!1:case!0:case null:break;default:ct=zt}if(ct!==M)return ct}function u(P){switch(P){case void 0:case null:N=ze.length=0;break;default:if(typeof P=="function")ze[N++]=P;else if(typeof P=="object")for(var M=0,L=P.length;M<L;++M)u(P[M]);else K=!!P|0}return u}function l(P){return P=P.prefix,P!==void 0&&(q=null,P?typeof P!="function"?ue=1:(ue=2,q=P):ue=0),l}function c(P,M){var L=P;if(33>L.charCodeAt(0)&&(L=L.trim()),ve=L,L=[ve],0<N){var G=a(-1,M,L,L,He,Le,0,0,0,0);G!==void 0&&typeof G=="string"&&(M=G)}var I=e(Ze,L,M,0,0);return 0<N&&(G=a(-2,I,L,L,He,Le,I.length,0,0,0),G!==void 0&&(I=G)),ve="",Nt=0,Le=He=1,I}var h=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,y=/([,: ])(transform)/g,w=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,E=/:(read-only)/g,T=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,D=/([\s\S]*?);/g,$=/-self|flex-/g,Z=/[^]*?(:[rp][el]a[\w-]+)[^]*/,B=/stretch|:\s*\w+\-(?:conte|avail)/,je=/([^-])(image-set\()/,Le=1,He=1,Nt=0,ue=1,Ze=[],ze=[],N=0,q=null,K=0,ve="";return c.use=u,c.set=l,t!==void 0&&l(t),c}var yR={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function vR(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var wR=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kw=vR(function(t){return wR.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function Mn(){return(Mn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var _w=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},Op=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!Fm.exports.typeOf(t)},Nc=Object.freeze([]),Pr=Object.freeze({});function su(t){return typeof t=="function"}function bw(t){return t.displayName||t.name||"Component"}function vy(t){return t&&typeof t.styledComponentId=="string"}var so=typeof process<"u"&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",wy=typeof window<"u"&&"HTMLElement"in window,SR=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:!1),ER={};function Pu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var IR=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;n>=o;)(o<<=1)<0&&Pu(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var u=this.indexOfGroup(n+1),l=0,c=r.length;l<c;l++)this.tag.insertRule(u,r[l])&&(this.groupSizes[n]++,u++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),o=s+i,a=s;a<o;a++)r+=this.tag.getRule(a)+`/*!sc*/
`;return r},t}(),Dl=new Map,$c=new Map,ma=1,ul=function(t){if(Dl.has(t))return Dl.get(t);for(;$c.has(ma);)ma++;var e=ma++;return Dl.set(t,e),$c.set(e,t),e},xR=function(t){return $c.get(t)},TR=function(t,e){e>=ma&&(ma=e+1),Dl.set(t,e),$c.set(e,t)},CR="style["+so+'][data-styled-version="5.3.5"]',kR=new RegExp("^"+so+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),_R=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},bR=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(kR);if(a){var u=0|parseInt(a[1],10),l=a[2];u!==0&&(TR(l,u),_R(t,l,a[3]),t.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},DR=function(){return typeof window<"u"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},KT=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){for(var u=a.childNodes,l=u.length;l>=0;l--){var c=u[l];if(c&&c.nodeType===1&&c.hasAttribute(so))return c}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(so,"active"),r.setAttribute("data-styled-version","5.3.5");var o=DR();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},AR=function(){function t(n){var r=this.element=KT(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var u=s[o];if(u.ownerNode===i)return u}Pu(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),NR=function(){function t(n){var r=this.element=KT(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),$R=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),Dw=wy,OR={isServer:!wy,useCSSOMInjection:!SR},Oc=function(){function t(n,r,i){n===void 0&&(n=Pr),r===void 0&&(r={}),this.options=Mn({},OR,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&wy&&Dw&&(Dw=!1,function(s){for(var o=document.querySelectorAll(CR),a=0,u=o.length;a<u;a++){var l=o[a];l&&l.getAttribute(so)!=="active"&&(bR(s,l),l.parentNode&&l.parentNode.removeChild(l))}}(this))}t.registerId=function(n){return ul(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(Mn({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,o=r.target,n=i?new $R(o):s?new AR(o):new NR(o),new IR(n)));var n,r,i,s,o},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(ul(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(ul(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(ul(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",o=0;o<i;o++){var a=xR(o);if(a!==void 0){var u=n.names.get(a),l=r.getGroup(o);if(u&&l&&u.size){var c=so+".g"+o+'[id="'+a+'"]',h="";u!==void 0&&u.forEach(function(d){d.length>0&&(h+=d+",")}),s+=""+l+c+'{content:"'+h+`"}/*!sc*/
`}}}return s}(this)},t}(),PR=/(a)(d)/gi,Aw=function(t){return String.fromCharCode(t+(t>25?39:97))};function Pp(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=Aw(e%52)+n;return(Aw(e%52)+n).replace(PR,"$1-$2")}var ks=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},GT=function(t){return ks(5381,t)};function WT(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(su(n)&&!vy(n))return!1}return!0}var RR=GT("5.3.5"),MR=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&WT(e),this.componentId=n,this.baseHash=ks(RR,n),this.baseStyle=r,Oc.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=Qi(this.rules,e,n,r).join(""),a=Pp(ks(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var u=r(o,"."+a,void 0,i);n.insertRules(i,a,u)}s.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=ks(this.baseHash,r.hash),h="",d=0;d<l;d++){var f=this.rules[d];if(typeof f=="string")h+=f;else if(f){var p=Qi(f,e,n,r),y=Array.isArray(p)?p.join(""):p;c=ks(c,y+d),h+=y}}if(h){var w=Pp(c>>>0);if(!n.hasNameForId(i,w)){var g=r(h,"."+w,void 0,i);n.insertRules(i,w,g)}s.push(w)}}return s.join(" ")},t}(),LR=/^\s*\/\/.*$/gm,FR=[":","[",".","#"];function VR(t){var e,n,r,i,s=t===void 0?Pr:t,o=s.options,a=o===void 0?Pr:o,u=s.plugins,l=u===void 0?Nc:u,c=new gR(a),h=[],d=function(y){function w(g){if(g)try{y(g+"}")}catch{}}return function(g,m,v,E,T,_,D,$,Z,B){switch(g){case 1:if(Z===0&&m.charCodeAt(0)===64)return y(m+";"),"";break;case 2:if($===0)return m+"/*|*/";break;case 3:switch($){case 102:case 112:return y(v[0]+m),"";default:return m+(B===0?"/*|*/":"")}case-2:m.split("/*|*/}").forEach(w)}}}(function(y){h.push(y)}),f=function(y,w,g){return w===0&&FR.indexOf(g[n.length])!==-1||g.match(i)?y:"."+e};function p(y,w,g,m){m===void 0&&(m="&");var v=y.replace(LR,""),E=w&&g?g+" "+w+" { "+v+" }":v;return e=m,n=w,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(g||!w?"":w,E)}return c.use([].concat(l,[function(y,w,g){y===2&&g.length&&g[0].lastIndexOf(n)>0&&(g[0]=g[0].replace(r,f))},d,function(y){if(y===-2){var w=h;return h=[],w}}])),p.hash=l.length?l.reduce(function(y,w){return w.name||Pu(15),ks(y,w.name)},5381).toString():"",p}var HT=ao.createContext();HT.Consumer;var QT=ao.createContext(),UR=(QT.Consumer,new Oc),Rp=VR();function YT(){return ge.exports.useContext(HT)||UR}function XT(){return ge.exports.useContext(QT)||Rp}var BR=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Rp);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.toString=function(){return Pu(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=Rp),this.name+e.hash},t}(),jR=/([A-Z])/,zR=/([A-Z])/g,qR=/^ms-/,KR=function(t){return"-"+t.toLowerCase()};function Nw(t){return jR.test(t)?t.replace(zR,KR).replace(qR,"-ms-"):t}var $w=function(t){return t==null||t===!1||t===""};function Qi(t,e,n,r){if(Array.isArray(t)){for(var i,s=[],o=0,a=t.length;o<a;o+=1)(i=Qi(t[o],e,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if($w(t))return"";if(vy(t))return"."+t.styledComponentId;if(su(t)){if(typeof(l=t)!="function"||l.prototype&&l.prototype.isReactComponent||!e)return t;var u=t(e);return Qi(u,e,n,r)}var l;return t instanceof BR?n?(t.inject(n,r),t.getName(r)):t:Op(t)?function c(h,d){var f,p,y=[];for(var w in h)h.hasOwnProperty(w)&&!$w(h[w])&&(Array.isArray(h[w])&&h[w].isCss||su(h[w])?y.push(Nw(w)+":",h[w],";"):Op(h[w])?y.push.apply(y,c(h[w],w)):y.push(Nw(w)+": "+(f=w,(p=h[w])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||f in yR?String(p).trim():p+"px")+";"));return d?[d+" {"].concat(y,["}"]):y}(t):t.toString()}var Ow=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function JT(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return su(t)||Op(t)?Ow(Qi(_w(Nc,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:Ow(Qi(_w(t,n)))}var ZT=function(t,e,n){return n===void 0&&(n=Pr),t.theme!==n.theme&&t.theme||e||n.theme},GR=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,WR=/(^-|-$)/g;function Zd(t){return t.replace(GR,"-").replace(WR,"")}var eC=function(t){return Pp(GT(t)>>>0)};function ll(t){return typeof t=="string"&&!0}var Mp=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},HR=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function QR(t,e,n){var r=t[n];Mp(e)&&Mp(r)?tC(r,e):t[n]=e}function tC(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(Mp(o))for(var a in o)HR(a)&&QR(t,o[a],a)}return t}var Sy=ao.createContext();Sy.Consumer;var ef={};function nC(t,e,n){var r=vy(t),i=!ll(t),s=e.attrs,o=s===void 0?Nc:s,a=e.componentId,u=a===void 0?function(m,v){var E=typeof m!="string"?"sc":Zd(m);ef[E]=(ef[E]||0)+1;var T=E+"-"+eC("5.3.5"+E+ef[E]);return v?v+"-"+T:T}(e.displayName,e.parentComponentId):a,l=e.displayName,c=l===void 0?function(m){return ll(m)?"styled."+m:"Styled("+bw(m)+")"}(t):l,h=e.displayName&&e.componentId?Zd(e.displayName)+"-"+e.componentId:e.componentId||u,d=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,f=e.shouldForwardProp;r&&t.shouldForwardProp&&(f=e.shouldForwardProp?function(m,v,E){return t.shouldForwardProp(m,v,E)&&e.shouldForwardProp(m,v,E)}:t.shouldForwardProp);var p,y=new MR(n,h,r?t.componentStyle:void 0),w=y.isStatic&&o.length===0,g=function(m,v){return function(E,T,_,D){var $=E.attrs,Z=E.componentStyle,B=E.defaultProps,je=E.foldedComponentIds,Le=E.shouldForwardProp,He=E.styledComponentId,Nt=E.target,ue=function(G,I,te){G===void 0&&(G=Pr);var O=Mn({},I,{theme:G}),$e={};return te.forEach(function(le){var he,X,ct,zt=le;for(he in su(zt)&&(zt=zt(O)),zt)O[he]=$e[he]=he==="className"?(X=$e[he],ct=zt[he],X&&ct?X+" "+ct:X||ct):zt[he]}),[O,$e]}(ZT(T,ge.exports.useContext(Sy),B)||Pr,T,$),Ze=ue[0],ze=ue[1],N=function(G,I,te,O){var $e=YT(),le=XT(),he=I?G.generateAndInjectStyles(Pr,$e,le):G.generateAndInjectStyles(te,$e,le);return he}(Z,D,Ze),q=_,K=ze.$as||T.$as||ze.as||T.as||Nt,ve=ll(K),P=ze!==T?Mn({},T,{},ze):T,M={};for(var L in P)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?M.as=P[L]:(Le?Le(L,kw,K):!ve||kw(L))&&(M[L]=P[L]));return T.style&&ze.style!==T.style&&(M.style=Mn({},T.style,{},ze.style)),M.className=Array.prototype.concat(je,He,N!==He?N:null,T.className,ze.className).filter(Boolean).join(" "),M.ref=q,ge.exports.createElement(K,M)}(p,m,v,w)};return g.displayName=c,(p=ao.forwardRef(g)).attrs=d,p.componentStyle=y,p.displayName=c,p.shouldForwardProp=f,p.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Nc,p.styledComponentId=h,p.target=r?t.target:t,p.withComponent=function(m){var v=e.componentId,E=function(_,D){if(_==null)return{};var $,Z,B={},je=Object.keys(_);for(Z=0;Z<je.length;Z++)$=je[Z],D.indexOf($)>=0||(B[$]=_[$]);return B}(e,["componentId"]),T=v&&v+"-"+(ll(m)?m:Zd(bw(m)));return nC(m,Mn({},E,{attrs:d,componentId:T}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(m){this._foldedDefaultProps=r?tC({},t.defaultProps,m):m}}),p.toString=function(){return"."+p.styledComponentId},i&&hb(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var Lp=function(t){return function e(n,r,i){if(i===void 0&&(i=Pr),!Fm.exports.isValidElementType(r))return Pu(1,String(r));var s=function(){return n(r,i,JT.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,r,Mn({},i,{},o))},s.attrs=function(o){return e(n,r,Mn({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},s}(nC,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){Lp[t]=Lp(t)});var YR=function(){function t(n,r){this.rules=n,this.componentId=r,this.isStatic=WT(n),Oc.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(n,r,i,s){var o=s(Qi(this.rules,r,i,s).join(""),""),a=this.componentId+n;i.insertRules(a,a,o)},e.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.renderStyles=function(n,r,i,s){n>2&&Oc.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,s)},t}();function XR(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=JT.apply(void 0,[t].concat(n)),s="sc-global-"+eC(JSON.stringify(i)),o=new YR(i,s);function a(l){var c=YT(),h=XT(),d=ge.exports.useContext(Sy),f=ge.exports.useRef(c.allocateGSInstance(s)).current;return c.server&&u(f,l,c,d,h),ge.exports.useLayoutEffect(function(){if(!c.server)return u(f,l,c,d,h),function(){return o.removeStyles(f,c)}},[f,l,c,d,h]),null}function u(l,c,h,d,f){if(o.isStatic)o.renderStyles(l,ER,h,f);else{var p=Mn({},c,{theme:ZT(c,d,a.defaultProps)});o.renderStyles(l,p,h,f)}}return ao.memo(a)}const jt=Lp,JR=jt.div`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.7)),
    fixed no-repeat url("../SearchImages/wii.jpg"),
    fixed url("../SearchImages/ps2.jpg"),
    fixed
      url("../SearchImages/pierre-roussel-snes-phone2-pal.jpg");
  background-position: center;
  min-height: 100vh;
  @media screen and (max-width: 500px) {
    overflow-x: scroll;
    align-items: flex-start;
  }
`,ZR=jt.img`
  width: 100vw;
  max-width: 100%;
`,eM=jt.div`
  display: flex;
  position: relative;
  flex-direction: column;
  border-radius: 15px;
  padding: 2px;
  box-shadow: ${t=>t.isThisImage?"4px 4px 8px 0px #ffe54c":""};
  transform: ${t=>t.isThisImage?"scale(1.1)":""};
  margin: 0 40px;
  transition: all ease-in-out 0.1s;
  position: relative;
  z-index: 0;
  border-radius: 10px;
  overflow: hidden;

  &::before {
    content: "";
    position: absolute;
    z-index: -2;
    left: -50%;
    top: -50%;
    width: 200%;
    height: 200%;
    background-color: #399953;
    background-repeat: no-repeat;
    background-size: 50% 50%, 50% 50%;
    background-position: 0 0, 100% 0, 100% 100%, 0 100%;
    background-image: linear-gradient(black, black),
      linear-gradient(#ffe54c, #ffe54c), linear-gradient(black, black),
      linear-gradient(#ffe54c, #ffe54c);
    animation: rotate 4s linear infinite;
  }

  @keyframes rotate {
    100% {
      transform: rotate(1turn);
    }
  }

  @keyframes opacityChange {
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0.5;
    }
  }

  &::after {
    content: "";
    position: absolute;
    z-index: -1;
    left: 6px;
    top: 6px;
    width: calc(100% - 12px);
    height: calc(100% - 12px);
    background: black;
    border-radius: 5px;
    animation: opacityChange 3s infinite alternate;
  }

  &:hover {
    transform: ${t=>t.isThisImage?"":"scale(1.05)"};
  }

  &:active {
    transform: scale(1.15);
  }
`,tM=jt.button`
  width: 10%;
  cursor: pointer;
  font-family: "Orbitron", serif;

  & {
    font-size: 16px;
    font-weight: 200;
    letter-spacing: 1px;
    padding: 13px 20px 13px;
    outline: 0;
    border: 1px solid black;
    cursor: pointer;
    position: relative;
    background-color: rgba(0, 0, 0, 0);
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
  }

  &:after {
    content: "";
    background-color: #ffe54c;
    width: 100%;
    z-index: -1;
    position: absolute;
    height: 100%;
    top: 7px;
    left: 7px;
    transition: 0.2s;
  }

  &:hover:after {
    top: 0px;
    left: 0px;
  }
`,nM=jt.div`
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 50px 0;
  flex-direction: column;
  transition: all ease-in-out 0.3s;
  padding: 20px;
  border-radius: 15px;
  backdrop-filter: blur(5px);

  @media screen and (max-width: 500px) {
    overflow-x: scroll;
    align-items: flex-start;
  }
`,rM=jt.div`
  display: flex;
  margin: 40px;
`,iM=jt.h1`
  font-size: 1.4rem;
  position: absolute;
  top: 5%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-family: "Orbitron", cursive;
`,sM=jt.img`
  width: 200px;
  border-radius: 15px;
  cursor: pointer;
`;function Yi(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function At(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function vn(t){At(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function rC(t,e){At(2,arguments);var n=vn(t).getTime(),r=Yi(e);return new Date(n+r)}var oM={};function ed(){return oM}function aM(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function uM(t){return At(1,arguments),t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lM(t){if(At(1,arguments),!uM(t)&&typeof t!="number")return!1;var e=vn(t);return!isNaN(Number(e))}function iC(t,e){return At(2,arguments),vn(t).getTime()-vn(e).getTime()}function cM(t,e){At(2,arguments);var n=Yi(e);return rC(t,-n)}var hM=864e5;function dM(t){At(1,arguments);var e=vn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/hM)+1}function Pc(t){At(1,arguments);var e=1,n=vn(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function sC(t){At(1,arguments);var e=vn(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Pc(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Pc(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function fM(t){At(1,arguments);var e=sC(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Pc(n);return r}var pM=6048e5;function mM(t){At(1,arguments);var e=vn(t),n=Pc(e).getTime()-fM(e).getTime();return Math.round(n/pM)+1}function Rc(t,e){var n,r,i,s,o,a,u,l;At(1,arguments);var c=ed(),h=Yi((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=vn(t),f=d.getUTCDay(),p=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-p),d.setUTCHours(0,0,0,0),d}function oC(t,e){var n,r,i,s,o,a,u,l;At(1,arguments);var c=vn(t),h=c.getUTCFullYear(),d=ed(),f=Yi((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(u=d.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,f),p.setUTCHours(0,0,0,0);var y=Rc(p,e),w=new Date(0);w.setUTCFullYear(h,0,f),w.setUTCHours(0,0,0,0);var g=Rc(w,e);return c.getTime()>=y.getTime()?h+1:c.getTime()>=g.getTime()?h:h-1}function gM(t,e){var n,r,i,s,o,a,u,l;At(1,arguments);var c=ed(),h=Yi((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),d=oC(t,e),f=new Date(0);f.setUTCFullYear(d,0,h),f.setUTCHours(0,0,0,0);var p=Rc(f,e);return p}var yM=6048e5;function vM(t,e){At(1,arguments);var n=vn(t),r=Rc(n,e).getTime()-gM(n,e).getTime();return Math.round(r/yM)+1}function de(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var wM={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return de(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):de(n+1,2)},d:function(t,e){return de(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return de(t.getUTCHours()%12||12,e.length)},H:function(t,e){return de(t.getUTCHours(),e.length)},m:function(t,e){return de(t.getUTCMinutes(),e.length)},s:function(t,e){return de(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return de(i,e.length)}};const dr=wM;var cs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SM={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return dr.y(t,e)},Y:function(t,e,n,r){var i=oC(t,r),s=i>0?i:1-i;if(e==="YY"){var o=s%100;return de(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):de(s,e.length)},R:function(t,e){var n=sC(t);return de(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return de(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return de(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return de(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return dr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return de(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=vM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):de(i,e.length)},I:function(t,e,n){var r=mM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):de(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):dr.d(t,e)},D:function(t,e,n){var r=dM(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):de(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return de(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return de(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return de(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),i;switch(r===12?i=cs.noon:r===0?i=cs.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),i;switch(r>=17?i=cs.evening:r>=12?i=cs.afternoon:r>=4?i=cs.morning:i=cs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return dr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):dr.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):de(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):de(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):dr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):dr.s(t,e)},S:function(t,e){return dr.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Rw(s);case"XXXX":case"XX":return ci(s);case"XXXXX":case"XXX":default:return ci(s,":")}},x:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"x":return Rw(s);case"xxxx":case"xx":return ci(s);case"xxxxx":case"xxx":default:return ci(s,":")}},O:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Pw(s,":");case"OOOO":default:return"GMT"+ci(s,":")}},z:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Pw(s,":");case"zzzz":default:return"GMT"+ci(s,":")}},t:function(t,e,n,r){var i=r._originalDate||t,s=Math.floor(i.getTime()/1e3);return de(s,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,s=i.getTime();return de(s,e.length)}};function Pw(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+de(s,2)}function Rw(t,e){if(t%60===0){var n=t>0?"-":"+";return n+de(Math.abs(t)/60,2)}return ci(t,e)}function ci(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=de(Math.floor(i/60),2),o=de(i%60,2);return r+s+n+o}const EM=SM;var Mw=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},aC=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},IM=function(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Mw(t,e);var s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Mw(r,e)).replace("{{time}}",aC(i,e))},xM={p:aC,P:IM};const TM=xM;var CM=["D","DD"],kM=["YY","YYYY"];function _M(t){return CM.indexOf(t)!==-1}function bM(t){return kM.indexOf(t)!==-1}function Lw(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var DM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},AM=function(t,e,n){var r,i=DM[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const NM=AM;function tf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var $M={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RM={date:tf({formats:$M,defaultWidth:"full"}),time:tf({formats:OM,defaultWidth:"full"}),dateTime:tf({formats:PM,defaultWidth:"full"})};const MM=RM;var LM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FM=function(t,e,n,r){return LM[t]};const VM=FM;function Bo(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[a]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var UM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GM=function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},WM={ordinalNumber:GM,era:Bo({values:UM,defaultWidth:"wide"}),quarter:Bo({values:BM,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Bo({values:jM,defaultWidth:"wide"}),day:Bo({values:zM,defaultWidth:"wide"}),dayPeriod:Bo({values:qM,defaultWidth:"wide",formattingValues:KM,defaultFormattingWidth:"wide"})};const HM=WM;function jo(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?YM(a,function(h){return h.test(o)}):QM(a,function(h){return h.test(o)}),l;l=t.valueCallback?t.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;var c=e.slice(o.length);return{value:l,rest:c}}}function QM(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function YM(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function XM(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var JM=/^(\d+)(th|st|nd|rd)?/i,ZM=/\d+/i,eL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tL={any:[/^b/i,/^(a|c)/i]},nL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rL={any:[/1/i,/2/i,/3/i,/4/i]},iL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cL={ordinalNumber:XM({matchPattern:JM,parsePattern:ZM,valueCallback:function(t){return parseInt(t,10)}}),era:jo({matchPatterns:eL,defaultMatchWidth:"wide",parsePatterns:tL,defaultParseWidth:"any"}),quarter:jo({matchPatterns:nL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:jo({matchPatterns:iL,defaultMatchWidth:"wide",parsePatterns:sL,defaultParseWidth:"any"}),day:jo({matchPatterns:oL,defaultMatchWidth:"wide",parsePatterns:aL,defaultParseWidth:"any"}),dayPeriod:jo({matchPatterns:uL,defaultMatchWidth:"any",parsePatterns:lL,defaultParseWidth:"any"})};const hL=cL;var dL={code:"en-US",formatDistance:NM,formatLong:MM,formatRelative:VM,localize:HM,match:hL,options:{weekStartsOn:0,firstWeekContainsDate:1}};const fL=dL;var pL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gL=/^'([^]*?)'?$/,yL=/''/g,vL=/[a-zA-Z]/;function uC(t,e,n){var r,i,s,o,a,u,l,c,h,d,f,p,y,w,g,m,v,E;At(2,arguments);var T=String(e),_=ed(),D=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:_.locale)!==null&&r!==void 0?r:fL,$=Yi((s=(o=(a=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:_.firstWeekContainsDate)!==null&&o!==void 0?o:(h=_.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!($>=1&&$<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Z=Yi((f=(p=(y=(w=n==null?void 0:n.weekStartsOn)!==null&&w!==void 0?w:n==null||(g=n.locale)===null||g===void 0||(m=g.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&y!==void 0?y:_.weekStartsOn)!==null&&p!==void 0?p:(v=_.locale)===null||v===void 0||(E=v.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&f!==void 0?f:0);if(!(Z>=0&&Z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!D.localize)throw new RangeError("locale must contain localize property");if(!D.formatLong)throw new RangeError("locale must contain formatLong property");var B=vn(t);if(!lM(B))throw new RangeError("Invalid time value");var je=aM(B),Le=cM(B,je),He={firstWeekContainsDate:$,weekStartsOn:Z,locale:D,_originalDate:B},Nt=T.match(mL).map(function(ue){var Ze=ue[0];if(Ze==="p"||Ze==="P"){var ze=TM[Ze];return ze(ue,D.formatLong)}return ue}).join("").match(pL).map(function(ue){if(ue==="''")return"'";var Ze=ue[0];if(Ze==="'")return wL(ue);var ze=EM[Ze];if(ze)return!(n!=null&&n.useAdditionalWeekYearTokens)&&bM(ue)&&Lw(ue,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&_M(ue)&&Lw(ue,e,String(t)),ze(Le,ue,D.localize,He);if(Ze.match(vL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ze+"`");return ue}).join("");return Nt}function wL(t){var e=t.match(gL);return e?e[1].replace(yL,"'"):t}const SL=jt.div`
  display: flex;
  position: fixed;
  top: 0;
  left: 0;
  justify-content: center;
  color: white;
  user-select: none;
  z-index: 2;
  font-family: 'Orbitron', sans-serif;
`,EL=()=>{const t=Qe(r=>r.time.time),e=new Date(t),n=xo();return ge.exports.useEffect(()=>{setTimeout(()=>n(vE(rC(e,1).toISOString())),1)}),J(SL,{children:uC(iC(new Date,e),"mm:ss:SS")})},IL=t=>Yn("div",{className:t.className,children:[J("h2",{children:t.name}),J("img",{src:t.image,alt:t.name})]}),xL=jt.header`
  display: flex;
  flex-direction: row;
  position: fixed;
  top: 0;
  width: 100vw;
  padding: 10px;
  justify-content: center;
  color: white;
  backdrop-filter: blur(5px);
  user-select: none;
  background-color: rgba(41, 59, 72, 0.3);
  z-index: 2;

  img {
    height: 100px;
  }

  h2 {
    font-size: 1rem;
    font-family: "Orbitron", serif;
    margin-right: 20px;
  }

  @media screen and (max-width: 500px) {
    padding: 4px;

    img{
      height: 50px;
    }
  }
`,TL=jt(IL)`
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: auto;
  height: 100px;
  width: 100%;
  opacity: ${t=>t.found?.3:1};

  @media screen and (max-width: 500px) {
    h2{
      margin-right: 5px;
    }
  }
`,CL=()=>{const t=Qe(r=>r.heroes.value),e=Qe(r=>r.currentSearchImage.currentSearchImageURL),n=Qe(r=>r.time.isCounting);return J(hu,{children:e&&n&&J(xL,{children:t.map(r=>J(TL,{name:r.name,image:r.image,found:r.found},r.name))})})},kL=jt.div`
  display: flex;
  flex-direction: column;
  position: absolute;
  left: ${t=>t.crosshairCoordinateX/t.windowWidth*100}%;
  top: ${t=>t.crosshairCoordinateY/t.windowHeight*100}%;
`,_L=jt.div`
  display: flex;
  flex-direction: column;
  padding-top: 20%;
  padding-left: 20%;
`,bL=jt.button`
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 5px;
  width: 150%;
  margin: 2px;
  padding: 0 2px;
  font-family: 'Orbitron', serif;
  font-weight: bolder;
  cursor: pointer;
`,DL=t=>J(hu,{children:!t.found&&J(bL,{onClick:()=>t.handleChoiceClick(t.name),className:"option",children:t.name})}),AL=t=>{const e=xo(),n=Qe(o=>o.heroes.value),r=Qe(o=>o.currentSearchImage.rightCoordinates),i=o=>{r.forEach(a=>{t.reference.current&&a[o]&&+a[o].split(" ")[0]<t.crosshairCoordinateX/t.reference.current.clientWidth*100&&+a[o].split(" ")[1]<t.crosshairCoordinateY/t.reference.current.clientHeight*100&&+a[o].split(" ")[2]>t.crosshairCoordinateX/t.reference.current.clientWidth*100&&+a[o].split(" ")[3]>t.crosshairCoordinateY/t.reference.current.clientHeight*100&&e(Hm(n.map(u=>u.name==o?{...u,found:!0}:u)))}),e(t.setWasClicked())},s=n.map(o=>J(DL,{name:o.name,found:o.found,handleChoiceClick:i},o.name));return J(hu,{children:t.wasClicked&&J(kL,{crosshairCoordinateX:t.crosshairCoordinateX,crosshairCoordinateY:t.crosshairCoordinateY,windowWidth:window.innerWidth,windowHeight:window.innerHeight,children:J(_L,{children:s})})})};var NL={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function $L(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return NL[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function nf(t){var e=$L(t);return"".concat(e.value).concat(e.unit)}var lC=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,o=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(o,0),r},Mc;(function(t){t.maroon="#800000",t.red="#FF0000",t.orange="#FFA500",t.yellow="#FFFF00",t.olive="#808000",t.green="#008000",t.purple="#800080",t.fuchsia="#FF00FF",t.lime="#00FF00",t.teal="#008080",t.aqua="#00FFFF",t.blue="#0000FF",t.navy="#000080",t.black="#000000",t.gray="#808080",t.silver="#C0C0C0",t.white="#FFFFFF"})(Mc||(Mc={}));var OL=function(t,e){if(Object.keys(Mc).includes(t)&&(t=Mc[t]),t[0]==="#"&&(t=t.slice(1)),t.length===3){var n="";t.split("").forEach(function(i){n+=i,n+=i}),t=n}var r=(t.match(/.{2}/g)||[]).map(function(i){return parseInt(i,16)}).join(", ");return"rgba(".concat(r,", ").concat(e,")")},Lc=globalThis&&globalThis.__assign||function(){return Lc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lc.apply(this,arguments)},PL=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},RL=lC("BarLoader","0% {left: -35%;right: 100%} 60% {left: 100%;right: -90%} 100% {left: 100%;right: -90%}","long"),ML=lC("BarLoader","0% {left: -200%;right: 100%} 60% {left: 107%;right: -8%} 100% {left: 107%;right: -8%}","short");function LL(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,i=r===void 0?"#000000":r,s=t.speedMultiplier,o=s===void 0?1:s,a=t.cssOverride,u=a===void 0?{}:a,l=t.height,c=l===void 0?4:l,h=t.width,d=h===void 0?100:h,f=PL(t,["loading","color","speedMultiplier","cssOverride","height","width"]),p=Lc({display:"inherit",position:"relative",width:nf(d),height:nf(c),overflow:"hidden",backgroundColor:OL(i,.2),backgroundClip:"padding-box"},u),y=function(w){return{position:"absolute",height:nf(c),overflow:"hidden",backgroundColor:i,backgroundClip:"padding-box",display:"block",borderRadius:2,willChange:"left, right",animationFillMode:"forwards",animation:"".concat(w===1?RL:ML," ").concat(2.1/o,"s ").concat(w===2?"".concat(1.15/o,"s"):""," ").concat(w===1?"cubic-bezier(0.65, 0.815, 0.735, 0.395)":"cubic-bezier(0.165, 0.84, 0.44, 1)"," infinite")}};return n?Yn("span",{...Lc({style:p},f),children:[J("span",{style:y(1)}),J("span",{style:y(2)})]}):null}var FL="firebase",VL="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xh.registerVersion(FL,VL,"app-compat");const UL={apiKey:"AIzaSyBty4ic-Qsr_wyXC_CK2XHAnxve7jE1Ysw",authDomain:"where-is-waldo-bee31.firebaseapp.com",projectId:"where-is-waldo-bee31",storageBucket:"where-is-waldo-bee31.appspot.com",messagingSenderId:"750759008904",appId:"1:750759008904:web:3ddab790d89d56c29e9d3d"},BL=xh.initializeApp(UL),ga=xh.firestore(BL),jL=ga.collection("results"),zL=jt.table`
  width: 50%;
  table-layout: fixed;
  height: 300px;
  overflow-x: auto;
  border: 1px solid rgba(255, 255, 255, 0.3);
  font-family: "Orbitron", serif;
  backdrop-filter: blur(5px);
  padding: 15px;
  margin: 15px;
  box-sizing: border-box;
  text-align: center;

  th:nth-child(1) {
    width: 50px;
  }

  th:nth-child(3) {
    width: 100px;
  }

  th {
    text-align: center;
    padding: 20px 15px;
    font-weight: 500;
    font-size: 12px;
    color: #fff;
    text-transform: uppercase;
  }

  td {
    padding: 15px;
    text-align: left;
    vertical-align: middle;
    font-weight: 300;
    font-size: 12px;
    color: #fff;
    border-bottom: solid 1px rgba(255, 255, 255, 0.1);
    text-align: center;
  }

  @media screen and (max-width: 780px) {
    width: 80%;
  }
`,qL=()=>{const t=xo(),e=Qe(i=>i.leaderboard.currentLeaderboardData),n=Qe(i=>i.currentSearchImage.searchImage),r=Qe(i=>i.leaderboard.allLeaderboardData);return ge.exports.useEffect(()=>{(async()=>{try{const i=Ci(ga,"results/wii/players"),s=xn(i,bl("time")),a=(await pa(s)).docs.map(w=>({...w.data(),id:w.id})),u=Ci(ga,"results/snes/players"),l=xn(u,bl("time")),h=(await pa(l)).docs.map(w=>({...w.data(),id:w.id})),d=Ci(ga,"results/ps2/players"),f=xn(d,bl("time")),y=(await pa(f)).docs.map(w=>({...w.data(),id:w.id}));t(fD([h,a,y]))}catch(i){console.log(i)}})()},[]),ge.exports.useEffect(()=>{const i=$i.findIndex(s=>s.name==n);t(EE(r[i])),t(oc($i[i].url))}),J(hu,{children:e!=null&&e.length?Yn(zL,{children:[J("thead",{children:Yn("tr",{children:[J("th",{scope:"col",children:"Place"}),J("th",{scope:"col",children:"Name"}),J("th",{scope:"col",children:"Time"})]})}),e.map((i,s)=>J("tbody",{children:Yn("tr",{children:[J("td",{children:s+1}),J("td",{children:i.name}),J("td",{children:(i==null?void 0:i.time)&&uC(i.time,"mm:ss:SS")})]})}))]}):J(LL,{color:"#ffe54c"})})},KL=t=>{const e=Qe(s=>s.currentSearchImage.currentSearchImageURL),n=t.url===e,r=xo();return Yn(eM,{onClick:()=>{r(lD(t.name)),r(oc(t.url)),r(Hm(t.heroes.map(s=>({...s,found:!1}))))},isThisImage:n,children:[J(iM,{children:t.name}),J(sM,{isThisImage:n,src:t.url,alt:t.name})]})},GL=()=>{const t=xo(),e=()=>{t(yE(!0)),t(vE(new Date().toISOString()))},n=$i.map(r=>J(KL,{name:r.name,url:r.url,heroes:r.heroes},r.name));return Yn(nM,{children:[J(rM,{children:n}),J(tM,{onClick:e,children:"Play!"})]})},WL=()=>{const t=xo(),e=Qe(f=>f.time.isCounting),n=Qe(f=>f.heroes.value),r=Qe(f=>n.every(p=>p.found==!0)?f.time.time:0),i=Qe(f=>f.currentSearchImage.searchImage),s=Qe(f=>f.crosshair.wasClicked),o=Qe(f=>f.currentSearchImage.currentSearchImageURL),a=Qe(f=>f.crosshair.crosshairCoordinateX),u=Qe(f=>f.crosshair.crosshairCoordinateY),l=Qe(f=>f.leaderboard.allLeaderboardData),c=Ci(ga,i.toLowerCase()),h=ge.exports.useRef(null);ge.exports.useEffect(()=>{(async()=>{try{const p=(await pa(c)).docs.map(y=>({...y.data(),coordinates:y.id}));t(cD(p))}catch(f){console.log(f)}})()},[i,e]),ge.exports.useEffect(()=>{const f=$i.findIndex(p=>p.name==i);t(EE(l[f])),t(oc($i[f].url))});const d=f=>{h.current==f.target&&(t(gD(f.pageX)),t(yD(f.pageY)),t(Wv()))};return ge.exports.useEffect(()=>{try{if(n.every(f=>f.found)){t(Hm(n.map(y=>({...y,found:!1}))));const f=iC(new Date,new Date(r));let p=prompt("Enter your name");p?(p==null?void 0:p.length)>50&&(p=p==null?void 0:p.slice(0,50)):p="Unnamed",(async()=>{try{await FT(Ci(jL,`${i.toLowerCase()}/players`),{time:f,name:p})}catch(y){console.log(y)}})(),t(oc("")),t(yE(!1))}}catch(f){console.log(f)}},[n]),Yn(JR,{children:[J(CL,{}),e&&J(EL,{}),o&&e?J(ZR,{src:o,alt:"Search Image",ref:h,onClick:f=>d(f)}):J(GL,{}),!e&&J(qL,{}),J(AL,{crosshairCoordinateX:a,crosshairCoordinateY:u,wasClicked:s,setWasClicked:Wv,reference:h})]})};function HL(){return J("div",{className:"App",children:J(Tb,{store:wD,children:J(WL,{})})})}const QL=XR`
  *{
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
`;rf.createRoot(document.getElementById("root")).render(Yn(hu,{children:[J(QL,{}),J(HL,{})]}));
